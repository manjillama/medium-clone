(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){e.exports=a(157)},129:function(e,t,a){},134:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return tt})),a.d(t,"store",(function(){return at}));var n={};a.r(n),a.d(n,"signUp",(function(){return C})),a.d(n,"signIn",(function(){return k})),a.d(n,"getUser",(function(){return x})),a.d(n,"signOut",(function(){return L}));var r=a(0),l=a.n(r),o=a(26),s=a.n(o),i=a(164),c=a(165),u=a(158),m=a(8),d=a(10),h=a(90),p=a(3),g=a(4),f=a(6),E=a(5),v=a(161),b=a(16),y=a.n(b),M=a(24),N="/";"dev"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ENV&&(N="http://localhost:5000/");var j={BASE_URL:window.location.protocol+"//"+window.location.hostname+":"+window.location.port,SERVER_URL:N},S=a(7),w=a.n(S),C=function(e,t){return function(){var a=Object(M.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w.a.post(j.SERVER_URL+"signup",e);case 3:if(!(r=a.sent).data.error){a.next=6;break}throw new Error("Email already taken");case 6:n({type:"AUTH_USER",payload:r.data}),localStorage.setItem("token",r.data.token),t(!1),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"AUTH_ERROR",payload:null}),t(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},k=function(e,t){return function(){var a=Object(M.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w.a.post(j.SERVER_URL+"signin",e);case 3:if(!(r=a.sent).data.error){a.next=6;break}throw new Error("Incorrect username or password");case 6:n({type:"AUTH_USER",payload:r.data}),localStorage.setItem("token",r.data.token),t(!1),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"AUTH_ERROR",payload:null}),t(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},x=function(e,t){return function(){var a=Object(M.a)(y.a.mark((function a(n){var r,l,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={authorization:e},a.next=4,w.a.get(j.SERVER_URL+"auth/api/user/get-user",{headers:r});case 4:l=a.sent,o={token:e,user:l.data.user},n({type:"AUTH_USER",payload:o}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),"Network Error"!==a.t0.message&&localStorage.removeItem("token"),n({type:"AUTH_ERROR",payload:null});case 13:return a.prev=13,t(),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,9,13,16]])})));return function(e){return a.apply(this,arguments)}}()},L=function(e){return function(t){localStorage.removeItem("token"),t({type:"AUTH_USER",payload:null}),e()}},I=(a(81),a(163)),O=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleBlur=function(t){var a=document.getElementById("pNotificationPanel"),n=document.getElementById("popNotificationPanel"),r=a.getElementsByTagName("ul");a&&(a.contains(t.target)||n.contains(t.target)?r[0].contains(t.target)&&setTimeout((function(){e.props.hideNotificationbar()}),100):e.props.hideNotificationbar())},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleBlur,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleBlur,!0)}},{key:"render",value:function(){return l.a.createElement("div",{className:"popover-userAction usr-n",id:"pNotificationPanel"},l.a.createElement("ul",null,l.a.createElement("li",null,"No new notifications")))}}]),a}(l.a.Component),T=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).toggleUserDropdown=function(){n.setState({showUserDropdown:!n.state.showUserDropdown})},n.hideUserDropDown=function(){n.setState({showUserDropdown:!1})},n.toggleNotificationBar=function(){n.setState({showNotication:!n.state.showNotication})},n.hideNotificationBar=function(){n.setState({showNotication:!1})},n.signOut=function(){n.setState({showUserDropdown:!1}),n.props.signOut((function(){n.props.history.push("/")}))},n.state={showUserDropdown:!1,showNotication:!1},n}return Object(g.a)(a,[{key:"triggerSignInModal",value:function(){this.props.openModal()}},{key:"_renderUserImage",value:function(){if(this.props.auth.user.profile_image)return l.a.createElement("img",{src:this.props.auth.user.profile_image,className:"user--img",alt:this.props.auth.user.fullname});var e=this.props.auth.user.fullname.charAt(0);return l.a.createElement("div",{className:"user--img"},l.a.createElement("span",null,e))}},{key:"renderLinks",value:function(){return this.props.auth?l.a.createElement("div",{className:"inline-continue"},l.a.createElement("li",null,l.a.createElement("button",{id:"popNotificationPanel",style:{position:"relative"},className:"btn-chromeless",onClick:this.toggleNotificationBar},l.a.createElement("span",{className:"svgIcon"},l.a.createElement("svg",{className:"svgIcon-use",width:"25",height:"25",viewBox:"-293 409 25 25"},l.a.createElement("path",{d:"M-273.327 423.67l-1.673-1.52v-3.646a5.5 5.5 0 0 0-6.04-5.474c-2.86.273-4.96 2.838-4.96 5.71v3.41l-1.68 1.553c-.204.19-.32.456-.32.734V427a1 1 0 0 0 1 1h3.49a3.079 3.079 0 0 0 3.01 2.45 3.08 3.08 0 0 0 3.01-2.45h3.49a1 1 0 0 0 1-1v-2.59c0-.28-.12-.55-.327-.74zm-7.173 5.63c-.842 0-1.55-.546-1.812-1.3h3.624a1.92 1.92 0 0 1-1.812 1.3zm6.35-2.45h-12.7v-2.347l1.63-1.51c.236-.216.37-.522.37-.843v-3.41c0-2.35 1.72-4.356 3.92-4.565a4.353 4.353 0 0 1 4.78 4.33v3.645c0 .324.137.633.376.85l1.624 1.477v2.373z"}))),this.state.showNotication&&l.a.createElement(O,{hideNotificationbar:this.hideNotificationBar}))),l.a.createElement("li",{className:"popover-p-wrap"},l.a.createElement("div",{id:"popUserPanel",style:{position:"relative"},className:"popover-userIcon",onClick:this.toggleUserDropdown},this._renderUserImage(),this.state.showUserDropdown&&l.a.createElement(z,{user:this.props.auth.user,signOut:this.signOut,hideUserDropDown:this.hideUserDropDown})))):l.a.createElement("li",null,l.a.createElement("button",{className:"btn--p-hollow mjl-btn",onClick:this.triggerSignInModal.bind(this)},"Get Started"))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"nav-top-bar"},l.a.createElement("nav",{className:"mjl-container"},l.a.createElement("div",{className:"tb-flex1"},l.a.createElement(v.a,{to:"/",id:"ThLogo"},l.a.createElement("img",{src:"/static/images/threadly-logo.png",className:"logo-l",height:"25px",alt:"Threadly Logo"}),l.a.createElement("img",{src:"/static/images/t-logo-min.png",className:"logo-x",height:"25px",alt:"Threadly Logo"}))),l.a.createElement("div",{className:"tb-flex0"},l.a.createElement("ul",{className:"list-inline th-nav-main"},l.a.createElement("li",null,l.a.createElement(v.a,{to:"/search"},l.a.createElement("svg",{className:"svgIcon",width:"25",height:"25"},l.a.createElement("path",{d:"M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"})))),this.renderLinks())))))}}]),a}(r.Component);var D=Object(I.a)(Object(m.b)((function(e){return{auth:e.auth.authenticated}}),{openModal:function(){return function(e){e({type:"OPEN_LOGIN_MODAL",payload:null})}},signOut:L})(T)),z=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleBlur=function(t){var a=document.getElementById("pUserActionPanel"),n=document.getElementById("popUserPanel"),r=a.getElementsByTagName("ul");a&&(a.contains(t.target)||n.contains(t.target)?r[0].contains(t.target)&&setTimeout((function(){e.props.hideUserDropDown()}),100):e.props.hideUserDropDown())},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleBlur,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleBlur,!0)}},{key:"render",value:function(){return l.a.createElement("div",{className:"popover-userAction usr-drd",id:"pUserActionPanel"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(v.a,{to:"/new-story"},"New Story")),l.a.createElement("li",null,l.a.createElement(v.a,{to:"/me/stories/drafts"},"Stories")),l.a.createElement("li",null,l.a.createElement(v.a,{to:"/@".concat(this.props.user.username)},"Profile")),l.a.createElement("li",null,l.a.createElement(v.a,{to:"/me/settings"},"Settings")),l.a.createElement("li",{style:{cursor:"pointer"},onClick:this.props.signOut},"Sign Out")))}}]),a}(r.Component),A=a(39),U=(a(82),a(160)),R=a(159),_=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){return n.props.signIn(e,(function(e){e?n.setState({error:e,addErrorClass:!0},(function(){setTimeout((function(){n.setState({addErrorClass:!1})}),250)})):(n.props.closeModal(),n.props.history.push("/"))}))},n.state={error:null,addErrorClass:!1},n}return Object(g.a)(a,[{key:"renderField",value:function(e){var t=e.meta,a=t.touched&&t.error?"text--danger":"",n="input-group ".concat(t.touched&&t.error?"got-danger":"");return l.a.createElement("div",{className:n},l.a.createElement("label",{className:a},t.touched&&t.error?t.error:e.label),l.a.createElement(e.field,Object.assign({className:"mjl-input input--underlined",type:e.type,autoComplete:"off"},e.input)),l.a.createElement("div",{className:"text-help"}))}},{key:"__renderSigninError",value:function(){if(this.state.error)return this.state.addErrorClass?l.a.createElement("span",{className:"text--danger block-strong jitter-err"},this.state.error):l.a.createElement("span",{className:"text--danger block-strong"},this.state.error)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,n=e.invalid;return l.a.createElement("form",{onSubmit:t(this.onSubmit)},l.a.createElement(U.a,{type:"input",field:"input",label:"Your username or email",name:"email",component:this.renderField}),l.a.createElement(U.a,{type:"password",field:"input",label:"Your password",name:"password",component:this.renderField}),l.a.createElement("div",{style:{display:"block",height:"30px",marginTop:"12px"}},this.__renderSigninError()),l.a.createElement("button",{type:"submit",disabled:n||a,className:"mjl-btn btn--dark"},"Log In"))}}]),a}(l.a.Component);var B=Object(d.d)(Object(m.b)(null,n),Object(R.a)({validate:function(e){var t={};return e.email||(t.email="Please enter a valid email"),e.password||(t.password="Please enter your password"),t},form:"signInForm"}),I.a)(_),P=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Please enter a valid email":void 0},Y=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){return n.props.signUp(e,(function(e){e?n.setState({error:e,addErrorClass:!0},(function(){setTimeout((function(){n.setState({addErrorClass:!1})}),250)})):(n.props.closeModal(),n.props.history.push("/"))}))},n.state={error:null,addErrorClass:!1},n}return Object(g.a)(a,[{key:"renderField",value:function(e){var t=e.meta,a=t.touched&&t.error?"text--danger":"",n="input-group ".concat(t.touched&&t.error?"got-danger":"");return l.a.createElement("div",{className:n},l.a.createElement("label",{className:a},t.touched&&t.error?t.error:e.label),l.a.createElement(e.field,Object.assign({className:"mjl-input input--underlined",type:e.type,autoComplete:"off"},e.input)),l.a.createElement("div",{className:"text-help"}))}},{key:"__renderSignUpError",value:function(){if(this.state.error)return this.state.addErrorClass?l.a.createElement("span",{className:"text--danger block-strong jitter-err"},this.state.error):l.a.createElement("span",{className:"text--danger block-strong"},this.state.error)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,n=e.invalid;return l.a.createElement("form",{onSubmit:t(this.onSubmit)},l.a.createElement(U.a,{type:"text",field:"input",label:"Your full name",name:"fullname",component:this.renderField}),l.a.createElement(U.a,{type:"input",validate:P,field:"input",label:"Your email",name:"email",component:this.renderField}),l.a.createElement(U.a,{type:"password",field:"input",label:"Your password",name:"password",component:this.renderField}),l.a.createElement("div",{style:{display:"block",height:"30px",marginTop:"12px"}},this.__renderSignUpError()),l.a.createElement("button",{type:"submit",disabled:n||a,className:"mjl-btn btn--dark"},"Sign Up"))}}]),a}(l.a.Component);var V=Object(d.d)(Object(m.b)(null,n),Object(R.a)({validate:function(e){var t={};return e.fullname||(t.fullname="Please enter your full name"),e.email||(t.email="Please enter a valid email"),e.password||(t.password="Please enter your password"),t},form:"signUpForm"}),I.a)(Y),G=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleBlur=function(e){var t=document.getElementsByClassName("modal-dialog")[0];t&&(t.contains(e.target)||n.props.closeModal())},n.state={signInModal:!0},n.toggleContent=n.toggleContent.bind(Object(A.a)(n)),n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.modalTarget=document.createElement("div"),document.body.appendChild(this.modalTarget),document.addEventListener("click",this.handleBlur,!0),this._render()}},{key:"componentWillUnmount",value:function(){s.a.unmountComponentAtNode(this.modalTarget),document.body.removeChild(this.modalTarget),document.removeEventListener("click",this.handleBlur,!0)}},{key:"toggleContent",value:function(){var e=this;this.setState({signInModal:!this.state.signInModal},(function(){e._render()}))}},{key:"toggleModalContent",value:function(){return this.state.signInModal?l.a.createElement("div",null,l.a.createElement("h1",null,"Hi There."),l.a.createElement("h2",null,"Sign in to access your personalized homepage, follow authors and topics you love."),l.a.createElement("div",{className:"sm-caption"},l.a.createElement("div",{className:"col-max-300"},l.a.createElement(B,{closeModal:this.props.closeModal})),l.a.createElement("br",null),l.a.createElement("p",null,"No account? ",l.a.createElement("button",{className:"btn-chromeless text--primary",onClick:this.toggleContent},"Create One")))):l.a.createElement("div",null,l.a.createElement("h1",null,"Join The Thread."),l.a.createElement("h2",null,"Create an account to personalize your homepage, follow your favorite authors, publications and more."),l.a.createElement("div",{className:"sm-caption"},l.a.createElement("div",{className:"col-max-300"},l.a.createElement(V,{closeModal:this.props.closeModal})),l.a.createElement("br",null),l.a.createElement("p",null,"Already have an account? ",l.a.createElement("button",{className:"btn-chromeless text--primary",onClick:this.toggleContent},"Sign In"))))}},{key:"createModal",value:function(){var e=this.state.signInModal?"#D7EFEE":"#E8F3EC";return l.a.createElement("div",{id:"loginModalWrapper"},l.a.createElement("div",{className:"modal-backdrop"}),l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-dialog",style:{backgroundColor:e}},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-body"},l.a.createElement("svg",{className:"closeModal",width:"29",height:"29",onClick:this.props.closeModal},l.a.createElement("path",{d:"M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61",fillRule:"evenodd"})),l.a.createElement("div",{className:"login-holder"},this.toggleModalContent()))))))}},{key:"_render",value:function(){s.a.render(l.a.createElement(m.a,{store:at},l.a.createElement(i.a,{history:tt},this.createModal())),this.modalTarget)}},{key:"render",value:function(){return l.a.createElement("noscript",null)}}]),a}(r.Component),W=Object(m.b)(null,{closeModal:function(){return function(e){e({type:"CLOSE_LOGIN_MODAL",payload:null})}}})(G),H=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={renderApp:!0},n}return Object(g.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("token");t&&this.setState({renderApp:!1},(function(){e.props.getUser(t,(function(){e.setState({renderApp:!0})}))}))}},{key:"_renderModal",value:function(){if(this.props.openModal)return l.a.createElement(W,null)}},{key:"render",value:function(){return this.state.renderApp?l.a.createElement("div",null,l.a.createElement(D,null),l.a.createElement("div",{className:"mjl-container"},this.props.children,this._renderModal())):l.a.createElement("h1",null,"Loading...")}}]),a}(l.a.Component);var Z=Object(I.a)(Object(m.b)((function(e){return{openModal:e.loginModal.openModal}}),{getUser:x})(H)),F=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"main-category-nav"},l.a.createElement("ul",{className:"nav-cate-l list-inline"},l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/technology"},"Tech")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/entertainment"},"Entertainment")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/startups"},"Startups")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/industry"},"Industry")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/life"},"Life")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/design"},"Design")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/health"},"Health")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/country"},"Country")),l.a.createElement("li",null,l.a.createElement("a",{href:"/topic/politics"},"Politics"))))}}]),a}(r.Component),Q=a(52),K=a.n(Q),J=function(e){var t=K()(e).format("YYYY-MM-DD HH:mm:ss");return K.a.utc(t).local().format("MMM Do, YYYY")};a(129);function q(e){return w.a.get(j.SERVER_URL+"api/story/"+e)}var X=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={featuredStory:null},e}return Object(g.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;"Life"===e.topic?q(2).then((function(e){t.setState({featuredStory:e.data.blog})})):q(1).then((function(e){t.setState({featuredStory:e.data.blog})}))}},{key:"render",value:function(){var e=this.state.featuredStory;if(e){var t=J(e.created_at),a={};return a=e.blogThumbnails.length>0?{backgroundImage:"url(".concat(e.blogThumbnails[0].story_thumb,")")}:{backgroundImage:"url(https://images.unsplash.com/photo-1523265760936-36c1b113b303?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1035&q=80)"},l.a.createElement("div",{className:"t-featured"},l.a.createElement("article",null,l.a.createElement("h4",null,"FEATURED"),l.a.createElement("a",{className:"f-img",style:a,href:"http://threadly.vortexnepal.com/@".concat(e.blogger.username,"/").concat(e.id)}),l.a.createElement("h1",null,l.a.createElement("a",{href:"http://threadly.vortexnepal.com/@".concat(e.blogger.username,"/").concat(e.id)},e.title)),l.a.createElement("p",null,l.a.createElement("a",{href:"http://threadly.vortexnepal.com/@".concat(e.blogger.username,"/").concat(e.id)},e.story_summary))),l.a.createElement("div",{className:"d--flex u-ct"},l.a.createElement("a",{href:"http://threadly.vortexnepal.com/@".concat(e.blogger.username),className:"p-i-wrap"},l.a.createElement("img",{src:e.blogger.profile_image,alt:"Manjil Tamang"})),l.a.createElement("div",{className:"u-w"},l.a.createElement("a",{href:"http://threadly.vortexnepal.com/@".concat(e.blogger.username)},e.blogger.fullname),l.a.createElement("span",null,t))))}return l.a.createElement("noscript",null)}}]),a}(l.a.Component),$=a(49),ee=function(e){return l.a.createElement("div",null,l.a.createElement("div",{className:"h-page"},l.a.createElement("div",{className:"d--flex flex-sb h-c-wrap"},l.a.createElement("div",{className:"main-c"},l.a.createElement(X,{topic:e.topic}),l.a.createElement("div",null,l.a.createElement("h4",{className:"p-t"},"LATEST"),e.stories?e.stories.length>0?e.stories.map((function(e){var t=J(e.created_at);return l.a.createElement("div",{key:e.id,className:"c-item d--flex flex-sb"},l.a.createElement("div",null,l.a.createElement("article",null,l.a.createElement(v.a,{to:"/@".concat(e.blogger.username,"/").concat(e.id)},l.a.createElement("h3",null,e.title),l.a.createElement("p",{className:"d-summary text--muted"},e.story_summary,"...")),l.a.createElement("div",{className:"c-info"},l.a.createElement(v.a,{to:"/@".concat(e.blogger.username)},l.a.createElement("p",null,e.blogger.fullname)),l.a.createElement("span",{className:"text--muted"},t)))),function(e){if(e.blogThumbnails[0]){var t=e.blogThumbnails[0].story_thumb;return l.a.createElement(v.a,{style:{backgroundImage:"url(".concat(t,")")},to:"/@".concat(e.blogger.username,"/").concat(e.id),className:"h-s-img"})}}(e))})):l.a.createElement("h4",{style:{marginTop:"10px"}},"No stories as of yet to read. :( "):l.a.createElement("h4",null,"Loading..."))),l.a.createElement("div",{className:"h-s"},l.a.createElement($.StickyContainer,null,l.a.createElement($.Sticky,null,(function(e){var t={};return e.distanceFromTop<0&&(t={top:"8px",position:"fixed"}),l.a.createElement("div",{style:t},l.a.createElement(te,null))})))))))};function te(){return l.a.createElement("div",{className:"hs--ad"},l.a.createElement("span",{className:"adv-t text--muted"},l.a.createElement("img",{style:{height:"14px",marginRight:"5px"},src:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMS4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDE1IDE1IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNSAxNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxnPgoJPHBhdGggZD0iTTE0Ljk4Miw3QzE0LjczNiwzLjI1NiwxMS43NDQsMC4yNjMsOCwwLjAxN1YwSDcuNUg3djAuMDE3QzMuMjU2LDAuMjYzLDAuMjYzLDMuMjU2LDAuMDE3LDdIMHYwLjUgICBWOGgwLjAxN0MwLjI2MywxMS43NDQsMy4yNTYsMTQuNzM2LDcsMTQuOTgyVjE1aDAuNUg4di0wLjAxOGMzLjc0NC0wLjI0Niw2LjczNi0zLjIzOCw2Ljk4Mi02Ljk4MkgxNVY3LjVWN0gxNC45ODJ6IE00LjY5NSwxLjYzNSAgIEM0LjIxMiwyLjI3NywzLjgxMSwzLjA4MiwzLjUxOSw0SDIuMDIxQzIuNjczLDIuOTgzLDMuNTk5LDIuMTYsNC42OTUsMS42MzV6IE0xLjQ5OCw1aDEuNzU4QzMuMTIyLDUuNjMyLDMuMDM3LDYuMzAzLDMuMDEsN0gxLjAxOSAgIEMxLjA3Miw2LjI5NiwxLjIzOCw1LjYyMywxLjQ5OCw1eiBNMS4wMTksOEgzLjAxYzAuMDI3LDAuNjk3LDAuMTEyLDEuMzY4LDAuMjQ2LDJIMS40OThDMS4yMzgsOS4zNzcsMS4wNzIsOC43MDQsMS4wMTksOHogICAgTTIuMDIxLDExaDEuNDk3YzAuMjkyLDAuOTE4LDAuNjkzLDEuNzIzLDEuMTc3LDIuMzY1QzMuNTk5LDEyLjg0LDIuNjczLDEyLjAxOCwyLjAyMSwxMXogTTcsMTMuOTM2ICAgQzUuOTcyLDEzLjY2MSw1LjA4NywxMi41NTcsNC41NSwxMUg3VjEzLjkzNnogTTcsMTBINC4yNjlDNC4xMjgsOS4zNzcsNC4wMzksOC43MDQsNC4wMSw4SDdWMTB6IE03LDdINC4wMSAgIGMwLjAyOS0wLjcwNCwwLjExOC0xLjM3NywwLjI1OS0ySDdWN3ogTTcsNEg0LjU1QzUuMDg3LDIuNDQzLDUuOTcyLDEuMzM5LDcsMS4wNjVWNHogTTEyLjk3OSw0aC0xLjQ5NiAgIGMtMC4yOTMtMC45MTgtMC42OTMtMS43MjMtMS4xNzgtMi4zNjVDMTEuNCwyLjE2LDEyLjMyNywyLjk4MywxMi45NzksNHogTTgsMS4wNjVDOS4wMjcsMS4zMzksOS45MTMsMi40NDMsMTAuNDUsNEg4VjEuMDY1eiBNOCw1ICAgaDIuNzNjMC4xNDIsMC42MjMsMC4yMjksMS4yOTYsMC4yNiwySDhWNXogTTgsOGgyLjk5Yy0wLjAyOSwwLjcwNC0wLjExOCwxLjM3Ny0wLjI2LDJIOFY4eiBNOCwxMy45MzZWMTFoMi40NSAgIEM5LjkxMywxMi41NTcsOS4wMjcsMTMuNjYxLDgsMTMuOTM2eiBNMTAuMzA1LDEzLjM2NWMwLjQ4My0wLjY0MywwLjg4NS0xLjQ0NywxLjE3OC0yLjM2NWgxLjQ5NiAgIEMxMi4zMjcsMTIuMDE4LDExLjQsMTIuODQsMTAuMzA1LDEzLjM2NXogTTEzLjUwMiwxMGgtMS43NThjMC4xMzQtMC42MzIsMC4yMTktMS4zMDMsMC4yNDYtMmgxLjk5ICAgQzEzLjkyOCw4LjcwNCwxMy43NjIsOS4zNzcsMTMuNTAyLDEweiBNMTEuOTksN2MtMC4wMjctMC42OTctMC4xMTItMS4zNjgtMC4yNDYtMmgxLjc1OGMwLjI2LDAuNjIzLDAuNDI2LDEuMjk2LDAuNDc5LDJIMTEuOTl6IiBmaWxsPSIjNmU2ZTZlIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==",alt:""}),"Sponsored"),l.a.createElement("div",null,l.a.createElement("a",{href:"https://www.ghyampostore.com",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("img",{src:"/static/images/ghyampo-sidebanner.png",alt:"ghyampo store banner"}))),l.a.createElement("div",{className:"site-map"},l.a.createElement("ul",{className:"neutralize text--muted"},l.a.createElement("li",null,l.a.createElement(v.a,{to:"/about"},"About")),l.a.createElement("li",null,l.a.createElement(v.a,{to:"/about"},"Privacy")),l.a.createElement("li",null,l.a.createElement(v.a,{to:"/terms"},"Terms")))))}var ae=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={stories:null},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.a.get("".concat(j.SERVER_URL,"test-stories")).then((function(t){e.setState({stories:t.data})}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(F,null),l.a.createElement(ee,{stories:this.state.stories}))}}]),a}(l.a.Component);var ne=Object(m.b)((function(e){return{state:e}}))(ae),re=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={stories:null,error:!1},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.logoNode=document.getElementById("ThLogo"),this.topic=this.props.match.params.topic,this.fetchStory()}},{key:"componentWillUnmount",value:function(){this.node&&this.node.parentNode.removeChild(this.node)}},{key:"__capitalizeFirstChar",value:function(e){return e.charAt(0).toUpperCase()+e.substr(1)}},{key:"__displayTopicTitle",value:function(){var e=this.__capitalizeFirstChar(this.topic);this.node=document.createElement("H2");var t=document.createTextNode(e);this.node.appendChild(t),this.logoNode.appendChild(this.node)}},{key:"fetchStory",value:function(){var e=this,t=this.topic;w.a.get("".concat(j.SERVER_URL,"test-topic/").concat(t)).then((function(t){t.data.error?e.setState({error:!0}):(e.__displayTopicTitle(),e.setState({stories:t.data}))}))}},{key:"render",value:function(){var e="";return this.topic&&(e=this.__capitalizeFirstChar(this.topic)),l.a.createElement("section",null,this.state.error?l.a.createElement("h1",null,"404 Page not found"):l.a.createElement(ee,{topic:e,stories:this.state.stories}))}}]),a}(l.a.Component),le=(a(134),function(e){return l.a.createElement("div",{className:"s-c"},e.stories.map((function(e){return l.a.createElement("div",{key:e.username},l.a.createElement("div",{style:{margin:"".concat(20,"px ",0)}},function(e){if(e.profile_image)return l.a.createElement(v.a,{to:"/@".concat(e.username)},l.a.createElement("img",{className:"user--img",src:e.profile_image,alt:e.fullname}));var t=e.fullname.charAt(0);return l.a.createElement(v.a,{to:"/@".concat(e.username)},l.a.createElement("div",{className:"user--img"},l.a.createElement("span",null,t)))}(e),l.a.createElement("div",{className:"user-i"},l.a.createElement(v.a,{to:"/@".concat(e.username)},e.fullname),l.a.createElement("span",null,e.bio))),function(e,t){return e.map((function(e){var a=e.story_thumbnail;return l.a.createElement("div",{className:"s-story",key:e.id},a&&l.a.createElement(v.a,{to:"/@".concat(t,"/").concat(e.id),className:"story-box",style:{backgroundImage:"url(".concat(a,")")}}),l.a.createElement("article",null,l.a.createElement(v.a,{to:"/@".concat(t,"/").concat(e.id)},l.a.createElement("h2",null,e.title),l.a.createElement("p",{className:"text--muted"},e.story_summary))))}))}(e.stories,e.username))})))});var oe=function(e){return l.a.createElement("div",{className:"p-c"},e.people.map((function(e){return l.a.createElement("div",{key:e.id,className:"people-c d--flex"},function(e){if(e.profile_image)return l.a.createElement(v.a,{to:"/@".concat(e.username)},l.a.createElement("img",{className:"usr--img",src:e.profile_image,alt:e.fullname}));var t=e.fullname.charAt(0);return l.a.createElement(v.a,{to:"/@".concat(e.username)},l.a.createElement("div",{className:"usr--img"},l.a.createElement("span",null,t)))}(e),l.a.createElement("div",{className:"p-a"},l.a.createElement(v.a,{to:"/@".concat(e.username)},l.a.createElement("h3",null,e.fullname)),l.a.createElement("p",null,e.bio)))})))};var se=a(135),ie=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).onSearch=function(t){e.setState({query:t.target.value},(function(){e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){var t=e.state.query;""!==t?(e.fetchSearchData(t),e.props.history.push("".concat(e.props.history.location.pathname,"?q=").concat(t))):(e.setState({stories:[],people:[]}),e.props.history.push(e.props.history.location.pathname))}),800)}))},e.state={stories:[],people:[],query:""},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.timeout=0,this._searchInitializer(this.props.history.location.search)}},{key:"componentWillReceiveProps",value:function(e){this._searchInitializer(e.history.location.search)}},{key:"_searchInitializer",value:function(e){var t=se.parse(e).q;t&&(this.setState({query:t}),this.fetchSearchData(t))}},{key:"fetchSearchData",value:function(e){var t=this;(function(e){return w.a.get(j.SERVER_URL+"api/search/stories/"+e)})(e).then((function(e){t.setState({stories:e.data})})),function(e){return w.a.get(j.SERVER_URL+"api/search/people/"+e)}(e).then((function(e){t.setState({people:e.data})}))}},{key:"__renderContent",value:function(e){return"/search"===e?l.a.createElement(le,{stories:this.state.stories}):"/search/users"===e?l.a.createElement(oe,{people:this.state.people}):l.a.createElement("h1",{style:{width:"100%"}},"Page not found")}},{key:"_renderTabs",value:function(e){var t,a;return""===this.state.query?(t="/search",a="/search/users"):(t="/search?q=".concat(this.state.query),a="/search/users?q=".concat(this.state.query)),"/search"===e?l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(v.a,{to:t,className:"active"},"Stories")),l.a.createElement("li",null,l.a.createElement(v.a,{to:a},"People"))):"/search/users"===e?l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(v.a,{to:t},"Stories")),l.a.createElement("li",null,l.a.createElement(v.a,{to:a,className:"active"},"People"))):l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(v.a,{to:t,className:"active"},"Stories")),l.a.createElement("li",null,l.a.createElement(v.a,{to:a},"People")))}},{key:"render",value:function(){var e=this.props.location.pathname;return l.a.createElement("section",{className:"mjl-container p-search"},l.a.createElement("input",{value:this.state.query,autoComplete:"off",placeholder:"Search Threadly",onChange:this.onSearch,className:"text-input"}),l.a.createElement("div",{className:"s-wrapper"},l.a.createElement("nav",null,this._renderTabs(e)),l.a.createElement("div",{className:"s-content d--flex"},this.__renderContent(e),l.a.createElement("div",{className:"s-adv"},l.a.createElement($.StickyContainer,null,l.a.createElement($.Sticky,null,(function(e){var t={};return e.distanceFromTop<0&&(t={top:"8px",position:"fixed"}),l.a.createElement("div",{style:t},l.a.createElement("span",{className:"adv-t text--muted"},l.a.createElement("img",{style:{height:"14px",marginRight:"5px"},src:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMS4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDE1IDE1IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNSAxNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxnPgoJPHBhdGggZD0iTTE0Ljk4Miw3QzE0LjczNiwzLjI1NiwxMS43NDQsMC4yNjMsOCwwLjAxN1YwSDcuNUg3djAuMDE3QzMuMjU2LDAuMjYzLDAuMjYzLDMuMjU2LDAuMDE3LDdIMHYwLjUgICBWOGgwLjAxN0MwLjI2MywxMS43NDQsMy4yNTYsMTQuNzM2LDcsMTQuOTgyVjE1aDAuNUg4di0wLjAxOGMzLjc0NC0wLjI0Niw2LjczNi0zLjIzOCw2Ljk4Mi02Ljk4MkgxNVY3LjVWN0gxNC45ODJ6IE00LjY5NSwxLjYzNSAgIEM0LjIxMiwyLjI3NywzLjgxMSwzLjA4MiwzLjUxOSw0SDIuMDIxQzIuNjczLDIuOTgzLDMuNTk5LDIuMTYsNC42OTUsMS42MzV6IE0xLjQ5OCw1aDEuNzU4QzMuMTIyLDUuNjMyLDMuMDM3LDYuMzAzLDMuMDEsN0gxLjAxOSAgIEMxLjA3Miw2LjI5NiwxLjIzOCw1LjYyMywxLjQ5OCw1eiBNMS4wMTksOEgzLjAxYzAuMDI3LDAuNjk3LDAuMTEyLDEuMzY4LDAuMjQ2LDJIMS40OThDMS4yMzgsOS4zNzcsMS4wNzIsOC43MDQsMS4wMTksOHogICAgTTIuMDIxLDExaDEuNDk3YzAuMjkyLDAuOTE4LDAuNjkzLDEuNzIzLDEuMTc3LDIuMzY1QzMuNTk5LDEyLjg0LDIuNjczLDEyLjAxOCwyLjAyMSwxMXogTTcsMTMuOTM2ICAgQzUuOTcyLDEzLjY2MSw1LjA4NywxMi41NTcsNC41NSwxMUg3VjEzLjkzNnogTTcsMTBINC4yNjlDNC4xMjgsOS4zNzcsNC4wMzksOC43MDQsNC4wMSw4SDdWMTB6IE03LDdINC4wMSAgIGMwLjAyOS0wLjcwNCwwLjExOC0xLjM3NywwLjI1OS0ySDdWN3ogTTcsNEg0LjU1QzUuMDg3LDIuNDQzLDUuOTcyLDEuMzM5LDcsMS4wNjVWNHogTTEyLjk3OSw0aC0xLjQ5NiAgIGMtMC4yOTMtMC45MTgtMC42OTMtMS43MjMtMS4xNzgtMi4zNjVDMTEuNCwyLjE2LDEyLjMyNywyLjk4MywxMi45NzksNHogTTgsMS4wNjVDOS4wMjcsMS4zMzksOS45MTMsMi40NDMsMTAuNDUsNEg4VjEuMDY1eiBNOCw1ICAgaDIuNzNjMC4xNDIsMC42MjMsMC4yMjksMS4yOTYsMC4yNiwySDhWNXogTTgsOGgyLjk5Yy0wLjAyOSwwLjcwNC0wLjExOCwxLjM3Ny0wLjI2LDJIOFY4eiBNOCwxMy45MzZWMTFoMi40NSAgIEM5LjkxMywxMi41NTcsOS4wMjcsMTMuNjYxLDgsMTMuOTM2eiBNMTAuMzA1LDEzLjM2NWMwLjQ4My0wLjY0MywwLjg4NS0xLjQ0NywxLjE3OC0yLjM2NWgxLjQ5NiAgIEMxMi4zMjcsMTIuMDE4LDExLjQsMTIuODQsMTAuMzA1LDEzLjM2NXogTTEzLjUwMiwxMGgtMS43NThjMC4xMzQtMC42MzIsMC4yMTktMS4zMDMsMC4yNDYtMmgxLjk5ICAgQzEzLjkyOCw4LjcwNCwxMy43NjIsOS4zNzcsMTMuNTAyLDEweiBNMTEuOTksN2MtMC4wMjctMC42OTctMC4xMTItMS4zNjgtMC4yNDYtMmgxLjc1OGMwLjI2LDAuNjIzLDAuNDI2LDEuMjk2LDAuNDc5LDJIMTEuOTl6IiBmaWxsPSIjNmU2ZTZlIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==",alt:""}),"Sponsored"),l.a.createElement("div",null,l.a.createElement("a",{href:"https://www.ghyampostore.com",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("img",{src:"/static/images/ghyampo-sb.png",alt:"ghyampo store banner"}))))})))))))}}]),a}(l.a.Component),ce=(a(144),a(84),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return l.a.createElement("section",{className:"p-about"},l.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap",rel:"stylesheet"}),l.a.createElement("article",null,l.a.createElement("h1",null,"Be Influential and Get Influenced! Welcome to Threadly."),l.a.createElement("p",{className:"text-muted"},"Who really aren't visionaries? We all dream of changing the world or community for the betterment. But being a visionary and strong will only takes a person so far. ",l.a.createElement("b",null,"WE ALL NEED A TEAM TO MAKE IT WORK!")," A Paul Allen for Bill Gates, Steve Wozniak for Steve Jobs. Threadly aims to provide a platform for such Nepalese people to share ideas and discover talents in close quarters. Read, share, make new friends, be influential and get influenced that's what Threadly is all about.")),l.a.createElement("hr",{style:{margin:"22px 0"}}),l.a.createElement("h2",null,"Meet the Creator"),l.a.createElement("div",{className:"text-center"},l.a.createElement("img",{src:"/static/images/creator.jpg",alt:"Threadly Creator",className:"img--responsive"})),l.a.createElement("p",{className:"c-quote"},l.a.createElement("i",{className:"fa fa-quote-left","aria-hidden":"true"})," Started as a pet project of mine. Threadly really started to come to life after I indulged myself more with the power of social media. To be able to find and connect similar people in a close proximity who shares the same vision as you is certainly a remarkable experience. ",l.a.createElement("i",{className:"fa fa-quote-right","aria-hidden":"true"})),l.a.createElement("p",{className:"text-center text--muted"},"- Manjil Tamang"))}}]),a}(l.a.Component)),ue=function(){return l.a.createElement("h1",null,"HOC 404 Error Nigga!")},me=function(e){var t=function(t){Object(f.a)(n,t);var a=Object(E.a)(n);function n(){return Object(p.a)(this,n),a.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return this.props.auth?l.a.createElement(e,this.props):l.a.createElement(ue,null)}}]),n}(r.Component);return Object(m.b)((function(e){return{auth:e.auth.authenticated}}))(t)};a(145);var de=a(95),he=(a(146),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).submit=function(){e.props.onMount&&e.props.onMount(),Object(de.confirmAlert)({customUI:function(t){var a=t.onClose;return l.a.createElement("div",{className:"custom-ui"},l.a.createElement("h1",null,e.props.text),l.a.createElement("p",{style:{marginTop:"8px",marginBottom:"16px"}},e.props.msg),l.a.createElement("button",{className:"mjl-btn btn-danger-hollow btn--dead-hollow",onClick:function(){e.props.handleConfirm(e.props.actionId),a()}},e.props.text),l.a.createElement("button",{style:{marginLeft:"10px"},className:"mjl-btn btn--d-hollow",onClick:a},"Cancel"))}})},e}return Object(g.a)(a,[{key:"render",value:function(){return l.a.createElement("span",{onClick:this.submit},this.props.text)}}]),a}(l.a.Component)),pe=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).onInputChange=function(t){e.setState({username:t.target.value,userExist:!0},(function(){e.searchUsernameAvaibility()}))},e.searchUsernameAvaibility=function(){e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){var t=e.state.username;if(t.length<4)e.setState({errorMsg:"Username not available",successMsg:null});else if(e.state.username.match(e.usernameRegex)){var a=new FormData;a.append("username",t),function(e,t){var a={authorization:t};return w.a.post(j.SERVER_URL+"auth/api/user/username-check",e,{headers:a})}(a,e.userToken).then((function(t){t.data.usernameExist?e.setState({errorMsg:"Username not available",successMsg:null}):e.setState({errorMsg:null,successMsg:"Username available",userExist:!1})}))}else e.setState({errorMsg:"Username must consist of only number and letters",successMsg:null})}),300)},e.onCancel=function(){e.setState({editMode:!1,userExist:!0,errorMsg:null,successMsg:null,username:e.props.username})},e.handleSubmit=function(){var t=e.state.username,a=new FormData;a.append("username",t),function(e,t){var a={authorization:t};return w.a.post(j.SERVER_URL+"auth/api/user/change-username",e,{headers:a})}(a,e.userToken).then((function(){var e=j.BASE_URL+"/me/settings";window.location.href=e}))},e.state={username:"",userExist:!0,editMode:!1,errorMsg:null,successMsg:null},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.timeout=0,this.userToken=localStorage.getItem("token"),this.usernameRegex=/^[a-zA-Z0-9]+$/,this.setState({username:this.props.username})}},{key:"_renderErrorMsg",value:function(){return this.state.errorMsg?l.a.createElement("p",{className:"text--danger"},l.a.createElement("small",null,this.state.errorMsg)):this.state.successMsg?l.a.createElement("p",{className:"text--primary"},l.a.createElement("small",null,this.state.successMsg)):void 0}},{key:"_renderBtn",value:function(){var e=this;return this.state.editMode?l.a.createElement("div",null,this.state.userExist?l.a.createElement("button",{className:"mjl-btn btn--p-hollow m-right",disabled:!0},"Save"):l.a.createElement(he,{className:"",actionId:"ok",handleConfirm:this.handleSubmit,text:"Save",msg:"When you change your username, existing links to your profile will no longer work. You must update this link on any external sites."}),l.a.createElement("button",{className:"mjl-btn def",onClick:this.onCancel},"Cancel")):l.a.createElement("button",{className:"mjl-btn def",onClick:function(){e.setState({editMode:!0})}},"Edit Username")}},{key:"render",value:function(){return l.a.createElement("section",{className:"container--sm p-u-settings"},l.a.createElement("h1",null,"Settings"),l.a.createElement("div",{className:"s-block"},l.a.createElement("h2",{className:"b-header"},"Account"),l.a.createElement("ul",null,l.a.createElement("li",{className:"d--flex flex-sb flex-fw"},l.a.createElement("div",{className:"f-f"},l.a.createElement("h3",null,"Your username"),l.a.createElement("div",null,l.a.createElement("span",null,j.BASE_URL,"/@"),this.state.editMode?l.a.createElement("input",{maxLength:"30",value:this.state.username,onChange:this.onInputChange,autoComplete:"off"}):l.a.createElement("input",{maxLength:"30",disabled:!0,value:this.state.username})),this._renderErrorMsg()),l.a.createElement("div",{className:"u-btns"},this._renderBtn())))))}}]),a}(l.a.Component);var ge=Object(m.b)((function(e){return{username:e.auth.authenticated.user.username}}),null)(me(pe));a(147),a(85);var fe=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={stories:null},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.blogger.id,w.a.get(j.SERVER_URL+"api/user/get-stories/"+e)).then((function(e){t.setState({stories:e.data})}))}},{key:"_renderProfileImage",value:function(){if(this.props.blogger.profile_image)return l.a.createElement(v.a,{to:"/@".concat(this.props.blogger.username)},l.a.createElement("img",{src:this.props.blogger.profile_image,alt:this.props.blogger.fullname}));var e=this.props.blogger.fullname.charAt(0);return l.a.createElement(v.a,{to:"/@".concat(this.props.blogger.username)},l.a.createElement("div",{className:"usr-p-image"},l.a.createElement("span",null,e)))}},{key:"_renderStories",value:function(){var e=this;return this.state.stories.map((function(t){var a=J(t.created_at);return l.a.createElement("div",{key:t.id,className:"p-story-wrap"},l.a.createElement("div",{className:"info-wrap d--flex"},l.a.createElement("div",null,e._renderProfileImage()),l.a.createElement("div",{className:"usr-w"},l.a.createElement(v.a,{to:"/@".concat(e.props.blogger.username)},e.props.blogger.fullname),l.a.createElement("span",null,a))),l.a.createElement("div",null,l.a.createElement(v.a,{to:"@".concat(e.props.blogger.username,"/").concat(t.id)},l.a.createElement("h2",null,t.title),l.a.createElement("p",{id:"sDesc",className:"text--muted desc-s"},t.story_summary,"..."))))}))}},{key:"showStory",value:function(){return this.state.stories?this.state.stories.length>0?l.a.createElement("div",null,l.a.createElement("h3",null,"Latest"),this._renderStories()):l.a.createElement("h3",null,"No stories yet :("):l.a.createElement("h3",null,"Loading...")}},{key:"render",value:function(){return l.a.createElement("section",{className:"p-story-list"},this.showStory())}}]),a}(l.a.Component),Ee=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={toggleTabs:"profile"},e}return Object(g.a)(a,[{key:"_renderTabs",value:function(){if("profile"===this.state.toggleTabs)return l.a.createElement(fe,{blogger:this.props.blogger})}},{key:"render",value:function(){return l.a.createElement("div",{className:"user-state"},l.a.createElement("nav",null,l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",{className:"active"},l.a.createElement("button",{className:"mjl-btn"},"Profile")))),l.a.createElement("div",null,this._renderTabs()))}}]),a}(l.a.Component),ve=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={error:!1,loading:!0,blogger:null,paramUsername:null},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({paramUsername:this.props.match.params.username},(function(){e.getBlogger(e.state.paramUsername)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({error:!1}),this.setState({paramUsername:e.match.params.username},(function(){t.getBlogger(t.state.paramUsername)}))}},{key:"getBlogger",value:function(e){var t=this;(function(e){return w.a.get(j.SERVER_URL+"api/user/get-user/"+e)})(e).then((function(e){e.data.error?t.setState({error:!0}):t.setState({blogger:e.data}),t.setState({loading:!1})}))}},{key:"renderEditLink",value:function(){if(this.state.paramUsername===this.props.username)return l.a.createElement("div",null,l.a.createElement(v.a,{className:"p-edit-btn mjl-btn btn--d-hollow",to:"/profile/edit"},"Edit Profile"))}},{key:"renderProfileImage",value:function(){if(this.state.blogger.profile_image){var e=new Date;return l.a.createElement("img",{className:"user--pp",src:this.state.blogger.profile_image+"?cache="+e.getTime(),alt:this.state.blogger.fullname})}var t=this.state.blogger.fullname.charAt(0);return l.a.createElement("div",{className:"user--pp"},t)}},{key:"render",value:function(){return this.state.loading?l.a.createElement("h1",null,"Loading..."):this.state.error?l.a.createElement("h1",null,"Page not found :("):l.a.createElement("div",null,l.a.createElement("section",{className:"container--sm"},l.a.createElement("div",{style:{marginBottom:"30px"},className:"d--flex flex-ai-fs flex-col-rev-sm blogger-panel"},l.a.createElement("div",{className:"full-width"},l.a.createElement("div",{className:"d--flex"},l.a.createElement("h1",null,this.state.blogger.fullname),this.renderEditLink()),l.a.createElement("div",null,l.a.createElement("p",{className:"textarea-u-b"},this.state.blogger.bio))),l.a.createElement("div",{className:"p-img-wrapper"},this.renderProfileImage())),l.a.createElement(Ee,{blogger:this.state.blogger})))}}]),a}(r.Component);var be=Object(m.b)((function(e){return e.auth.authenticated?{username:e.auth.authenticated.user.username}:{username:null}}),null)(ve),ye=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={bioCharCount:0},n}return Object(g.a)(a,[{key:"renderProfileImage",value:function(){if(this.props.userImageSrc)return l.a.createElement("img",{className:"user--pp",src:this.props.userImageSrc,alt:this.props.initialValues.fullname});if(this.props.initialValues.profile_image)return l.a.createElement("img",{className:"user--pp",src:this.props.initialValues.profile_image,alt:this.props.initialValues.fullname});var e=this.props.initialValues.fullname.charAt(0);return l.a.createElement("div",{className:"user--pp"},e)}},{key:"componentDidMount",value:function(){this.props.initialValues.bio&&this.setState({bioCharCount:this.props.initialValues.bio.length})}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleSubmit,n=t.submitting,r=t.invalid;return l.a.createElement("form",{onSubmit:a(this.props.onSubmit),encType:"multipart/form-data"},l.a.createElement("div",{className:"d--flex flex-ai-fs flex-col-rev-sm"},l.a.createElement("div",{className:"full-width"},l.a.createElement("div",{className:"d--flex"},l.a.createElement(U.a,{name:"fullname",component:"input",type:"input",className:"input-u-n",placeholder:"Enter your name",autoComplete:"off"})),l.a.createElement("div",null,l.a.createElement(U.a,{name:"bio",component:"textarea",type:"text",rows:"3",className:"textarea-u-b",placeholder:"Enter a short bio",maxLength:"160",onChange:function(t){e.setState({bioCharCount:t.target.value.length})}}),l.a.createElement("small",{style:{marginBottom:"30px",display:"block"},className:"text--muted"},this.state.bioCharCount,"/160"))),l.a.createElement("div",{className:"p-img-wrapper"},this.renderProfileImage(),l.a.createElement("label",{htmlFor:"updateUserImg",className:"input-p-label"},l.a.createElement("img",{style:{height:"100%",padding:"35px"},src:"/static/images/photo-camera.svg",alt:"Profile input"}),l.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.props.handleChange,id:"updateUserImg",accept:"image/x-png,image/gif,image/jpeg"})))),this.props.formSubmitting?l.a.createElement("div",{className:"lds-ellipsis",style:{marginTop:"-25px",marginLeft:"-6px"}},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)):l.a.createElement("div",null,l.a.createElement("button",{type:"submit",disabled:r||n,className:"mjl-btn btn--p-hollow"},"Save"),l.a.createElement(v.a,{style:{display:"inline-block",marginLeft:"8px"},className:"mjl-btn btn--d-hollow",to:"/@".concat(this.props.initialValues.username)},"Cancel")))}}]),a}(r.Component),Me=Object(d.d)(Object(R.a)({form:"updateProfileForm"}),I.a)(ye),Ne=a(17),je=a(96),Se=a.n(je),we=(a(148),function(e){var t={backgroundColor:e.modalBackgroundColor};return e.modalMaxWidth&&(t.maxWidth=e.modalMaxWidth),e.modalHeight&&(t.height=e.modalHeight),e.modalWidth&&(t.width=e.modalWidth),e.modalNoShadow&&(t.boxShadow="none"),l.a.createElement("div",{id:"modalWrapper"},l.a.createElement("div",{className:"modal--overlay",style:{backgroundColor:e.modalOverlayColor}}),l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-dialog",style:t},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-body"},e.displayCloseBtn&&l.a.createElement("svg",{className:"closeModal",width:"29",height:"29",onClick:e.closeModal},l.a.createElement("path",{d:"M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61",fillRule:"evenodd"})),l.a.createElement("div",{className:"modal-content-holder text-center"},e.children))))))}),Ce=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onSave=function(){var e=n.state.croppedImage;n.props.setUploadedImage(e)},n.closeModal=function(){n.props.closeModal()},n.onImageLoaded=function(e,t){n.imageRef=e;var a=n.state.crop;a.aspect&&a.height&&a.width?n.setState({crop:Object(Ne.a)({},a,{height:null})}):n.makeClientCrop(a,t)},n.onCropComplete=function(e,t){n.makeClientCrop(e,t)},n.onCropChange=function(e){n.setState({crop:e})},n.state={src:URL.createObjectURL(n.props.uploadedImage),crop:{aspect:1,width:120,height:120,x:0,y:0},croppedImage:null},n}return Object(g.a)(a,[{key:"makeClientCrop",value:function(){var e=Object(M.a)(y.a.mark((function e(t,a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,a,"newFile.jpeg");case 3:n=e.sent,this.setState({croppedImage:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((function(e,t){n.toBlob((function(t){t.name=a,e(t)}),"image/jpeg")}))}},{key:"render",value:function(){var e=this.state,t=e.crop,a=e.src;return l.a.createElement(we,{closeModal:this.closeModal,modalOverlayColor:"rgba(0,0,0,0.5)",modalBackgroundColor:"rgb(232, 243, 236)",displayCloseBtn:!1},l.a.createElement("p",null,"Create Profile Picture"),l.a.createElement("br",null),a&&l.a.createElement(Se.a,{src:a,crop:t,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange,keepSelection:!0}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{className:"mjl-btn btn--dark",onClick:this.onSave},"Looks Good !")," \xa0\xa0",l.a.createElement("button",{className:"mjl-btn btn--d-hollow",onClick:this.closeModal},"Nevermind"))}}]),a}(r.Component),ke=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleImageChange=function(e){if(e.target.files[0]){var t=e.target.files[0].type;"image"===t.split("/")[0]&&"svg+xml"!==t.split("/")[1]?n.setState({uploadedImage:e.target.files[0]},(function(){n.setState({triggerCropModal:!0})})):n.setState({inputErr:{message:"Please use image as your avatar.",status:!0}},(function(){setTimeout((function(){n.setState({inputErr:{status:!1,message:"Please use image as your avatar."}})}),3e3)}))}document.getElementById("updateUserImg").value=""},n.setUploadedImage=function(e){n.setState({uploadedImage:e,userImageSrc:URL.createObjectURL(e),triggerCropModal:!1})},n.closeModal=function(){document.getElementById("updateUserImg").value="",n.setState({userImageSrc:null,uploadedImage:null},(function(){n.setState({triggerCropModal:!1})}))},n.onSubmit=function(e){console.log(e),n.setState({formSubmitting:!0});var t=new FormData;return Object.keys(e).forEach((function(a){t.append(a,e[a])})),""===t.get("fullname")?(n.setState({inputErr:{message:"Please enter your name.",status:!0}},(function(){setTimeout((function(){n.setState({inputErr:{status:!1,message:"Please enter your name."}})}),3e3)})),!1):(t.append("uploaded_image",n.state.uploadedImage),n.props.updateBlogger(n.token,t,(function(){var t=j.BASE_URL+"/@"+e.username;window.location.href=t})))},n.state={error:!1,loading:!0,uploadedImage:null,triggerCropModal:!1,userImageSrc:null,inputErr:{status:!1,message:""},formSubmitting:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.token=localStorage.getItem("token"),this.props.fetchBlogger(this.props.authUsername,(function(t){t&&e.setState({error:!0}),e.setState({loading:!1})}))}},{key:"renderCropModal",value:function(){if(this.state.triggerCropModal)return l.a.createElement(Ce,{closeModal:this.closeModal,uploadedImage:this.state.uploadedImage,setUploadedImage:this.setUploadedImage})}},{key:"render",value:function(){if(this.state.loading)return l.a.createElement("h1",null,"Loading...");if(this.state.error)return l.a.createElement("h1",null,"Page not found :(");var e=this.state.inputErr.status?"bg--danger fixed--alert fixed--alert-active":"bg--danger fixed--alert";return l.a.createElement("div",null,l.a.createElement("section",{className:"container--sm"},l.a.createElement("p",{className:e},this.state.inputErr.message),l.a.createElement(Me,{onSubmit:this.onSubmit,initialValues:this.props.initialValues,handleChange:this.handleImageChange,userImageSrc:this.state.userImageSrc,formSubmitting:this.state.formSubmitting}),this.renderCropModal()))}}]),a}(r.Component);var xe=Object(m.b)((function(e){return e.auth.authenticated?{initialValues:e.blogger.info,authUsername:e.auth.authenticated.user.username}:{initialValues:e.blogger.info,authUsername:null}}),{fetchBlogger:function(e,t){return function(){var a=Object(M.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w.a.get("".concat(j.SERVER_URL,"api/user/get-user/").concat(e));case 3:if(!(r=a.sent).data.error){a.next=6;break}throw new Error("User Not Found");case 6:n({type:"GET_BLOGGER",payload:r.data}),t(!1),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),n({type:"GET_BLOGGER",payload:null}),t(!0);case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},updateBlogger:function(e,t,a){return function(){var n=Object(M.a)(y.a.mark((function n(r){var l;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l={authorization:e},n.next=3,w.a.put(j.SERVER_URL+"auth/api/user/edit",t,{headers:l});case 3:r({type:"UPDATE",payload:null}),a();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(me(ke)),Le=(a(149),a(97)),Ie=a.n(Le),Oe=(a(151),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleLinkChange=function(t){e.setState({link:t.target.value})},e.onLinkSubmit=function(t){t.preventDefault();var a=["http://","https://"],n=e.state.link;n.substr(0,a[0].length)===a[0]||n.substr(0,a[1].length)===a[1]||(n=a[0]+n),e.restoreSelection(e.state.currentSelection);var r=document.getSelection();document.execCommand("insertHTML",!1,'<a href="'+n+'" rel="noopener noreferrer" target="_blank">'+r+"</a>"),e.props.hideEditorBox()},e.state={showLinkInput:!1,link:"",currentSelection:null},e}return Object(g.a)(a,[{key:"saveSelection",value:function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}},{key:"restoreSelection",value:function(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()}},{key:"renderHyperLinkButton",value:function(){var e=this,t=document.getSelection().anchorNode;if(t.nodeValue)return"a"===t.parentNode.localName?l.a.createElement(Te,{cmd:"unlink",name:"unlink"}):l.a.createElement("button",{onClick:function(){var t=e.saveSelection();e.setState({showLinkInput:!0,currentSelection:t})},className:"btn-chromeless"},l.a.createElement("i",{className:"fa fa-link"}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"editorBox",style:{transform:"translate(".concat(this.props.clientX,"px, ").concat(this.props.clientY,"px)")}},this.state.showLinkInput?l.a.createElement("form",{onSubmit:this.onLinkSubmit,className:"input-e-l d--flex"},l.a.createElement("input",{type:"text",onChange:this.handleLinkChange,placeholder:"Type or paste your link"}),l.a.createElement("button",{type:"button",onClick:function(){e.setState({showLinkInput:!1,link:""})},className:"btn-chromeless"},"x")):l.a.createElement("div",{className:"action-btns"},l.a.createElement(Te,{cmd:"bold",name:"bold"}),l.a.createElement(Te,{cmd:"italic",name:"italic"}),l.a.createElement(Te,{cmd:"formatBlock",arg:"<h1>",name:"text"}),l.a.createElement(Te,{btnClass:"font-sm",cmd:"fontSize",arg:"2",name:"text"}),l.a.createElement(Te,{cmd:"formatBlock",arg:"<blockquote>",name:"quote"}),l.a.createElement(Te,{cmd:"insertHTML",arg:"\u200c<pre><div>\u200c",name:"code"}),l.a.createElement(Te,{cmd:"insertUnorderedList",name:"list"}),l.a.createElement(Te,{cmd:"backColor",arg:"#FFF176",name:"highlight"}),this.renderHyperLinkButton()))}}]),a}(l.a.Component));function Te(e){var t=e.btnClass?"btn-chromeless ".concat(e.btnClass):"btn-chromeless";return l.a.createElement("button",{type:"button",key:e.cmd,className:t,onMouseDown:function(t){t.preventDefault(),document.execCommand(e.cmd,!1,e.arg)}},l.a.createElement(De,{name:e.name}))}function De(e){switch(e.name){case"quote":return l.a.createElement("i",{className:"fa fa-quote-left"});case"code":return l.a.createElement("i",{className:"fa fa-code"});case"text":return l.a.createElement("i",{className:"fa fa-font"});case"bold":return l.a.createElement("i",{className:"fa fa-bold"});case"italic":return l.a.createElement("i",{className:"fa fa-italic"});case"highlight":return l.a.createElement("i",{className:"fa fa-i-cursor"});case"unlink":return l.a.createElement("i",{className:"fa fa-unlink"});case"list":return l.a.createElement("i",{className:"fa fa-list-ul"});default:return e.name}}var ze=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleFile=function(t){var a=t.target.files[0];if(a)if(function(e){if(e&&"image"===e.type.split("/")[0])return!0;return!1}(a))if(a.size<1e6){var n=new FormData;n.append("storyImage",a),e.props.imageIsUploading(),function(e,t,a){var n={authorization:t};return w.a.post(j.SERVER_URL+"auth/blog/action/upload-image/"+a,e,{headers:n})}(n,e.userToken,e.props.blogId).then((function(t){var a=t.data.story_image;e.restoreSelection(e.currentSelection),document.execCommand("insertHTML",!1,'<img src="'+a+'" class="img-responsive"/>'),e.props.imageUploadCompleted()}))}else e.setState({error:{status:!0,message:"Please use image less than 1 MB"}},(function(){setTimeout((function(){e.setState({error:{status:!1,message:"Please use image less than 1 MB"}})}),3e3)}));else e.setState({error:{status:!0,message:"Please upload image only"}},(function(){setTimeout((function(){e.setState({error:{status:!1,message:"Please upload image only"}})}),3e3)}))},e.handleInputBtnClick=function(){e.currentSelection=e.saveSelection(),document.getElementById("editorImgInput").click()},e.state={error:{status:!1,message:""}},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.userToken=localStorage.getItem("token")}},{key:"saveSelection",value:function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}},{key:"restoreSelection",value:function(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()}},{key:"__render",value:function(){var e=document.getElementById("storyBox"),t=document.body.clientWidth,a=e.clientWidth,n=(t-a)/2+a;return this.props.imageUploadStatus?l.a.createElement("div",{id:"floatSpinner",className:"mjl-lds-circle",style:{transform:"translate(".concat(n,"px, ",0,")")}},l.a.createElement("div",null)):l.a.createElement("div",{id:"editorFloatBar",style:{transform:"translate(".concat(n,"px, ",0,")")}},l.a.createElement("button",{id:"floatImgInputBtn",onClick:this.handleInputBtnClick,className:"edit-float-btn btn-chromeless"},l.a.createElement("svg",{className:"svgIcon-use",width:"25",height:"25"},l.a.createElement("g",{fillRule:"evenodd"},l.a.createElement("path",{d:"M4.042 17.05V8.857c0-1.088.842-1.85 1.935-1.85H8.43C8.867 6.262 9.243 5 9.6 5.01L15.405 5c.303 0 .755 1.322 1.177 2 0 .077 2.493 0 2.493 0 1.094 0 1.967.763 1.967 1.85v8.194c-.002 1.09-.873 1.943-1.967 1.943H5.977c-1.093.007-1.935-.85-1.935-1.937zm2.173-9.046c-.626 0-1.173.547-1.173 1.173v7.686c0 .625.547 1.146 1.173 1.146h12.683c.625 0 1.144-.53 1.144-1.15V9.173c0-.626-.52-1.173-1.144-1.173h-3.025c-.24-.63-.73-1.92-.873-2 0 0-5.052.006-5 0-.212.106-.87 2-.87 2l-2.915.003z"}),l.a.createElement("path",{d:"M12.484 15.977a3.474 3.474 0 0 1-3.488-3.49A3.473 3.473 0 0 1 12.484 9a3.474 3.474 0 0 1 3.488 3.488c0 1.94-1.55 3.49-3.488 3.49zm0-6.08c-1.407 0-2.59 1.183-2.59 2.59 0 1.408 1.183 2.593 2.59 2.593 1.407 0 2.59-1.185 2.59-2.592 0-1.406-1.183-2.592-2.59-2.592z"}))),l.a.createElement("input",{id:"editorImgInput",style:{display:"none"},type:"file",onChange:this.handleFile,accept:"image/png,image/jpeg"})))}},{key:"render",value:function(){var e=this.state.error.status?"bg--danger fixed--alert fixed--alert-active":"bg--danger fixed--alert";return l.a.createElement("div",null,l.a.createElement("p",{className:e},this.state.error.message),this.__render())}}]),a}(r.Component),Ae=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).hideEditorBox=function(t){var a=document.getElementById("editorBox");a&&!a.contains(t.srcElement)&&setTimeout((function(){e.setState({showEditorBox:null},(function(){document.removeEventListener("click",e.hideEditorBox,!0)}))}),100)},e.instantHideEditBox=function(){e.setState({showEditorBox:null})},e.onTextSelection=function(t){var a=window.getSelection();a&&""!==a.toString()&&e.setState({showEditorBox:{clientX:t.pageX,clientY:t.pageY}},(function(){setTimeout((function(){document.addEventListener("click",e.hideEditorBox,!0)}),100)}))},e.handleFloatingBar=function(t){var a=document.getElementById("storyBox"),n=document.getElementById("editorFloatBar");a&&a.contains(t.target)?e.setState({showFloatingButton:!0}):n&&n.contains(t.target)||e.setState({showFloatingButton:!1})},e.imageIsUploading=function(){e.setState({imageIsUploading:!0})},e.imageUploadCompleted=function(){e.setState({imageIsUploading:!1})},e.state={showEditorBox:null,showFloatingButton:!1,imageIsUploading:!1},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleFloatingBar,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleFloatingBar,!0),document.removeEventListener("click",this.hideEditorBox,!0)}},{key:"renderPostPlaceHolder",value:function(){if(""===this.props.blog.draft)return l.a.createElement("span",{style:{position:"absolute",top:"-5px",left:0,fontSize:"22px",zIndex:-1},className:"text--muted"},"Tell us your story...")}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("input",{className:"input-story-t",type:"text",placeholder:"Title",value:this.props.blog.title_draft,onChange:this.props.handleTitleChange}),l.a.createElement("div",{style:{position:"relative"}},this.renderPostPlaceHolder(),l.a.createElement(Ie.a,{id:"storyBox",className:"input-story-p",innerRef:this.contentEditable,html:this.props.blog.draft,disabled:!1,onMouseUp:this.onTextSelection,onChange:this.props.handlePostChange}),this.props.blog.id&&this.state.showFloatingButton&&l.a.createElement(ze,{blogId:this.props.blog.id,imageUploadStatus:this.state.imageIsUploading,imageIsUploading:this.imageIsUploading,imageUploadCompleted:this.imageUploadCompleted})),this.state.showEditorBox&&l.a.createElement(Oe,{hideEditorBox:this.instantHideEditBox,clientX:this.state.showEditorBox.clientX,clientY:this.state.showEditorBox.clientY}))}}]),a}(l.a.Component),Ue=(a(86),a(100));function Re(e,t){var a={authorization:t};return w.a.get(j.SERVER_URL+"auth/blog/action/get/"+e,{headers:a})}function _e(e,t){var a={authorization:e};return w.a.get(j.SERVER_URL+"auth/api/user/blogs/"+t,{headers:a})}var Be=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).onCancel=function(){e.handleImageDelete()},e.state={image:null,dropHovered:!1,imageFilePreview:null,disableDropzone:!1,error:{show:!1,message:""},showImageUploading:!1},e.onDrop=e.onDrop.bind(Object(A.a)(e)),e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.token=localStorage.getItem("token"),Re(this.props.blogId,this.token).then((function(t){var a=t.data.blog.blogThumbnails;if(a.length>0){var n=a[0].story_thumb;e.setState({imageFilePreview:n+"?"+Date.now(),disableDropzone:!0})}}))}},{key:"onDrop",value:function(e,t){var a=this;this.setState({dropHovered:!1}),t.length>0?this.setState({error:{show:!0,message:"Please upload a single image file."}},(function(){setTimeout((function(){a.setState({error:Object(Ne.a)({},a.state.error,{show:!1})})}),3e3)})):e[0].size<1e6?this.handleImageUpload(e[0]):this.setState({error:{show:!0,message:"Please use image less than 1 MB"}},(function(){setTimeout((function(){a.setState({error:Object(Ne.a)({},a.state.error,{show:!1})})}),3e3)}))}},{key:"handleImageUpload",value:function(e){var t=this,a=new FormData;a.append("storyImage",e),this.setState({showImageUploading:!0}),function(e,t,a){var n={authorization:t};return w.a.post(j.SERVER_URL+"auth/blog/action/upload-thumbnail/"+a,e,{headers:n})}(a,this.token,this.props.blogId).then((function(e){t.setState({imageFilePreview:e.data[0].story_thumb,disableDropzone:!0,showImageUploading:!1})}))}},{key:"handleImageDelete",value:function(){!function(e,t){var a={authorization:e};w.a.delete(j.SERVER_URL+"auth/blog/action/remove-thumbnail/"+t,{headers:a})}(this.token,this.props.blogId),this.setState({imageFilePreview:null,disableDropzone:!1})}},{key:"render",value:function(){var e=this,t=this.state.dropHovered?"border-p-color p-modal-image-drop":"p-modal-image-drop",a=this.state.error.show?"bg--danger fixed--alert fixed--alert-active":"bg--danger fixed--alert";return l.a.createElement("div",null,l.a.createElement("p",{className:a},this.state.error.message),l.a.createElement("h2",null,"Story Thumbnail"),l.a.createElement("p",null,"Setup a thumbnail picture that goes well with your story."),l.a.createElement(Ue.a,{accept:"image/png,image/jpeg",onDrop:this.onDrop,multiple:!1,disabled:this.state.disableDropzone,onDragEnter:function(){e.setState({dropHovered:!0})},onDragLeave:function(){e.setState({dropHovered:!1})}},(function(a){var n=a.getRootProps,r=a.getInputProps;return l.a.createElement("div",Object.assign({},n(),{className:t}),l.a.createElement("input",r()),e.state.imageFilePreview?l.a.createElement("div",{className:"thumb-wrapper"},l.a.createElement("button",{className:"thumb-del-btn btn-chromeless",onClick:e.onCancel},l.a.createElement("span",null,"x")),l.a.createElement("img",{src:e.state.imageFilePreview,className:"thumbnail-img",alt:"story-thumbnail"})):e.state.showImageUploading?l.a.createElement("span",{className:"drop-caption"},"Image uploading Please wait..."):l.a.createElement("span",{className:"drop-caption"},e.state.dropHovered?"Drop your thumbnail.":"Include a high-quality image in your story to make it more inviting to readers."))})))}}]),a}(l.a.Component);var Pe=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleTagAdd=function(t){var a=new FormData;a.append("tag",t),function(e,t,a){var n={authorization:t};return w.a.post(j.SERVER_URL+"auth/blog/action/publish/add-tag/"+a,e,{headers:n})}(a,e.token,e.blogId).then((function(t){e.setState({tags:t.data})}))},e.handleTagRemove=function(t){(function(e,t,a){var n={authorization:t};return w.a.delete(j.SERVER_URL+"auth/blog/action/publish/remove-tag/".concat(a,"/").concat(e),{headers:n})})(t,e.token,e.blogId).then((function(t){e.setState({tags:t.data})}))},e.handleChange=function(t){e.setState({inputText:t.target.value},(function(){var t=e.state.inputText;if(-1!==t.indexOf(",")){var a=t.split(",")[0];""!==a&&(e.handleTagAdd(a),e.setState({inputText:""}))}}))},e.onSubmit=function(t){t.preventDefault(),""!==e.state.inputText&&(e.handleTagAdd(e.state.inputText),e.setState({inputText:""}))},e.state={tags:[],inputText:""},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.blogId=this.props.blogId,this.token=localStorage.getItem("token"),function(e,t){var a={authorization:e};return w.a.get(j.SERVER_URL+"auth/blog/action/publish/get-tag/"+t,{headers:a})}(this.token,this.blogId).then((function(t){e.setState({tags:t.data})}))}},{key:"renderTags",value:function(){var e=this;return this.state.tags.map((function(t,a){return l.a.createElement("div",{className:"tag-elem",key:a},t.tag,l.a.createElement("button",{className:"btn-chromeless",onClick:function(){e.handleTagRemove(t.id)}},"x"))}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"handleTags"},l.a.createElement("h2",null,"Prepare your story for readers"),l.a.createElement("p",null,"Add or change tags (up to 5) so readers know what your story is about"),l.a.createElement("p",null,"Review Threadly\u2019s ",l.a.createElement("a",{target:"_blank",href:"/threadly/policy",style:{textDecoration:"underline"}},"rules")," to ensure that your story meets our community standards."),l.a.createElement("br",null),l.a.createElement("div",{className:"p-add-tags"},l.a.createElement("div",{className:"tags-wrapper",style:{display:"inline-block"}},this.renderTags()),l.a.createElement("div",{className:"c-input-wrap"},this.state.tags.length<5&&l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("input",{value:this.state.inputText,onChange:this.handleChange,placeholder:"Add a tag...",id:"tagEditor",autoComplete:"off"})))))}}]),a}(l.a.Component),Ye=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleSubmit=function(){if(!e.state.formSubmitted){var t=e.props.blogId;e.setState({formSubmitted:!0},(function(){e._render()})),function(e,t){var a={authorization:e};return w.a.post(j.SERVER_URL+"auth/blog/action/publish/"+t,null,{headers:a})}(localStorage.getItem("token"),t).then((function(a){var n=j.BASE_URL+"/@"+e.props.username+"/"+t;window.location.href=n}))}},e.handleImageChange=function(t){e.setState({image:t},(function(){e._render()}))},e.state={formSubmitted:!1},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.modalTarget=document.createElement("div"),document.body.appendChild(this.modalTarget),this._render()}},{key:"componentWillUnmount",value:function(){s.a.unmountComponentAtNode(this.modalTarget),document.body.removeChild(this.modalTarget)}},{key:"createModal",value:function(){return l.a.createElement(we,{modalBackgroundColor:"#fff",modalOverlayColor:"#fff",modalMaxWidth:"1040px",modalHeight:"100%",modalWidth:"100%",modalNoShadow:!0,displayCloseBtn:!0,closeModal:this.props.closeModal},l.a.createElement("section",{className:"publish-modal-s"},l.a.createElement("div",{className:"d--flex d--flex-row-md flex-sb p--row",style:{marginTop:"35px"}},l.a.createElement("div",{className:"text--left"},l.a.createElement(Be,{blogId:this.props.blogId})),l.a.createElement("div",{className:"text--left"},l.a.createElement(Pe,{blogId:this.props.blogId}),l.a.createElement("br",null),this.state.formSubmitted?l.a.createElement("div",{className:"lds-ellipsis",style:{marginTop:"-25px",marginLeft:"-6px"}},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)):l.a.createElement("button",{onClick:this.handleSubmit,className:"mjl-btn btn--primary"},"Publish Now")))))}},{key:"_render",value:function(){s.a.render(l.a.createElement(m.a,{store:at},l.a.createElement(i.a,{history:tt},this.createModal())),this.modalTarget)}},{key:"render",value:function(){return l.a.createElement("noscript",null)}}]),a}(l.a.Component);var Ve=Object(m.b)((function(e){return{username:e.auth.authenticated.user.username}}),null)(Ye),Ge=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handlePublishClick=function(){""===n.props.blog.title||""===n.props.blog.draft?n.setState({noStoryError:!0},(function(){setTimeout((function(){n.setState({noStoryError:!1})}),3e3)})):n.setState({displayModal:!0})},n.closeModal=function(){n.setState({displayModal:!1})},n.state={noStoryError:!1,displayModal:!1},n}return Object(g.a)(a,[{key:"renderSavingState",value:function(){return"saving"===this.props.savingState?l.a.createElement("span",null,"Saving"):"saved"===this.props.savingState?l.a.createElement("span",null,"Saved"):void 0}},{key:"renderNoStoryError",value:function(){if(this.state.noStoryError)return l.a.createElement("div",{id:"noStoryError"},l.a.createElement("p",null,"Publishing will become available once you add title and story."))}},{key:"renderModal",value:function(){if(this.state.displayModal)return l.a.createElement(Ve,{blogId:this.props.blog.id,closeModal:this.closeModal})}},{key:"render",value:function(){return l.a.createElement("div",{className:"d--flex flex-sb",style:{alignItems:"flex-end"}},l.a.createElement("div",{className:"text--muted"},this.renderSavingState()),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("button",{onClick:this.handlePublishClick,className:"mjl-btn-sm mjl-btn btn--p-hollow"},"Ready To Publish?"),this.renderNoStoryError()),this.state.displayModal&&this.renderModal())}}]),a}(l.a.Component),We=me(function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleTitleChange=function(e){n.setState({blog:Object(Ne.a)({},n.state.blog,{title_draft:e.target.value})},n.saveBlog())},n.handlePostChange=function(e){n.setState({blog:Object(Ne.a)({},n.state.blog,{draft:e.target.value})},n.saveBlog())},n.saveBlog=function(){n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout((function(){var e=new FormData;e.append("title",n.state.blog.title_draft),e.append("post",n.state.blog.draft),e.append("postId",n.state.blog.id),n.setState({savingState:"saving"}),function(e,t){var a={authorization:t};return w.a.post(j.SERVER_URL+"auth/blog/create-blog",e,{headers:a})}(e,n.userToken).then((function(e){n.setState({savingState:"saved"},(function(){var t=e.data.postId;t&&n.setState({blog:Object(Ne.a)({},n.state.blog,{id:t})},(function(){n.props.history.push("/p/".concat(t,"/edit"))}))}))}))}),800)},n.state={blog:{id:null,title_draft:"",draft:""},savingState:"onhold",renderError:!1,loading:!0},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.timeout=0,this.userToken=localStorage.getItem("token");var e=this.props.match.params.postId;e?this.getPost(e):this.setState({loading:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({renderError:!1,loading:!0},(function(){if("/new-story"===e.match.path)t.setState({blog:{id:null,title_draft:"",draft:""},loading:!1});else{var a=t.props.match.params.postId;a&&t.getPost(a)}}))}},{key:"getPost",value:function(e){var t=this;Re(e,this.userToken).then((function(e){var a=e.data.blog;a?t.setState({blog:a,loading:!1}):t.setState({renderError:!0})}))}},{key:"render",value:function(){return this.state.renderError?l.a.createElement("h1",null,"Page not found :("):this.state.loading?l.a.createElement("h3",null,"Loading..."):l.a.createElement("section",{className:"container--sm"},l.a.createElement(Ge,{savingState:this.state.savingState,blog:this.state.blog}),l.a.createElement(Ae,{handlePostChange:this.handlePostChange,handleTitleChange:this.handleTitleChange,blog:this.state.blog}))}}]),a}(r.Component)),He=(a(152),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).createToolTipProps=function(e){var t=e.currentTarget.getAttribute("data-attr-id"),a=e.currentTarget.id;if(a){var r=document.getElementById(a),l=r.offsetLeft,o=r.offsetTop;n.setState({tooltip:{id:t,offsetLeft:l,offsetTop:o}})}},n.hideTooltip=function(){n.setState({tooltip:null})},n.handleStoryDelete=function(e){(function(e,t){var a={authorization:e};return w.a.delete(j.SERVER_URL+"auth/blog/action/delete/"+t,{headers:a})})(n.userToken,e).then((function(){n.fetchPosts()}))},n.state={blogs:null,showStories:null,tooltip:null},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({showStories:this.props.showStories},(function(){e.fetchPosts()}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({showStories:e.showStories,blogs:null},(function(){t.fetchPosts()}))}},{key:"fetchPosts",value:function(){var e=Object(M.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userToken=localStorage.getItem("token"),t=[],a="drafts"!==this.state.showStories,e.next=5,_e(this.userToken,a).then((function(e){e.data.forEach((function(e){t.push(e)}))}));case 5:this.setState({blogs:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderTooltip",value:function(){var e={transform:"translate(".concat(this.state.tooltip.offsetLeft,"px, ").concat(this.state.tooltip.offsetTop,"px)")};return l.a.createElement("div",null,l.a.createElement("div",{id:"s-tooltipOverlay",onClick:this.hideTooltip}),l.a.createElement("ul",{className:"s-l-tooltip list-n-block",style:e},l.a.createElement("li",null,l.a.createElement(v.a,{to:"/p/".concat(this.state.tooltip.id,"/edit")},"Edit Story")),l.a.createElement(he,{className:"Helo",onMount:this.hideTooltip,actionId:this.state.tooltip.id,handleConfirm:this.handleStoryDelete,text:"Delete Story",msg:"Deleted stories are gone forever. Are you sure?"})))}},{key:"_renderBlogTitle",value:function(e){return"drafts"===this.state.showStories?l.a.createElement(v.a,{to:"/p/".concat(e.id,"/edit")},l.a.createElement("h3",null,e.title_draft.length>0?e.title_draft:"Untitled Story")):l.a.createElement(v.a,{to:"/@".concat(this.props.username,"/").concat(e.id)},l.a.createElement("h3",null,e.title_draft))}},{key:"renderPosts",value:function(){var e=this,t=this.state.blogs;if(t){if(t.length>0){var a=t.map((function(t){var a=function(e){var t=K()(e).format("YYYY-MM-DD HH:mm:ss");return K.a.utc(t).local().format("YY-MMM-DD hh:mm a")}(t.modified_at);return l.a.createElement("li",{className:"s-l-item",key:t.id},e._renderBlogTitle(t),l.a.createElement("div",{className:"d--flex"},l.a.createElement("p",{className:"s-l-taction"},"Last edited ",a),l.a.createElement("button",{className:"btn-chromeless",onClick:e.createToolTipProps,id:"sItemId".concat(t.id),"data-attr-id":t.id,style:{position:"relative"}},l.a.createElement("svg",{width:"21",height:"21",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M4 7.33L10.03 14l.5.55.5-.55 5.96-6.6-.98-.9-5.98 6.6h1L4.98 6.45z",fillRule:"evenodd"})))))}));return l.a.createElement("ul",{className:"list-n-block"},a)}return l.a.createElement("h3",{className:"user--msg"},"drafts"===this.state.showStories?"You haven't wrote any stories yet.":"You haven't published any public stories yet.")}return l.a.createElement("h3",{className:"user--msg"},"Loading...")}},{key:"render",value:function(){return l.a.createElement("div",null,this.renderPosts(),this.state.tooltip&&this.renderTooltip())}}]),a}(l.a.Component));var Ze=Object(m.b)((function(e){return{username:e.auth.authenticated.user.username}}),null)(He),Fe=me(function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={showStories:null,storyCount:{published:"",drafts:""}},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.token=localStorage.getItem("token"),function(e){var t={authorization:e};return w.a.get(j.SERVER_URL+"auth/blog/get/blog-count/",{headers:t})}(this.token).then((function(t){e.setState({storyCount:t.data})})),this.setState({showStories:this.props.match.params.id})}},{key:"renderNav",value:function(){return"drafts"===this.state.showStories?l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",{className:"active"},l.a.createElement(v.a,{to:"/me/stories/drafts"},"Drafts ",this.state.storyCount.drafts)),l.a.createElement("li",null,l.a.createElement(v.a,{to:"/me/stories/published"},"Published ",this.state.storyCount.published))):l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(v.a,{to:"/me/stories/drafts"},"Drafts ",this.state.storyCount.drafts)),l.a.createElement("li",{className:"active"},l.a.createElement(v.a,{to:"/me/stories/published"},"Published ",this.state.storyCount.published)))}},{key:"componentWillReceiveProps",value:function(e){this.setState({showStories:e.match.params.id})}},{key:"render",value:function(){return this.state.showStories?l.a.createElement("section",null,l.a.createElement("div",{className:"d--flex flex-sb flex-ai-cn flex-fw",style:{marginBottom:"30px"}},l.a.createElement("h1",{className:"title--lg"},"Your Stories"),l.a.createElement(v.a,{to:"/new-story",className:"mjl-btn btn--p-hollow"},"Write Story")),l.a.createElement("nav",{className:"s-nav"},this.renderNav()),l.a.createElement("div",null,l.a.createElement(Ze,{showStories:this.state.showStories}))):l.a.createElement("h3",null,"Loading...")}}]),a}(l.a.Component)),Qe=(a(153),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).renderStory=function(){var t=document.getElementById("storyBox");t&&(t.innerHTML=e.state.story.story)},e.state={story:null,loading:!0},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;q(this.props.match.params.storyId).then((function(t){var a=t.data.blog;e.setState({story:a,loading:!1},e.renderStory)}))}},{key:"renderProfileImage",value:function(){if(this.state.story.blogger.profile_image)return l.a.createElement(v.a,{to:"/@".concat(this.state.story.blogger.username)},l.a.createElement("img",{src:this.state.story.blogger.profile_image,alt:this.state.story.blogger.fullname}));var e=this.state.story.blogger.fullname.charAt(0);return l.a.createElement(v.a,{to:"/@".concat(this.state.story.blogger.username)},l.a.createElement("div",{className:"usr-p-image"},l.a.createElement("span",null,e)))}},{key:"renderHeaderImage",value:function(){var e=this.state.story.blogThumbnails;if(e.length>0){var t=e[0].story_thumb;return l.a.createElement("div",{className:"r-h-img",style:{background:"url(".concat(t,")")}})}}},{key:"render",value:function(){if(this.state.loading)return l.a.createElement("h3",null,"Loading...");if(this.state.story){var e=J(this.state.story.created_at);return l.a.createElement("section",{id:"readStory",className:"container--sm"},l.a.createElement("h1",null,this.state.story.title),l.a.createElement("div",{className:"d--flex usr-content"},l.a.createElement("div",{className:"profile-img-wrap"},this.renderProfileImage()),l.a.createElement("div",{className:"usr-w"},l.a.createElement(v.a,{to:"/@".concat(this.state.story.blogger.username)},this.state.story.blogger.fullname),l.a.createElement("span",null,e))),this.renderHeaderImage(),l.a.createElement("article",{id:"storyBox"}),l.a.createElement("footer",null,l.a.createElement("div",{className:"d--flex"},l.a.createElement("div",{className:"f-profile-img"},this.renderProfileImage()),l.a.createElement("div",{className:"f-usr-content"},l.a.createElement("h3",null,l.a.createElement(v.a,{to:"/@".concat(this.state.story.blogger.username)},this.state.story.blogger.fullname)),l.a.createElement("p",null,this.state.story.blogger.bio)))))}return l.a.createElement("h3",null,"Page not found :(")}}]),a}(l.a.Component)),Ke=a(162),Je={authenticated:null},qe={info:null},Xe={openModal:!1},$e=Object(d.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":case"AUTH_ERROR":return Object(Ne.a)({},e,{authenticated:t.payload});default:return e}},form:Ke.a,blogger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BLOGGER":return Object(Ne.a)({},e,{info:t.payload});default:return e}},loginModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_LOGIN_MODAL":return Object(Ne.a)({},e,{openModal:!0});case"CLOSE_LOGIN_MODAL":return Object(Ne.a)({},e,{openModal:!1});default:return e}}}),et=a(99),tt=a.n(et)()(),at=Object(d.e)($e,{},Object(d.a)(h.a));s.a.render(l.a.createElement(m.a,{store:at},l.a.createElement(i.a,{history:tt},l.a.createElement(Z,null,l.a.createElement(c.a,null,l.a.createElement(u.a,{exact:!0,path:"/",component:ne}),l.a.createElement(u.a,{exact:!0,path:"/about",component:ce}),l.a.createElement(u.a,{exact:!0,path:"/topics",component:function(){return l.a.createElement("section",null,l.a.createElement("h3",null,"All Topics in progress..."))}}),l.a.createElement(u.a,{exact:!0,path:"/topic/:topic",component:re}),l.a.createElement(u.a,{exact:!0,path:"/search",component:ie}),l.a.createElement(u.a,{exact:!0,path:"/search/users",component:ie}),l.a.createElement(u.a,{exact:!0,path:"/@:username/:storyId",component:Qe}),l.a.createElement(u.a,{exact:!0,path:"/new-story",component:We}),l.a.createElement(u.a,{exact:!0,path:"/p/:postId/edit",component:We}),l.a.createElement(u.a,{exact:!0,path:"/me/stories/:id",component:Fe}),l.a.createElement(u.a,{exact:!0,path:"/me/settings",component:ge}),l.a.createElement(u.a,{exact:!0,path:"/@:username",component:be}),l.a.createElement(u.a,{exact:!0,path:"/profile/edit",component:xe}),l.a.createElement(u.a,{render:function(){return l.a.createElement("h1",null,"Page Not Found :(")}}))))),document.getElementById("root"))},81:function(e,t,a){},82:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.35c2c14e.chunk.js.map