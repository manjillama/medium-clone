{"version":3,"sources":["config.js","actions/index.js","actions/types.js","components/site/includes/Notification.js","components/site/includes/Header.js","actions/loginModal.js","components/forms/SignInForm.js","components/forms/SignUpForm.js","components/modals/LoginModal.js","components/App.js","components/site/includes/CategoryNav.js","services/utils.js","services/storyService.js","components/site/topic/FeaturedAd/FeaturedStory.js","components/site/topic/StoryList.js","components/site/Home.js","components/site/topic/Topic.js","components/site/search/Stories.js","components/site/search/People.js","components/site/search/Search.js","services/searchService.js","components/site/about/About.js","components/404.js","components/requireAuth.js","components/site/utils/ConfirmBox.js","components/site/users/settings/Settings.js","services/usernameService.js","components/site/users/profile/includes/PublishedStoryList.js","components/site/users/profile/includes/UserState.js","components/site/users/profile/Profile.js","services/bloggerService.js","components/site/users/profile/ProfileEditForm.js","components/modals/Modal.js","components/site/utils/ImageCropper.js","components/site/users/profile/ProfileEdit.js","actions/blogger.js","components/site/users/story/writeStory/editorBox/EditorActionBox.js","components/site/utils/validateImage.js","components/site/users/story/writeStory/editorBox/FloatingButton.js","services/blogImageService.js","components/site/users/story/writeStory/StoryForm.js","services/blogService.js","components/site/users/story/writeStory/publishStory/HandleThumbnail.js","components/site/users/story/writeStory/publishStory/HandleTags.js","services/blogTagService.js","components/site/users/story/writeStory/publishStory/PublishModal.js","components/site/users/story/writeStory/publishStory/StoryPublish.js","components/site/users/story/writeStory/WriteStory.js","components/site/users/story/UserStories.js","components/site/users/story/Stories.js","components/site/ReadStory.js","reducers/auth.js","reducers/blogger.js","reducers/loginModal.js","reducers/index.js","index.js","components/site/topic/AllTopics.js"],"names":["SERVER_URL","process","REACT_APP_ENV","BASE_URL","window","location","protocol","hostname","port","signUp","formProps","callback","dispatch","a","axios","post","config","response","data","error","Error","type","payload","localStorage","setItem","token","message","signIn","getUser","headers","get","user","removeItem","signOut","Notification","handleBlur","e","node","document","getElementById","userBtn","links","getElementsByTagName","contains","target","setTimeout","props","hideNotificationbar","addEventListener","this","removeEventListener","className","id","React","Component","Header","toggleUserDropdown","setState","showUserDropdown","state","hideUserDropDown","toggleNotificationBar","showNotication","hideNotificationBar","history","push","openModal","auth","profile_image","src","alt","fullname","initial","charAt","style","position","onClick","width","height","viewBox","d","_renderUserImage","triggerSignInModal","bind","Link","to","renderLinks","withRouter","connect","authenticated","UserProfileDropDown","username","cursor","SignInForm","onSubmit","addErrorClass","closeModal","field","meta","lblClass","touched","inputErr","label","autoComplete","input","handleSubmit","submitting","invalid","Field","name","component","renderField","display","marginTop","__renderSigninError","disabled","compose","actions","reduxForm","validate","values","errors","email","password","form","value","test","undefined","SignUpForm","__renderSignUpError","LoginModal","modalContent","getElementsByClassName","signInModal","toggleContent","modalTarget","createElement","body","appendChild","_render","ReactDOM","unmountComponentAtNode","removeChild","background","backgroundColor","fillRule","toggleModalContent","render","store","Router","createModal","App","renderApp","userToken","getItem","children","_renderModal","loginModal","CategoryNav","href","utcToLocalMin","utcDate","utc","moment","format","local","fetchStory","storyId","FeaturedStory","featuredStory","nextProps","topic","then","res","blog","story","storyCreationDate","created_at","backgroundImgStyle","blogThumbnails","length","backgroundImage","story_thumb","blogger","title","story_summary","stories","map","key","__renderStoryThumb","distanceFromTop","top","StoryAd","marginRight","rel","Home","Topic","logoNode","match","params","parentNode","text","toUpperCase","substr","__capitalizeFirstChar","textnode","createTextNode","__displayTopicTitle","margin","_renderProfileImage","bio","story_thumbnail","renderInnerStories","people","person","queryString","require","Search","onSearch","query","timeout","clearTimeout","fetchSearchData","pathname","_searchInitializer","search","qString","parse","q","fetchStories","fetchPeople","url","People","storyLink","userLink","placeholder","onChange","_renderTabs","__renderContent","Contact","ChildComponent","ComposedComponent","ConfirmBox","submit","onMount","confirmAlert","customUI","onClose","marginBottom","msg","handleConfirm","actionId","marginLeft","Settings","onInputChange","userExist","searchUsernameAvaibility","errorMsg","successMsg","usernameRegex","formData","FormData","append","checkAvaiblity","usernameExist","onCancel","editMode","changeUsername","redirectTo","maxLength","_renderErrorMsg","_renderBtn","requireAuth","PublishedStoryList","bloggerId","_renderStories","showStory","UserState","toggleTabs","Profile","loading","paramUsername","getBlogger","fetchBlogger","Date","getTime","renderEditLink","renderProfileImage","ProfileEditForm","bioCharCount","userImageSrc","initialValues","encType","rows","htmlFor","padding","handleChange","accept","formSubmitting","Modal","modalStyles","modalBackgroundColor","modalMaxWidth","maxWidth","modalHeight","modalWidth","modalNoShadow","boxShadow","modalOverlayColor","displayCloseBtn","ImageCropper","onSave","croppedImage","setUploadedImage","onImageLoaded","image","pixelCrop","imageRef","crop","aspect","makeClientCrop","onCropComplete","onCropChange","URL","createObjectURL","uploadedImage","x","y","getCroppedImg","fileName","canvas","getContext","drawImage","Promise","resolve","reject","toBlob","blob","onComplete","keepSelection","ProfileEdit","handleImageChange","files","mimeType","split","triggerCropModal","status","console","log","Object","keys","forEach","updateBlogger","authUsername","errorAlertClass","renderCropModal","info","put","EditorActionBox","handleLinkChange","link","onLinkSubmit","preventDefault","prefix","restoreSelection","currentSelection","sText","getSelection","execCommand","hideEditorBox","showLinkInput","sel","getRangeAt","rangeCount","selection","createRange","range","removeAllRanges","addRange","select","selectionNode","anchorNode","nodeValue","localName","EditButton","cmd","saveSelection","transform","clientX","clientY","arg","btnClass","renderHyperLinkButton","onMouseDown","evt","RenderEditorBtntext","FloatingBar","handleFile","validateImage","size","imageIsUploading","blogId","uploadStoryImage","story_image","imageUploadCompleted","handleInputBtnClick","click","editor","documentWidth","clientWidth","editorWidth","floatX","imageUploadStatus","__render","StoryForm","srcElement","showEditorBox","instantHideEditBox","onTextSelection","selectedText","toString","pageX","pageY","handleFloatingBar","floatingBar","showFloatingButton","draft","left","fontSize","zIndex","title_draft","handleTitleChange","renderPostPlaceHolder","innerRef","contentEditable","html","onMouseUp","handlePostChange","fetchPost","getUserPost","HandleThumbnail","handleImageDelete","dropHovered","imageFilePreview","disableDropzone","show","showImageUploading","onDrop","now","acceptedFile","rejectedFile","handleImageUpload","delete","removeStoryImage","dropZoneClass","multiple","onDragEnter","onDragLeave","getRootProps","getInputProps","HandleTags","handleTagAdd","tag","addBlogTag","tags","handleTagRemove","tagId","removeBlogTag","inputText","val","indexOf","getBlogTag","tagObj","index","textDecoration","renderTags","PublishModal","formSubmitted","publishPost","StoryPublish","handlePublishClick","noStoryError","displayModal","savingState","alignItems","renderSavingState","renderNoStoryError","renderModal","saveBlog","writePost","postId","renderError","getPost","path","UserStories","createToolTipProps","currentTarget","getAttribute","btn","offsetLeft","offsetTop","tooltip","hideTooltip","handleStoryDelete","deleteStory","fetchPosts","blogs","showStories","styles","listItems","timeStamp","utcToLocal","modified_at","_renderBlogTitle","data-attr-id","xmlns","renderPosts","renderTooltip","storyCount","published","drafts","getUserStoriesCount","renderNav","ReadStory","renderStory","article","innerHTML","storyImages","headerImage","renderHeaderImage","INITIAL_STATE","combineReducers","action","formReducer","createBrowserHistory","createStore","reducers","applyMiddleware","reduxThunk","Switch","Route","exact","About","WriteStory","Stories"],"mappings":"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","file":"static/js/main.040e2676.chunk.js","sourcesContent":["let SERVER_URL = \"/\";\n\nif (process.env.REACT_APP_ENV === \"dev\") SERVER_URL = \"http://localhost:5000/\";\n\nexport default {\n  BASE_URL:\n    window.location.protocol +\n    \"//\" +\n    window.location.hostname +\n    \":\" +\n    window.location.port,\n  SERVER_URL\n};\n","import { AUTH_USER, AUTH_ERROR } from './types';\nimport config from 'config';\nimport axios from 'axios';\n\nexport const signUp = (formProps, callback) => async dispatch => {\n  try{\n    const response = await axios.post(config.SERVER_URL+'signup', formProps);\n    if(response.data.error)\n      throw new Error('Email already taken');\n\n    dispatch({type: AUTH_USER, payload: response.data});\n    // Persisting login state, so that authentication is not lost when refreshing the page.\n    localStorage.setItem('token', response.data.token);\n    callback(false);\n  }catch(e){\n    dispatch({type: AUTH_ERROR, payload: null});\n    callback(e.message);\n  }\n};\n\n\nexport const signIn = (formProps, callback) => async dispatch => {\n  try{\n    const response = await axios.post(config.SERVER_URL+'signin', formProps);\n    if(response.data.error)\n      throw new Error('Incorrect username or password');\n\n    dispatch({type: AUTH_USER, payload: response.data});\n\n    // Persisting login state, so that authentication is not lost when refreshing the page.\n    localStorage.setItem('token', response.data.token);\n    callback(false);\n  }catch(e){\n    dispatch({type: AUTH_ERROR, payload: null});\n    callback(e.message);\n  }\n};\n\nexport const getUser = (token, callback) => async dispatch => {\n  try{\n    const headers = {'authorization': token};\n    const response = await axios.get(config.SERVER_URL+'auth/api/user/get-user', { headers })\n    const payload = {token, user: response.data.user};\n    dispatch({type: AUTH_USER, payload});\n  }catch(e){\n    if(e.message !== \"Network Error\")\n      localStorage.removeItem('token');\n\n    dispatch({type: AUTH_ERROR, payload: null});\n  }finally{\n    callback();\n  }\n};\n\nexport const signOut = (callback) => dispatch => {\n  localStorage.removeItem('token');\n  dispatch({type: AUTH_USER, payload:null});\n  callback();\n}\n","export const AUTH_USER = 'AUTH_USER';\nexport const AUTH_ERROR = 'AUTH_ERROR';\nexport const GET_BLOGGER = 'GET_BLOGGER';\nexport const ERROR = 'ERROR';\nexport const OPEN_L_MODAL = 'OPEN_LOGIN_MODAL';\nexport const CLOSE_L_MODAL = 'CLOSE_LOGIN_MODAL';\n","import React from 'react'\n\nexport default class Notification extends React.Component{\n  componentDidMount(){\n    document.addEventListener('click', this.handleBlur, true);\n  }\n\n  componentWillUnmount(){\n    document.removeEventListener('click', this.handleBlur, true);\n  }\n\n  handleBlur = (e) => {\n    let node = document.getElementById('pNotificationPanel');\n    let userBtn = document.getElementById('popNotificationPanel');\n    let links = node.getElementsByTagName(\"ul\");\n    if(node){\n      // If user clicks outside the dropdown menu\n      if(!node.contains(e.target) && !userBtn.contains(e.target)){\n        this.props.hideNotificationbar();\n      }else{\n        /*\n        * If links are clicked\n        * setTimeout is so that dropdown gets unvisible only after link is clicked\n        */\n        if(links[0].contains(e.target)){\n          setTimeout(()=>{\n            this.props.hideNotificationbar();\n          }, 100);\n        }\n      }\n    }\n  }\n\n  render(){\n    return(\n      <div className=\"popover-userAction usr-n\" id=\"pNotificationPanel\">\n        <ul>\n          <li>No new notifications</li>\n        </ul>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { signOut } from 'actions';\nimport './Header.css';\nimport { withRouter } from 'react-router-dom';\nimport { openModal } from 'actions/loginModal';\nimport Notification from './Notification';\n\nclass Header extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      showUserDropdown: false,\n      showNotication: false\n    };\n  }\n\n  triggerSignInModal(){\n    this.props.openModal();\n  }\n\n  toggleUserDropdown = () => {\n    this.setState({showUserDropdown: !this.state.showUserDropdown});\n  }\n\n  hideUserDropDown = () => {\n    this.setState({showUserDropdown: false});\n  }\n\n  toggleNotificationBar = () => {\n    this.setState({showNotication: !this.state.showNotication});\n  }\n\n  hideNotificationBar = () => {\n    this.setState({showNotication: false});\n  }\n\n  signOut = () => {\n    this.setState({showUserDropdown: false});\n    this.props.signOut(() => {\n      this.props.history.push('/');\n    });\n  }\n\n  _renderUserImage(){\n    if(this.props.auth.user.profile_image){\n      return <img src={this.props.auth.user.profile_image} className=\"user--img\" alt={this.props.auth.user.fullname}/>\n    }else{\n      const initial = this.props.auth.user.fullname.charAt(0);\n      return <div className=\"user--img\"><span>{initial}</span></div>;\n    }\n  }\n\n  renderLinks(){\n    if(this.props.auth){\n      return (\n        <div className=\"inline-continue\">\n          <li>\n            <button id=\"popNotificationPanel\" style={{position:'relative'}} className=\"btn-chromeless\" onClick={this.toggleNotificationBar}>\n              <span className=\"svgIcon\">\n                <svg className=\"svgIcon-use\" width=\"25\" height=\"25\" viewBox=\"-293 409 25 25\">\n                  <path d=\"M-273.327 423.67l-1.673-1.52v-3.646a5.5 5.5 0 0 0-6.04-5.474c-2.86.273-4.96 2.838-4.96 5.71v3.41l-1.68 1.553c-.204.19-.32.456-.32.734V427a1 1 0 0 0 1 1h3.49a3.079 3.079 0 0 0 3.01 2.45 3.08 3.08 0 0 0 3.01-2.45h3.49a1 1 0 0 0 1-1v-2.59c0-.28-.12-.55-.327-.74zm-7.173 5.63c-.842 0-1.55-.546-1.812-1.3h3.624a1.92 1.92 0 0 1-1.812 1.3zm6.35-2.45h-12.7v-2.347l1.63-1.51c.236-.216.37-.522.37-.843v-3.41c0-2.35 1.72-4.356 3.92-4.565a4.353 4.353 0 0 1 4.78 4.33v3.645c0 .324.137.633.376.85l1.624 1.477v2.373z\"></path>\n                </svg>\n              </span>\n              {this.state.showNotication &&\n                <Notification\n                  hideNotificationbar={this.hideNotificationBar}\n                  />\n              }\n\n            </button>\n          </li>\n          <li className=\"popover-p-wrap\">\n            <div id=\"popUserPanel\" style={{position:'relative'}} className=\"popover-userIcon\" onClick={this.toggleUserDropdown}>\n              {this._renderUserImage()}\n              {this.state.showUserDropdown &&\n                <UserProfileDropDown\n                  user={this.props.auth.user}\n                  signOut={this.signOut} hideUserDropDown={this.hideUserDropDown}/>}\n            </div>\n          </li>\n        </div>\n      );\n    }else{\n      return (\n        <li><button className=\"btn--p-hollow mjl-btn\" onClick={this.triggerSignInModal.bind(this)}>Get Started</button></li>\n      );\n    }\n  }\n\n  render(){\n    return (\n      <div>\n        <div className=\"nav-top-bar\">\n          <nav className=\"mjl-container\">\n            <div className=\"tb-flex1\">\n              <Link to=\"/\" id=\"ThLogo\">\n                <img src=\"/static/images/threadly-logo.png\" className=\"logo-l\" height=\"25px\" alt=\"Threadly Logo\"/>\n                <img src=\"/static/images/t-logo-min.png\" className=\"logo-x\" height=\"25px\" alt=\"Threadly Logo\"/>\n              </Link>\n            </div>\n            <div className=\"tb-flex0\">\n              <ul className=\"list-inline th-nav-main\">\n                <li>\n                  <Link to=\"/search\">\n                    <svg className=\"svgIcon\" width=\"25\" height=\"25\">\n                      <path d=\"M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z\">\n                      </path>\n                    </svg>\n                  </Link>\n                </li>\n                {this.renderLinks()}\n              </ul>\n            </div>\n          </nav>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state){\n  return {auth: state.auth.authenticated};\n}\n\nexport default withRouter(connect(mapStateToProps, {openModal, signOut})(Header));\n\n\nclass UserProfileDropDown extends Component{\n\n  componentDidMount(){\n    document.addEventListener('click', this.handleBlur, true);\n  }\n\n  componentWillUnmount(){\n    document.removeEventListener('click', this.handleBlur, true);\n  }\n\n  handleBlur = (e) => {\n    let node = document.getElementById('pUserActionPanel');\n    let userBtn = document.getElementById('popUserPanel');\n    let links = node.getElementsByTagName(\"ul\");\n    if(node){\n      // If user clicks outside the dropdown menu\n      if(!node.contains(e.target) && !userBtn.contains(e.target)){\n        this.props.hideUserDropDown();\n      }else{\n        /*\n        * If links are clicked\n        * setTimeout is so that dropdown gets unvisible only after link is clicked\n        */\n        if(links[0].contains(e.target)){\n          setTimeout(()=>{\n            this.props.hideUserDropDown();\n          }, 100);\n        }\n      }\n    }\n  }\n\n  render(){\n    return (\n      <div className=\"popover-userAction usr-drd\" id=\"pUserActionPanel\">\n        <ul>\n          <li><Link to=\"/new-story\">New Story</Link></li>\n          <li><Link to=\"/me/stories/drafts\">Stories</Link></li>\n          <li><Link to={`/@${this.props.user.username}`}>Profile</Link></li>\n          <li><Link to=\"/me/settings\">Settings</Link></li>\n          <li style={{cursor: 'pointer'}} onClick={this.props.signOut}>Sign Out</li>\n        </ul>\n      </div>\n    );\n  }\n}\n","\nimport { OPEN_L_MODAL, CLOSE_L_MODAL } from './types';\n\nexport const openModal = () => dispatch => {\n  dispatch({type: OPEN_L_MODAL, payload: null});\n};\n\nexport const closeModal = () => dispatch => {\n  dispatch({type: CLOSE_L_MODAL, payload: null});\n};\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form'\nimport * as actions from 'actions';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router-dom';\n\n\nclass SignInForm extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {error:null, addErrorClass: false};\n  }\n\n  renderField(field){\n    const {meta} = field;\n    const lblClass = meta.touched && meta.error ? 'text--danger':'';\n    const inputErr = `input-group ${meta.touched && meta.error ? 'got-danger':''}`;\n    return (\n      <div className={inputErr}>\n        <label className={lblClass}>{meta.touched && meta.error ? meta.error: field.label}</label>\n        <field.field\n          className=\"mjl-input input--underlined\"\n          type={field.type}\n          autoComplete=\"off\"\n          {...field.input}\n        />\n        <div className=\"text-help\"></div>\n      </div>\n    );\n  }\n\n  onSubmit = formProps => {\n    // Return in order to disable submit button while fetching\n    return this.props.signIn(formProps, (error) => {\n      if(error){\n        this.setState({error: error, addErrorClass:true}, ()=>{\n          setTimeout(() => {\n            this.setState({ addErrorClass:false });\n          }, 250)\n        });\n      }else{\n        this.props.closeModal();\n        this.props.history.push('/');\n      }\n    });\n  }\n  __renderSigninError(){\n    if(this.state.error){\n      if(this.state.addErrorClass){\n        return <span className=\"text--danger block-strong jitter-err\">{this.state.error}</span>;\n      }else{\n        return <span className=\"text--danger block-strong\">{this.state.error}</span>;\n      }\n    }\n  }\n  render(){\n    const { handleSubmit, submitting, invalid } = this.props;\n    return (\n        <form onSubmit={handleSubmit(this.onSubmit)}>\n          <Field\n          type=\"input\"\n          field=\"input\"\n          label=\"Your username or email\"\n          name=\"email\"\n          component={this.renderField}/>\n\n          <Field\n          type=\"password\"\n          field=\"input\"\n          label=\"Your password\"\n          name=\"password\"\n          component={this.renderField}/>\n\n          <div style={{display:'block',height:30+'px',marginTop:12+'px'}}>{this.__renderSigninError()}</div>\n\n          <button type=\"submit\" disabled={invalid || submitting} className=\"mjl-btn btn--dark\">Log In</button>\n        </form>\n    )\n  }\n};\n\n/*\n Redux Custom validation. Gets called upon each form actions\n */\nfunction validate(values){\n  const errors = {};\n  // Validate the inputs from 'values'\n  if (!values.email){\n    errors.email = \"Please enter a valid email\";\n  }\n  if (!values.password){\n    errors.password = \"Please enter your password\";\n  }\n  return errors;\n}\n\nexport default compose(\n  // First args in state, second tim actions object\n  connect(null, actions),\n  reduxForm({\n    validate,\n    form: 'signInForm'\n  }),\n  withRouter\n)(SignInForm);\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form'\nimport * as actions from 'actions';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router-dom';\n\nconst email = value =>\n  value && !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value) ?\n  'Please enter a valid email' : undefined\n\nclass SignUpForm extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {error:null, addErrorClass: false};\n  }\n\n  renderField(field){\n    const {meta} = field;\n    const lblClass = meta.touched && meta.error ? 'text--danger':'';\n    const inputErr = `input-group ${meta.touched && meta.error ? 'got-danger':''}`;\n    return (\n      <div className={inputErr}>\n        <label className={lblClass}>{meta.touched && meta.error ? meta.error: field.label}</label>\n        <field.field\n          className=\"mjl-input input--underlined\"\n          type={field.type}\n          autoComplete=\"off\"\n          {...field.input}\n        />\n        <div className=\"text-help\"></div>\n      </div>\n    );\n  }\n  onSubmit = formProps => {\n    return this.props.signUp(formProps, (error) => {\n      if(error){\n        this.setState({error: error, addErrorClass:true}, ()=>{\n          setTimeout(() => {\n            this.setState({ addErrorClass:false });\n          }, 250)\n        });\n      }else{\n        this.props.closeModal();\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  __renderSignUpError(){\n    if(this.state.error){\n      if(this.state.addErrorClass){\n        return <span className=\"text--danger block-strong jitter-err\">{this.state.error}</span>;\n      }else{\n        return <span className=\"text--danger block-strong\">{this.state.error}</span>;\n      }\n    }\n  }\n\n  render(){\n    const { handleSubmit, submitting, invalid } = this.props;\n    return (\n        <form onSubmit={handleSubmit(this.onSubmit)}>\n          <Field\n          type=\"text\"\n          field=\"input\"\n          label=\"Your full name\"\n          name=\"fullname\"\n          component={this.renderField}/>\n\n          <Field\n          type=\"input\"\n          validate={email}\n          field=\"input\"\n          label=\"Your email\"\n          name=\"email\"\n          component={this.renderField}/>\n\n          <Field\n          type=\"password\"\n          field=\"input\"\n          label=\"Your password\"\n          name=\"password\"\n          component={this.renderField}/>\n\n          <div style={{display:'block',height:30+'px',marginTop:12+'px'}}>{this.__renderSignUpError()}</div>\n\n          <button type=\"submit\" disabled={invalid || submitting} className=\"mjl-btn btn--dark\">Sign Up</button>\n        </form>\n    )\n  }\n};\n\n/*\n Redux Custom validation. Gets called upon each form actions\n */\nfunction validate(values){\n  const errors = {};\n\n  if (!values.fullname){\n    errors.fullname = \"Please enter your full name\";\n  }\n  if (!values.email){\n    errors.email = \"Please enter a valid email\";\n  }\n  if (!values.password){\n    errors.password = \"Please enter your password\";\n  }\n  return errors;\n}\n\nexport default compose(\n  // First args in state, second tim actions object\n  connect(null, actions),\n  reduxForm({\n    validate,\n    form: 'signUpForm'\n  }),\n  withRouter // Passing history to this.props\n)(SignUpForm);\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Modal.css';\n\nimport { Provider } from 'react-redux';\nimport { store } from 'index';\nimport SignInForm from 'components/forms/SignInForm';\nimport SignUpForm from 'components/forms/SignUpForm';\n\nimport { Router } from 'react-router-dom';\nimport { history } from 'index';\nimport { closeModal } from 'actions/loginModal';\nimport { connect } from 'react-redux';\n\nclass LoginModal extends Component{\n  constructor(props){\n    super(props);\n    /*\n     States\n      - signInModal: change modal content between signin form and signup form\n      - modalState: open and close modal\n    */\n    this.state = {signInModal: true};\n    this.toggleContent = this.toggleContent.bind(this);\n  }\n\n  componentDidMount(){\n    this.modalTarget = document.createElement('div');\n    document.body.appendChild(this.modalTarget);\n\n    document.addEventListener('click', this.handleBlur, true);\n    this._render();\n  }\n\n  componentWillUnmount(){\n    ReactDOM.unmountComponentAtNode(this.modalTarget);\n    document.body.removeChild(this.modalTarget);\n    document.removeEventListener('click', this.handleBlur, true);\n  }\n\n  toggleContent(){\n    this.setState({signInModal: !this.state.signInModal}, () => { this._render() });\n  }\n\n  handleBlur = e => {\n    let modalContent = document.getElementsByClassName('modal-dialog')[0];\n    if(modalContent){\n      if(!modalContent.contains(e.target)){\n        this.props.closeModal();\n      }\n    }\n  }\n\n  toggleModalContent(){\n    if(this.state.signInModal){\n      return (\n        <div>\n          <h1>Hi There.</h1>\n          <h2>Sign in to access your personalized homepage, follow authors and topics you love.</h2>\n          <div className=\"sm-caption\">\n            <div className=\"col-max-300\">\n              <SignInForm closeModal={this.props.closeModal}/>\n            </div>\n            <br/>\n            <p>No account? <button className=\"btn-chromeless text--primary\" onClick={this.toggleContent}>Create One</button></p>\n          </div>\n        </div>\n      );\n    }else{\n      return (\n        <div>\n          <h1>Join The Thread.</h1>\n          <h2>Create an account to personalize your homepage, follow your favorite authors, publications and more.</h2>\n          <div className=\"sm-caption\">\n            <div className=\"col-max-300\">\n              <SignUpForm closeModal={this.props.closeModal}/>\n            </div>\n            <br/>\n            <p>Already have an account? <button className=\"btn-chromeless text--primary\" onClick={this.toggleContent}>Sign In</button></p>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  createModal(){\n    const background = this.state.signInModal ? '#D7EFEE' : '#E8F3EC';\n    return (\n      <div id=\"loginModalWrapper\">\n        <div className=\"modal-backdrop\"></div>\n        <div className=\"modal\">\n          <div className=\"modal-dialog\" style={{backgroundColor: background}}>\n            <div className=\"modal-content\">\n              <div className=\"modal-body\">\n                <svg className=\"closeModal\" width=\"29\" height=\"29\" onClick={this.props.closeModal}>\n                  <path d=\"M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61\" fillRule=\"evenodd\"></path>\n                </svg>\n                <div className=\"login-holder\">\n                  {this.toggleModalContent()}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n/*\n  * Passing shared history to Router.\n  * To sync with main Router when using multiple ReactDOM.render()\n*/\n  _render(){\n    ReactDOM.render(\n      <Provider store={store}>\n        <Router history={history}>\n          {this.createModal()}\n        </Router>\n      </Provider>,\n      this.modalTarget,\n    );\n  }\n\n  render(){\n    return <noscript />\n  }\n}\n\nexport default connect(null, {closeModal}) (LoginModal);\n","import React from 'react';\nimport Header from './site/includes/Header';\nimport LoginModal from './modals/LoginModal';\nimport { getUser } from '../actions';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {renderApp: true}\n  }\n  componentWillMount(){\n    const userToken = localStorage.getItem('token');\n    /*\n    * Auto login user if token is present\n    */\n    if(userToken){\n      this.setState({renderApp: false}, () => {\n        this.props.getUser(userToken, () => {\n          this.setState({renderApp: true});\n        });\n      });\n    }\n  }\n  _renderModal(){\n    if(this.props.openModal){\n      return <LoginModal/>;\n    }\n  }\n  render(){\n    if(this.state.renderApp){\n      return (\n        <div>\n          <Header/>\n          <div className=\"mjl-container\">\n            {this.props.children}\n            {this._renderModal()}\n          </div>\n        </div>\n      )\n    }else{\n      return <h1>Loading...</h1>\n    }\n  }\n};\n\nfunction mapStateToProps(state){\n  return {openModal: state.loginModal.openModal};\n}\n\nexport default withRouter(connect(mapStateToProps, {getUser})(App));\n","import React, { Component } from 'react';\nimport './Header.css';\n\nclass CategoryNav extends Component{\n  render(){\n    return (\n      <div className=\"main-category-nav\">\n        <ul className=\"nav-cate-l list-inline\">\n          <li><a href=\"/\">Home</a></li>\n          <li><a href=\"/topic/technology\">Tech</a></li>\n          <li><a href=\"/topic/entertainment\">Entertainment</a></li>\n          <li><a href=\"/topic/startups\">Startups</a></li>\n          <li><a href=\"/topic/industry\">Industry</a></li>\n          <li><a href=\"/topic/life\">Life</a></li>\n          <li><a href=\"/topic/design\">Design</a></li>\n          <li><a href=\"/topic/health\">Health</a></li>\n          <li><a href=\"/topic/country\">Country</a></li>\n          <li><a href=\"/topic/politics\">Politics</a></li>\n          {\n            //<li><Link to=\"/topics\">More</Link></li>\n          }\n\n          {\n            //           <li style={{border: 1+'px solid #ccc',padding: 3+'px',fontSize: 8+'px',verticalAlign: 'top'}}>Pre-Alpha</li>\n\n          }\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default CategoryNav;\n","import moment from 'moment';\n\nexport const utcToLocal = (utcDate) => {\n  var utc = moment(utcDate).format('YYYY-MM-DD HH:mm:ss');\n  var local = moment.utc(utc).local().format('YY-MMM-DD hh:mm a');\n  return local;\n}\n\nexport const utcToLocalMin = (utcDate) => {\n  var utc = moment(utcDate).format('YYYY-MM-DD HH:mm:ss');\n  var local = moment.utc(utc).local().format('MMM Do, YYYY');\n  return local;\n}\n","import axios from 'axios';\nimport config from 'config.js';\n\nexport function fetchStory(storyId){\n  return axios.get(config.SERVER_URL+'api/story/'+storyId);\n}\n\nexport function fetchUserStories(bloggerId){\n  return axios.get(config.SERVER_URL+'api/user/get-stories/'+bloggerId);\n}\n","import React from 'react';\nimport { fetchStory } from 'services/storyService';\nimport { utcToLocalMin } from 'services/utils';\n\nexport default class FeaturedStory extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      featuredStory: null\n    }\n  }\n\n  componentWillReceiveProps(nextProps){\n    if(nextProps.topic === 'Life'){\n      fetchStory(2).then(res => {\n        this.setState({\n          featuredStory: res.data.blog\n        });\n      })\n    }else{\n      fetchStory(1).then(res => {\n        this.setState({\n          featuredStory: res.data.blog\n        });\n      })\n    }\n  }\n\n\n  render(){\n    const story = this.state.featuredStory\n    if(story){\n      const storyCreationDate = utcToLocalMin(story.created_at);\n\n      let backgroundImgStyle = {};\n      if(story.blogThumbnails.length > 0){\n        backgroundImgStyle = { backgroundImage: `url(${story.blogThumbnails[0].story_thumb})`}\n      }else{\n        backgroundImgStyle = { backgroundImage: `url(https://images.unsplash.com/photo-1523265760936-36c1b113b303?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1035&q=80)`}\n      }\n      return(\n        <div className=\"t-featured\">\n          <article>\n            <h4>FEATURED</h4>\n            <a className=\"f-img\" style={backgroundImgStyle} href={`http://threadly.vortexnepal.com/@${story.blogger.username}/${story.id}`}>\n            </a>\n            <h1>\n              <a href={`http://threadly.vortexnepal.com/@${story.blogger.username}/${story.id}`}>\n                {story.title}\n              </a>\n            </h1>\n            <p>\n              <a href={`http://threadly.vortexnepal.com/@${story.blogger.username}/${story.id}`}>\n                {story.story_summary}\n              </a>\n            </p>\n          </article>\n          <div className=\"d--flex u-ct\">\n            <a href={`http://threadly.vortexnepal.com/@${story.blogger.username}`} className=\"p-i-wrap\">\n              <img src={story.blogger.profile_image} alt=\"Manjil Tamang\"/>\n            </a>\n            <div className=\"u-w\">\n              <a href={`http://threadly.vortexnepal.com/@${story.blogger.username}`}>\n                {story.blogger.fullname}\n              </a>\n              <span>{storyCreationDate}</span>\n            </div>\n          </div>\n        </div>\n      );\n    }else{\n      return <noscript/>\n    }\n  }\n}\n","import React from \"react\";\nimport { utcToLocalMin } from \"services/utils\";\nimport { Link } from \"react-router-dom\";\nimport \"./StoryList.css\";\nimport FeaturedStory from \"./FeaturedAd/FeaturedStory\";\nimport { StickyContainer, Sticky } from \"react-sticky\";\n\n// import FollowTopic from './FollowTopic/FollowTopic';\n\nexport default props => {\n  function _renderStories() {\n    if (props.stories) {\n      if (props.stories.length > 0) {\n        return props.stories.map(story => {\n          const storyCreationDate = utcToLocalMin(story.created_at);\n          return (\n            <div key={story.id} className=\"c-item d--flex flex-sb\">\n              <div>\n                <article>\n                  <Link to={`/@${story.blogger.username}/${story.id}`}>\n                    <h3>{story.title}</h3>\n                    <p className=\"d-summary text--muted\">\n                      {story.story_summary}...\n                    </p>\n                  </Link>\n                  <div className=\"c-info\">\n                    <Link to={`/@${story.blogger.username}`}>\n                      <p>{story.blogger.fullname}</p>\n                    </Link>\n                    <span className=\"text--muted\">{storyCreationDate}</span>\n                  </div>\n                </article>\n              </div>\n              {__renderStoryThumb(story)}\n            </div>\n          );\n        });\n      } else {\n        return (\n          <h4 style={{ marginTop: 10 + \"px\" }}>\n            No stories as of yet to read. :({\" \"}\n          </h4>\n        );\n      }\n    } else {\n      return <h4>Loading...</h4>;\n    }\n  }\n\n  function __renderStoryThumb(story) {\n    if (story.blogThumbnails[0]) {\n      const src = story.blogThumbnails[0].story_thumb;\n      return (\n        <Link\n          style={{ backgroundImage: `url(${src})` }}\n          to={`/@${story.blogger.username}/${story.id}`}\n          className=\"h-s-img\"\n        ></Link>\n      );\n    }\n  }\n\n  return (\n    <div>\n      <div className=\"h-page\">\n        <div className=\"d--flex flex-sb h-c-wrap\">\n          <div className=\"main-c\">\n            <FeaturedStory topic={props.topic} />\n\n            <div>\n              <h4 className=\"p-t\">LATEST</h4>\n              {_renderStories()}\n            </div>\n          </div>\n          <div className=\"h-s\">\n            {\n              // props.topic && (\n              //   <div className=\"t-aside\">\n              //     <h2>{props.topic}</h2>\n              //     <FollowTopic />\n              //     <p className=\"p--sm text--muted\">\n              //       Follow to get great stories about {props.topic} in your inbox and on your homepage\n              //     </p>\n              //   </div>\n              // )\n            }\n            <StickyContainer>\n              <Sticky>\n                {({ distanceFromTop }) => {\n                  let style = {};\n                  if (distanceFromTop < 0)\n                    style = { top: 8 + \"px\", position: \"fixed\" };\n                  return (\n                    <div style={style}>\n                      <StoryAd />\n                    </div>\n                  );\n                }}\n              </Sticky>\n            </StickyContainer>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction StoryAd() {\n  return (\n    <div className=\"hs--ad\">\n      <span className=\"adv-t text--muted\">\n        <img\n          style={{ height: 14 + \"px\", marginRight: 5 + \"px\" }}\n          src=\"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMS4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDE1IDE1IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNSAxNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxnPgoJPHBhdGggZD0iTTE0Ljk4Miw3QzE0LjczNiwzLjI1NiwxMS43NDQsMC4yNjMsOCwwLjAxN1YwSDcuNUg3djAuMDE3QzMuMjU2LDAuMjYzLDAuMjYzLDMuMjU2LDAuMDE3LDdIMHYwLjUgICBWOGgwLjAxN0MwLjI2MywxMS43NDQsMy4yNTYsMTQuNzM2LDcsMTQuOTgyVjE1aDAuNUg4di0wLjAxOGMzLjc0NC0wLjI0Niw2LjczNi0zLjIzOCw2Ljk4Mi02Ljk4MkgxNVY3LjVWN0gxNC45ODJ6IE00LjY5NSwxLjYzNSAgIEM0LjIxMiwyLjI3NywzLjgxMSwzLjA4MiwzLjUxOSw0SDIuMDIxQzIuNjczLDIuOTgzLDMuNTk5LDIuMTYsNC42OTUsMS42MzV6IE0xLjQ5OCw1aDEuNzU4QzMuMTIyLDUuNjMyLDMuMDM3LDYuMzAzLDMuMDEsN0gxLjAxOSAgIEMxLjA3Miw2LjI5NiwxLjIzOCw1LjYyMywxLjQ5OCw1eiBNMS4wMTksOEgzLjAxYzAuMDI3LDAuNjk3LDAuMTEyLDEuMzY4LDAuMjQ2LDJIMS40OThDMS4yMzgsOS4zNzcsMS4wNzIsOC43MDQsMS4wMTksOHogICAgTTIuMDIxLDExaDEuNDk3YzAuMjkyLDAuOTE4LDAuNjkzLDEuNzIzLDEuMTc3LDIuMzY1QzMuNTk5LDEyLjg0LDIuNjczLDEyLjAxOCwyLjAyMSwxMXogTTcsMTMuOTM2ICAgQzUuOTcyLDEzLjY2MSw1LjA4NywxMi41NTcsNC41NSwxMUg3VjEzLjkzNnogTTcsMTBINC4yNjlDNC4xMjgsOS4zNzcsNC4wMzksOC43MDQsNC4wMSw4SDdWMTB6IE03LDdINC4wMSAgIGMwLjAyOS0wLjcwNCwwLjExOC0xLjM3NywwLjI1OS0ySDdWN3ogTTcsNEg0LjU1QzUuMDg3LDIuNDQzLDUuOTcyLDEuMzM5LDcsMS4wNjVWNHogTTEyLjk3OSw0aC0xLjQ5NiAgIGMtMC4yOTMtMC45MTgtMC42OTMtMS43MjMtMS4xNzgtMi4zNjVDMTEuNCwyLjE2LDEyLjMyNywyLjk4MywxMi45NzksNHogTTgsMS4wNjVDOS4wMjcsMS4zMzksOS45MTMsMi40NDMsMTAuNDUsNEg4VjEuMDY1eiBNOCw1ICAgaDIuNzNjMC4xNDIsMC42MjMsMC4yMjksMS4yOTYsMC4yNiwySDhWNXogTTgsOGgyLjk5Yy0wLjAyOSwwLjcwNC0wLjExOCwxLjM3Ny0wLjI2LDJIOFY4eiBNOCwxMy45MzZWMTFoMi40NSAgIEM5LjkxMywxMi41NTcsOS4wMjcsMTMuNjYxLDgsMTMuOTM2eiBNMTAuMzA1LDEzLjM2NWMwLjQ4My0wLjY0MywwLjg4NS0xLjQ0NywxLjE3OC0yLjM2NWgxLjQ5NiAgIEMxMi4zMjcsMTIuMDE4LDExLjQsMTIuODQsMTAuMzA1LDEzLjM2NXogTTEzLjUwMiwxMGgtMS43NThjMC4xMzQtMC42MzIsMC4yMTktMS4zMDMsMC4yNDYtMmgxLjk5ICAgQzEzLjkyOCw4LjcwNCwxMy43NjIsOS4zNzcsMTMuNTAyLDEweiBNMTEuOTksN2MtMC4wMjctMC42OTctMC4xMTItMS4zNjgtMC4yNDYtMmgxLjc1OGMwLjI2LDAuNjIzLDAuNDI2LDEuMjk2LDAuNDc5LDJIMTEuOTl6IiBmaWxsPSIjNmU2ZTZlIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==\"\n          alt=\"\"\n        />\n        Sponsored\n      </span>\n      <div>\n        <a\n          href=\"https://visitnepal.travel\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          <img\n            src=\"/static/images/ghyampo-sidebanner.png\"\n            alt=\"ghyampo store banner\"\n          />\n        </a>\n      </div>\n      <div className=\"site-map\">\n        <ul className=\"neutralize text--muted\">\n          <li>\n            <Link to=\"/about\">About</Link>\n          </li>\n          <li>\n            <Link to=\"/about\">Privacy</Link>\n          </li>\n          <li>\n            <Link to=\"/terms\">Terms</Link>\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport CategoryNav from 'components/site/includes/CategoryNav';\nimport { connect } from 'react-redux';\nimport StoryList from './topic/StoryList';\nimport axios from 'axios';\nimport config from 'config';\n/*\n* Testing phase on going...\n*/\nclass Home extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      stories: null\n    }\n  }\n\n  componentDidMount(){\n    /*\n    * Test\n    */\n    axios.get(`${config.SERVER_URL}test-stories`).then(res => {\n      this.setState({stories: res.data});\n    });\n  }\n\n  render(){\n    return (\n      <div>\n        <CategoryNav/>\n        <StoryList stories={this.state.stories} />\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state){\n  return { state };\n}\n\nexport default connect(mapStateToProps)(Home);\n","import React from 'react';\nimport StoryList from './StoryList';\nimport axios from 'axios';\nimport config from 'config';\n\n/*\n* Testing phase on going...\n*/\nexport default class Topic extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      stories: null,\n      error: false\n    }\n  }\n\n  componentDidMount(){\n    this.logoNode = document.getElementById('ThLogo');\n    this.topic = this.props.match.params.topic;\n    this.fetchStory();\n  }\n\n  componentWillUnmount(){\n    if(this.node){\n      this.node.parentNode.removeChild(this.node);\n    }\n  }\n\n  __capitalizeFirstChar(text){\n    return text.charAt(0).toUpperCase() + text.substr(1);\n  }\n\n  __displayTopicTitle(){\n    const topic = this.__capitalizeFirstChar(this.topic);\n    this.node = document.createElement(\"H2\");\n    var textnode = document.createTextNode(topic);\n    this.node.appendChild(textnode);\n    this.logoNode.appendChild(this.node);\n  }\n\n  fetchStory(){\n    const topic = this.topic;\n    /*\n    * Test\n    */\n    axios.get(`${config.SERVER_URL}test-topic/${topic}`).then(res => {\n      if(res.data.error){\n        this.setState({error: true});\n      }else{\n        this.__displayTopicTitle();\n        this.setState({stories: res.data});\n      }\n    });\n  }\n\n  render(){\n    let topic = '';\n    if(this.topic){\n      topic =  this.__capitalizeFirstChar(this.topic);\n    }\n    return (\n      <section>\n        {\n          this.state.error ? (<h1>404 Page not found</h1>)\n          :\n          (<StoryList topic={topic} stories={this.state.stories} />)\n        }\n      </section>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default (props) => {\n  return (\n    <div className=\"s-c\">\n      {renderStories(props.stories)}\n    </div>\n  );\n}\n\nfunction renderStories(stories){\n  return stories.map(story => {\n    return (\n      <div key={story.username}>\n        <div style={{margin: `${20}px ${0}`}}>\n          {_renderProfileImage(story)}\n          <div className=\"user-i\">\n            <Link to={`/@${story.username}`}>{story.fullname}</Link>\n            <span>{story.bio}</span>\n          </div>\n        </div>\n        {renderInnerStories(story.stories, story.username)}\n      </div>\n    );\n  })\n}\n\nfunction renderInnerStories(stories, username){\n  return stories.map((story) => {\n    const backgroundImage = story.story_thumbnail;\n    return (\n      <div className=\"s-story\" key={story.id}>\n        {(backgroundImage &&\n          <Link to={`/@${username}/${story.id}`} className=\"story-box\" style={{backgroundImage: `url(${backgroundImage})`}}>\n          </Link>)}\n        <article>\n          <Link to={`/@${username}/${story.id}`}>\n            <h2>{story.title}</h2>\n            <p className=\"text--muted\">\n              {story.story_summary}\n            </p>\n          </Link>\n        </article>\n      </div>\n    );\n  })\n}\n\nfunction _renderProfileImage(story){\n  if(story.profile_image){\n    return (\n      <Link to={`/@${story.username}`}>\n        <img className=\"user--img\" src={story.profile_image} alt={story.fullname}/>\n      </Link>\n    );\n  }else{\n    const initial = story.fullname.charAt(0);\n    return (\n      <Link to={`/@${story.username}`}>\n        <div className=\"user--img\"><span>{initial}</span></div>\n      </Link>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default (props) => {\n  return (\n    <div className=\"p-c\">\n      {renderPeople(props.people)}\n    </div>\n  );\n}\n\nfunction renderPeople(people){\n  return people.map(person => {\n    return (\n      <div key={person.id} className=\"people-c d--flex\">\n        {_renderProfileImage(person)}\n        <div className=\"p-a\">\n          <Link to={`/@${person.username}`}>\n            <h3>{person.fullname}</h3>\n          </Link>\n          <p>{person.bio}</p>\n        </div>\n      </div>\n    );\n  });\n}\n\nfunction _renderProfileImage(person){\n  if(person.profile_image){\n    return (\n      <Link to={`/@${person.username}`}>\n        <img className=\"usr--img\" src={person.profile_image} alt={person.fullname}/>\n      </Link>\n    );\n  }else{\n    const initial = person.fullname.charAt(0);\n    return (\n      <Link to={`/@${person.username}`}>\n        <div className=\"usr--img\"><span>{initial}</span></div>\n      </Link>\n    );\n  }\n}\n","import React from \"react\";\nimport \"./Search.css\";\nimport { Link } from \"react-router-dom\";\nimport Stories from \"./Stories\";\nimport People from \"./People\";\nimport { fetchStories, fetchPeople } from \"services/searchService\";\nimport { StickyContainer, Sticky } from \"react-sticky\";\n\nconst queryString = require(\"query-string\");\n\nexport default class Search extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      stories: [],\n      people: [],\n      query: \"\"\n    };\n  }\n\n  componentDidMount() {\n    // To delay blog data send\n    this.timeout = 0;\n\n    /*\n     * If query string is present in url i.e. /users?q=tamang\n     */\n    this._searchInitializer(this.props.history.location.search);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    /*\n      When user navigate forward and backward from browser\n    */\n    this._searchInitializer(nextProps.history.location.search);\n  }\n\n  _searchInitializer(qString) {\n    const parsed = queryString.parse(qString);\n    const query = parsed.q;\n    if (query) {\n      this.setState({ query });\n      this.fetchSearchData(query);\n    }\n  }\n\n  onSearch = e => {\n    this.setState({ query: e.target.value }, () => {\n      if (this.timeout) clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        const { query } = this.state;\n        if (query !== \"\") {\n          // if input is not empty\n          this.fetchSearchData(query);\n          this.props.history.push(\n            `${this.props.history.location.pathname}?q=${query}`\n          );\n        } else {\n          this.setState({ stories: [], people: [] });\n          this.props.history.push(this.props.history.location.pathname);\n        }\n      }, 800);\n    });\n  };\n\n  fetchSearchData(query) {\n    fetchStories(query).then(res => {\n      this.setState({ stories: res.data });\n    });\n    fetchPeople(query).then(res => {\n      this.setState({ people: res.data });\n    });\n  }\n\n  __renderContent(url) {\n    if (url === \"/search\") {\n      return <Stories stories={this.state.stories} />;\n    } else if (url === \"/search/users\") {\n      return <People people={this.state.people} />;\n    } else {\n      return <h1 style={{ width: 100 + \"%\" }}>Page not found</h1>;\n    }\n  }\n\n  _renderTabs(url) {\n    let storyLink;\n    let userLink;\n\n    if (this.state.query === \"\") {\n      storyLink = \"/search\";\n      userLink = \"/search/users\";\n    } else {\n      storyLink = `/search?q=${this.state.query}`;\n      userLink = `/search/users?q=${this.state.query}`;\n    }\n\n    if (url === \"/search\") {\n      return (\n        <ul className=\"list-inline\">\n          <li>\n            <Link to={storyLink} className=\"active\">\n              Stories\n            </Link>\n          </li>\n          <li>\n            <Link to={userLink}>People</Link>\n          </li>\n        </ul>\n      );\n    } else if (url === \"/search/users\") {\n      return (\n        <ul className=\"list-inline\">\n          <li>\n            <Link to={storyLink}>Stories</Link>\n          </li>\n          <li>\n            <Link to={userLink} className=\"active\">\n              People\n            </Link>\n          </li>\n        </ul>\n      );\n    }\n\n    return (\n      <ul className=\"list-inline\">\n        <li>\n          <Link to={storyLink} className=\"active\">\n            Stories\n          </Link>\n        </li>\n        <li>\n          <Link to={userLink}>People</Link>\n        </li>\n      </ul>\n    );\n  }\n\n  render() {\n    const url = this.props.location.pathname;\n    return (\n      <section className=\"mjl-container p-search\">\n        <input\n          value={this.state.query}\n          autoComplete=\"off\"\n          placeholder=\"Search Threadly\"\n          onChange={this.onSearch}\n          className=\"text-input\"\n        />\n\n        <div className=\"s-wrapper\">\n          <nav>{this._renderTabs(url)}</nav>\n\n          <div className=\"s-content d--flex\">\n            {this.__renderContent(url)}\n\n            <div className=\"s-adv\">\n              <StickyContainer>\n                <Sticky>\n                  {({ distanceFromTop }) => {\n                    let style = {};\n                    if (distanceFromTop < 0)\n                      style = { top: 8 + \"px\", position: \"fixed\" };\n                    return (\n                      <div style={style}>\n                        <span className=\"adv-t text--muted\">\n                          <img\n                            style={{ height: 14 + \"px\", marginRight: 5 + \"px\" }}\n                            src=\"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMS4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDE1IDE1IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNSAxNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxnPgoJPHBhdGggZD0iTTE0Ljk4Miw3QzE0LjczNiwzLjI1NiwxMS43NDQsMC4yNjMsOCwwLjAxN1YwSDcuNUg3djAuMDE3QzMuMjU2LDAuMjYzLDAuMjYzLDMuMjU2LDAuMDE3LDdIMHYwLjUgICBWOGgwLjAxN0MwLjI2MywxMS43NDQsMy4yNTYsMTQuNzM2LDcsMTQuOTgyVjE1aDAuNUg4di0wLjAxOGMzLjc0NC0wLjI0Niw2LjczNi0zLjIzOCw2Ljk4Mi02Ljk4MkgxNVY3LjVWN0gxNC45ODJ6IE00LjY5NSwxLjYzNSAgIEM0LjIxMiwyLjI3NywzLjgxMSwzLjA4MiwzLjUxOSw0SDIuMDIxQzIuNjczLDIuOTgzLDMuNTk5LDIuMTYsNC42OTUsMS42MzV6IE0xLjQ5OCw1aDEuNzU4QzMuMTIyLDUuNjMyLDMuMDM3LDYuMzAzLDMuMDEsN0gxLjAxOSAgIEMxLjA3Miw2LjI5NiwxLjIzOCw1LjYyMywxLjQ5OCw1eiBNMS4wMTksOEgzLjAxYzAuMDI3LDAuNjk3LDAuMTEyLDEuMzY4LDAuMjQ2LDJIMS40OThDMS4yMzgsOS4zNzcsMS4wNzIsOC43MDQsMS4wMTksOHogICAgTTIuMDIxLDExaDEuNDk3YzAuMjkyLDAuOTE4LDAuNjkzLDEuNzIzLDEuMTc3LDIuMzY1QzMuNTk5LDEyLjg0LDIuNjczLDEyLjAxOCwyLjAyMSwxMXogTTcsMTMuOTM2ICAgQzUuOTcyLDEzLjY2MSw1LjA4NywxMi41NTcsNC41NSwxMUg3VjEzLjkzNnogTTcsMTBINC4yNjlDNC4xMjgsOS4zNzcsNC4wMzksOC43MDQsNC4wMSw4SDdWMTB6IE03LDdINC4wMSAgIGMwLjAyOS0wLjcwNCwwLjExOC0xLjM3NywwLjI1OS0ySDdWN3ogTTcsNEg0LjU1QzUuMDg3LDIuNDQzLDUuOTcyLDEuMzM5LDcsMS4wNjVWNHogTTEyLjk3OSw0aC0xLjQ5NiAgIGMtMC4yOTMtMC45MTgtMC42OTMtMS43MjMtMS4xNzgtMi4zNjVDMTEuNCwyLjE2LDEyLjMyNywyLjk4MywxMi45NzksNHogTTgsMS4wNjVDOS4wMjcsMS4zMzksOS45MTMsMi40NDMsMTAuNDUsNEg4VjEuMDY1eiBNOCw1ICAgaDIuNzNjMC4xNDIsMC42MjMsMC4yMjksMS4yOTYsMC4yNiwySDhWNXogTTgsOGgyLjk5Yy0wLjAyOSwwLjcwNC0wLjExOCwxLjM3Ny0wLjI2LDJIOFY4eiBNOCwxMy45MzZWMTFoMi40NSAgIEM5LjkxMywxMi41NTcsOS4wMjcsMTMuNjYxLDgsMTMuOTM2eiBNMTAuMzA1LDEzLjM2NWMwLjQ4My0wLjY0MywwLjg4NS0xLjQ0NywxLjE3OC0yLjM2NWgxLjQ5NiAgIEMxMi4zMjcsMTIuMDE4LDExLjQsMTIuODQsMTAuMzA1LDEzLjM2NXogTTEzLjUwMiwxMGgtMS43NThjMC4xMzQtMC42MzIsMC4yMTktMS4zMDMsMC4yNDYtMmgxLjk5ICAgQzEzLjkyOCw4LjcwNCwxMy43NjIsOS4zNzcsMTMuNTAyLDEweiBNMTEuOTksN2MtMC4wMjctMC42OTctMC4xMTItMS4zNjgtMC4yNDYtMmgxLjc1OGMwLjI2LDAuNjIzLDAuNDI2LDEuMjk2LDAuNDc5LDJIMTEuOTl6IiBmaWxsPSIjNmU2ZTZlIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==\"\n                            alt=\"\"\n                          />\n                          Sponsored\n                        </span>\n                        <div>\n                          <a\n                            href=\"https://www.visitnepal.travel\"\n                            rel=\"noopener noreferrer\"\n                            target=\"_blank\"\n                          >\n                            <img\n                              src=\"/static/images/ghyampo-sb.png\"\n                              alt=\"ghyampo store banner\"\n                            />\n                          </a>\n                        </div>\n                      </div>\n                    );\n                  }}\n                </Sticky>\n              </StickyContainer>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n","import axios from 'axios';\nimport config from 'config.js';\n\nexport function fetchStories(query){\n  return axios.get(config.SERVER_URL+'api/search/stories/'+query);\n}\n\nexport function fetchPeople(query){\n  return axios.get(config.SERVER_URL+'api/search/people/'+query);\n}\n","import React from \"react\";\nimport \"./About.css\";\nimport \"font-awesome/css/font-awesome.min.css\";\nexport default class Contact extends React.Component {\n  render() {\n    return (\n      <section className=\"p-about\">\n        <link\n          href=\"https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap\"\n          rel=\"stylesheet\"\n        />\n        <article>\n          <h1>Welcome to Threadly.</h1>\n          <p className=\"text-muted\">\n            Who really aren't visionaries? We all dream of changing the world or\n            community for the betterment. But being a visionary and strong will\n            only takes a person so far.{\" \"}\n            <b>WE ALL NEED A TEAM TO MAKE IT WORK!</b> A Paul Allen for Bill\n            Gates, Steve Wozniak for Steve Jobs. Threadly aims to provide a\n            platform for such Nepalese people to share ideas and discover\n            talents in close quarters. Read, share be influential and get\n            influenced that's what Threadly is all about.\n          </p>\n        </article>\n        <hr style={{ margin: 22 + \"px \" + 0 }} />\n        <h2>Meet the Creator</h2>\n        <div className=\"text-center\">\n          <a\n            href=\"https://manjiltamang.vortexnepal.com/\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <img\n              src=\"/static/images/creator.jpg\"\n              alt=\"Threadly Creator\"\n              className=\"img--responsive\"\n            />\n          </a>\n        </div>\n        <p className=\"text-center text--muted\">\n          <a\n            href=\"https://manjiltamang.vortexnepal.com/\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <strong>Manjil Tamang</strong>\n          </a>\n        </p>\n      </section>\n    );\n  }\n}\n","import React from 'react';\n\nexport default () => {\n  return <h1>HOC 404 Error Nigga!</h1>\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport ErrorPage from './404';\n// ChildComponent is the component that's passed as a arguement into this function\nexport default ChildComponent => {\n  class ComposedComponent extends Component {\n    render() {\n      if(this.props.auth){\n        return <ChildComponent {...this.props} />;\n      }else{\n        return <ErrorPage/>\n      }\n    }\n  }\n  function mapStateToProps(state) {\n    return { auth: state.auth.authenticated };\n  }\n  return connect(mapStateToProps)(ComposedComponent);\n};\n","import React from 'react';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css'\nimport PropTypes from 'prop-types';\n\nclass ConfirmBox extends React.Component {\n\n  submit = () => {\n    if(this.props.onMount){\n      this.props.onMount();\n    }\n\n    confirmAlert({\n      customUI: ({ onClose }) => {\n        return (\n          <div className='custom-ui'>\n            <h1>{this.props.text}</h1>\n            <p style={{marginTop:8+'px', marginBottom:16+'px'}}>{this.props.msg}</p>\n            <button className=\"mjl-btn btn-danger-hollow btn--dead-hollow\" onClick={() => {\n                this.props.handleConfirm(this.props.actionId)\n                onClose()\n            }}>{this.props.text}</button>\n            <button style={{marginLeft: 10+'px'}} className=\"mjl-btn btn--d-hollow\" onClick={onClose}>Cancel</button>\n          </div>\n        )\n      }\n    });\n  };\n\n  render() {\n    return (\n      <span onClick={this.submit}>{this.props.text}</span>\n    );\n  }\n}\n\nConfirmBox.propTypes = {\n  onMount: PropTypes.func,  // This function is executed when dialog box is opened\n  text: PropTypes.string.isRequired,\n  msg: PropTypes.string.isRequired,\n  actionId: PropTypes.node, // anything to be returned as an arguement\n  handleConfirm: PropTypes.func.isRequired\n}\n\nexport default ConfirmBox;\n","import React from 'react';\nimport requireAuth from 'components/requireAuth';\nimport './Settings.css';\nimport config from 'config';\nimport { connect } from 'react-redux';\nimport { checkAvaiblity, changeUsername } from 'services/usernameService';\nimport ConfirmBox from 'components/site/utils/ConfirmBox';\n\nclass Settings extends React.Component {\n  constructor(){\n    super();\n    this.state = {\n      username: '',\n      userExist: true,\n      editMode: false,\n      errorMsg: null,\n      successMsg: null\n    }\n  }\n\n  componentDidMount(){\n    this.timeout =  0;\n    this.userToken = localStorage.getItem('token');\n    this.usernameRegex = /^[a-zA-Z0-9]+$/;\n    this.setState({username: this.props.username});\n  }\n\n  onInputChange = (e) => {\n    this.setState({username: e.target.value, userExist:true}, () => {\n      this.searchUsernameAvaibility();\n    });\n  }\n\n  searchUsernameAvaibility = () => {\n    if(this.timeout) clearTimeout(this.timeout);\n    this.timeout = setTimeout(() => {\n      const { username } = this.state;\n      if(username.length<4){\n        this.setState({errorMsg: 'Username not available', successMsg: null})\n      }else{\n        var validate = this.state.username.match(this.usernameRegex);\n        if(validate){\n          let formData = new FormData();\n          formData.append(\"username\", username);\n          checkAvaiblity(formData, this.userToken)\n            .then((response) => {\n              if(response.data.usernameExist){\n                this.setState({errorMsg: 'Username not available', successMsg: null})\n              }else{\n                this.setState({errorMsg: null, successMsg: 'Username available', userExist:false})\n              }\n            });\n        }else{\n          this.setState({errorMsg: 'Username must consist of only number and letters', successMsg: null})\n        }\n      }\n\n    }, 300);\n  }\n\n  onCancel = () => {\n    this.setState(\n      { editMode: false, userExist: true, errorMsg: null, successMsg: null, username: this.props.username }\n    );\n  }\n\n  handleSubmit = () => {\n    const { username } = this.state;\n    let formData = new FormData();\n    formData.append(\"username\", username);\n    changeUsername(formData, this.userToken)\n      .then(() => {\n        const redirectTo = config.BASE_URL+'/me/settings';\n        window.location.href = redirectTo;\n      });\n  }\n\n  _renderErrorMsg(){\n    if(this.state.errorMsg){\n      return <p className=\"text--danger\"><small>{this.state.errorMsg}</small></p>\n    }else if(this.state.successMsg){\n      return <p className=\"text--primary\"><small>{this.state.successMsg}</small></p>\n    }\n  }\n\n  _renderBtn(){\n    if(this.state.editMode){\n      return (\n        <div>\n          {\n            this.state.userExist ?\n            (<button className=\"mjl-btn btn--p-hollow m-right\" disabled>Save</button>)\n            :\n            <ConfirmBox\n              className=\"\"\n              actionId='ok'\n              handleConfirm={this.handleSubmit}\n              text=\"Save\"\n              msg=\"When you change your username, existing links to your profile will no longer work. You must update this link on any external sites.\"/>\n            // (<button className=\"mjl-btn btn--p-hollow m-right\" onClick={this.handleSubmit}>Save</button>)\n          }\n          <button className=\"mjl-btn def\" onClick={this.onCancel}>Cancel</button>\n        </div>\n      )\n    }else{\n      return <button className=\"mjl-btn def\" onClick={()=>{this.setState({editMode: true})}}>Edit Username</button>\n    }\n  }\n\n  render(){\n    return (\n      <section className=\"container--sm p-u-settings\">\n        <h1>Settings</h1>\n        <div className=\"s-block\">\n          <h2 className='b-header'>Account</h2>\n          <ul>\n            <li className=\"d--flex flex-sb flex-fw\">\n              <div className=\"f-f\">\n                <h3>Your username</h3>\n                <div>\n                  <span>{config.BASE_URL}/@</span>\n                  {\n                    this.state.editMode ?\n                    (<input maxLength=\"30\" value={this.state.username} onChange={this.onInputChange} autoComplete=\"off\"/>)\n                    :\n                    (<input maxLength=\"30\" disabled value={this.state.username}/>)\n                  }\n                </div>\n                {this._renderErrorMsg()}\n              </div>\n\n              <div className=\"u-btns\">\n                {this._renderBtn()}\n              </div>\n            </li>\n          </ul>\n        </div>\n      </section>\n    );\n  }\n\n}\n\nfunction mapStateToProps(state){\n  return { username: state.auth.authenticated.user.username}\n}\n\nexport default connect(mapStateToProps, null) (requireAuth(Settings));\n","import axios from 'axios';\nimport config from 'config.js';\n\nexport function checkAvaiblity(formData, token){\n  const headers = {'authorization': token};\n  return axios.post(config.SERVER_URL+'auth/api/user/username-check', formData, { headers });\n}\n\nexport function changeUsername(formData, token){\n  const headers = {'authorization': token};\n  return axios.post(config.SERVER_URL+'auth/api/user/change-username', formData, { headers });\n}\n","import React from 'react';\nimport { fetchUserStories } from 'services/storyService';\nimport './UserState.css';\nimport { Link } from 'react-router-dom';\nimport { utcToLocalMin } from 'services/utils';\n\nexport default class PublishedStoryList extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      stories: null\n    }\n  }\n  componentDidMount(){\n    fetchUserStories(this.props.blogger.id).then(res => {\n      this.setState({stories: res.data});\n    })\n  }\n\n  _renderProfileImage(){\n    if(this.props.blogger.profile_image){\n      return (\n        <Link to={`/@${this.props.blogger.username}`}>\n          <img src={this.props.blogger.profile_image} alt={this.props.blogger.fullname}/>\n        </Link>\n      );\n    }else{\n      const initial = this.props.blogger.fullname.charAt(0);\n      return (\n        <Link to={`/@${this.props.blogger.username}`}>\n          <div className=\"usr-p-image\"><span>{initial}</span></div>\n        </Link>\n      );\n    }\n  }\n\n  _renderStories(){\n    return this.state.stories.map(story => {\n      const storyCreationDate = utcToLocalMin(story.created_at);\n\n      return (\n        <div key={story.id} className=\"p-story-wrap\">\n          <div className=\"info-wrap d--flex\">\n            <div>{this._renderProfileImage()}</div>\n            <div className=\"usr-w\">\n              <Link to={`/@${this.props.blogger.username}`}>{this.props.blogger.fullname}</Link>\n              <span>{storyCreationDate}</span>\n            </div>\n          </div>\n          <div>\n            <Link to={`@${this.props.blogger.username}/${story.id}`}>\n              <h2>{story.title}</h2>\n              <p id=\"sDesc\" className=\"text--muted desc-s\">{story.story_summary}...</p>\n            </Link>\n          </div>\n        </div>\n      );\n    })\n  }\n\n  showStory(){\n    if(this.state.stories){\n      if(this.state.stories.length > 0){\n        return (\n          <div>\n            <h3>Latest</h3>\n            {this._renderStories()}\n          </div>\n        );\n      }else{\n        return <h3>No stories yet :(</h3>\n      }\n    }else{\n      return <h3>Loading...</h3>\n    }\n  }\n\n  render(){\n    return (\n      <section className=\"p-story-list\">\n        {this.showStory()}\n      </section>\n    );\n  }\n}\n","import React from 'react';\nimport './UserState.css';\nimport PublishedStoryList from './PublishedStoryList';\n\nexport default class UserState extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      toggleTabs : 'profile'\n    }\n  }\n\n  _renderTabs(){\n    if(this.state.toggleTabs === 'profile'){\n      return <PublishedStoryList blogger={this.props.blogger}/>\n    }\n  }\n\n  render(){\n    return (\n      <div className=\"user-state\">\n        <nav>\n          <ul className=\"list-inline\">\n            <li className=\"active\"><button className=\"mjl-btn\">Profile</button></li>\n          </ul>\n        </nav>\n        <div>\n          {this._renderTabs()}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { fetchBlogger } from 'services/bloggerService';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport './Profile.css';\nimport UserState from './includes/UserState';\n\nclass Profile extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      error:false,\n      loading: true,\n      blogger: null,\n      paramUsername: null\n    };\n  }\n  componentDidMount () {\n    this.setState({paramUsername: this.props.match.params.username}, ()=>{\n      this.getBlogger(this.state.paramUsername);\n    });\n  }\n\n  componentWillReceiveProps(nextProps){\n    this.setState({error:false});\n\n    this.setState({paramUsername: nextProps.match.params.username}, ()=>{\n      this.getBlogger(this.state.paramUsername);\n    });\n  }\n\n  getBlogger(username){\n    fetchBlogger(username).then(res => {\n      if(res.data.error){\n        this.setState({error:true});\n      }else{\n        this.setState({blogger: res.data});\n      }\n      this.setState({loading: false});\n    });\n  }\n\n  renderEditLink(){\n    if(this.state.paramUsername === this.props.username){\n      return (\n        <div>\n          <Link className=\"p-edit-btn mjl-btn btn--d-hollow\" to=\"/profile/edit\">Edit Profile</Link>\n        </div>\n      );\n    }\n  }\n\n  renderProfileImage(){\n    if(this.state.blogger.profile_image){\n      const d = new Date();\n      return <img className=\"user--pp\" src={this.state.blogger.profile_image+'?cache='+d.getTime()} alt={this.state.blogger.fullname}/>;\n    }else{\n      const initial = this.state.blogger.fullname.charAt(0);\n      return <div className=\"user--pp\">{initial}</div>;\n    }\n  }\n\n  render(){\n    if(this.state.loading){\n      return <h1>Loading...</h1>;\n    }else{\n      if(this.state.error){\n        return <h1>Page not found :(</h1>\n      }else{\n        return (\n          <div>\n            <section className=\"container--sm\">\n                <div style={{marginBottom: 30+'px'}} className=\"d--flex flex-ai-fs flex-col-rev-sm blogger-panel\">\n                  <div className=\"full-width\">\n                    <div className=\"d--flex\">\n                      <h1>{this.state.blogger.fullname}</h1>\n                      {this.renderEditLink()}\n                    </div>\n                    <div>\n                      <p className=\"textarea-u-b\">\n                        {this.state.blogger.bio}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"p-img-wrapper\">\n                    {this.renderProfileImage()}\n                  </div>\n                </div>\n                <UserState blogger={this.state.blogger}/>\n            </section>\n          </div>\n        );\n      }\n    }\n  }\n}\n\nfunction mapStateToProps(state){\n  if(state.auth.authenticated){\n    return { username: state.auth.authenticated.user.username}\n  }else{\n    return { username: null}\n  }\n}\n\nexport default connect(mapStateToProps, null) (Profile);\n","import axios from 'axios';\nimport config from 'config.js';\n\nexport function fetchBlogger(username){\n  return axios.get(config.SERVER_URL+'api/user/get-user/'+username);\n}\n","import React, { Component } from 'react';\nimport { Field, reduxForm } from 'redux-form'\nimport { Link } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'redux';\n\nclass ProfileEditForm extends Component{\n  constructor(props){\n    super(props);\n    this.state = {bioCharCount: 0};\n  }\n  renderProfileImage(){\n    if(this.props.userImageSrc){\n      return <img className=\"user--pp\" src={this.props.userImageSrc} alt={this.props.initialValues.fullname}/>;\n    }else{\n      if(this.props.initialValues.profile_image){\n        return <img className=\"user--pp\" src={this.props.initialValues.profile_image} alt={this.props.initialValues.fullname}/>;\n      }else{\n        const initial = this.props.initialValues.fullname.charAt(0);\n        return <div className=\"user--pp\">{initial}</div>;\n      }\n    }\n  }\n\n  componentDidMount(){\n    if(this.props.initialValues.bio)\n      this.setState({bioCharCount:this.props.initialValues.bio.length});\n  }\n\n  render(){\n    const { handleSubmit, submitting, invalid } = this.props;\n    return (\n      <form onSubmit={handleSubmit(this.props.onSubmit)} encType=\"multipart/form-data\">\n        <div className=\"d--flex flex-ai-fs flex-col-rev-sm\">\n          <div className=\"full-width\">\n            <div className=\"d--flex\">\n              <Field\n                name=\"fullname\"\n                component=\"input\"\n                type=\"input\"\n                className=\"input-u-n\"\n                placeholder=\"Enter your name\"\n                autoComplete=\"off\"\n              />\n            </div>\n            <div>\n              <Field\n                name=\"bio\"\n                component=\"textarea\"\n                type=\"text\"\n                rows=\"3\"\n                className=\"textarea-u-b\"\n                placeholder=\"Enter a short bio\"\n                maxLength=\"160\"\n                onChange = {\n                  e => {\n                    this.setState({bioCharCount: e.target.value.length});\n                  }\n                }\n              />\n              <small style={{marginBottom: 30+'px',display: 'block'}} className=\"text--muted\">{this.state.bioCharCount}/160</small>\n            </div>\n          </div>\n          <div className=\"p-img-wrapper\">\n            {this.renderProfileImage()}\n            <label htmlFor=\"updateUserImg\" className=\"input-p-label\">\n              <img style={{height: 100+'%',padding: 35+'px'}} src=\"/static/images/photo-camera.svg\" alt=\"Profile input\"/>\n              <input\n                type='file'\n                style={{display:'none'}}\n                onChange={this.props.handleChange}\n                id=\"updateUserImg\"\n                accept=\"image/x-png,image/gif,image/jpeg\"/>\n            </label>\n          </div>\n        </div>\n        { this.props.formSubmitting ?\n          (\n            <div className=\"lds-ellipsis\" style={{marginTop: -25+'px', marginLeft: -6+'px'}}><div></div><div></div><div></div><div></div></div>\n          )\n          :\n          (\n            <div>\n              <button type=\"submit\" disabled={invalid || submitting}  className=\"mjl-btn btn--p-hollow\">Save</button>\n              <Link\n                style={{display: 'inline-block',marginLeft: 8+'px'}}\n                className=\"mjl-btn btn--d-hollow\"\n                to={`/@${this.props.initialValues.username}`}\n                >Cancel</Link>\n            </div>\n          )\n        }\n      </form>\n    );\n  }\n}\n\nexport default compose(\n  reduxForm({\n    form: 'updateProfileForm'\n  }),\n  withRouter\n)(ProfileEditForm);\n","import React from 'react';\nimport './Modal.css';\nimport PropTypes from 'prop-types';\n\nconst Modal = (props) => {\n\n  const modalStyles = {\n    backgroundColor: props.modalBackgroundColor\n  }\n\n  if(props.modalMaxWidth)\n    modalStyles.maxWidth = props.modalMaxWidth;\n  if(props.modalHeight)\n    modalStyles.height = props.modalHeight;\n  if(props.modalWidth)\n    modalStyles.width = props.modalWidth;\n  if(props.modalNoShadow)\n    modalStyles.boxShadow = 'none';\n\n  return (\n    <div id=\"modalWrapper\">\n      <div className=\"modal--overlay\" style={{backgroundColor: props.modalOverlayColor}}></div>\n      <div className=\"modal\">\n        <div className=\"modal-dialog\" style={modalStyles}>\n          <div className=\"modal-content\">\n            <div className=\"modal-body\">\n              {\n                props.displayCloseBtn &&\n                <svg className=\"closeModal\" width=\"29\" height=\"29\" onClick={props.closeModal}>\n                  <path d=\"M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61\" fillRule=\"evenodd\"></path>\n                </svg>\n              }\n              <div className=\"modal-content-holder text-center\">\n                {props.children}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\nModal.propTypes = {\n  modalBackgroundColor: PropTypes.string.isRequired,\n  modalMaxWidth: PropTypes.string,\n  modalWidth: PropTypes.string,\n  modalHidth: PropTypes.string,\n  modalNoShadow: PropTypes.bool,\n  modalOverlayColor: PropTypes.string.isRequired,\n  displayCloseBtn: PropTypes.bool,\n  children: PropTypes.node.isRequired\n}\nexport default Modal;\n","import React, { Component } from 'react';\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport Modal from 'components/modals/Modal';\n/*\n* Demo: https://www.npmjs.com/package/react-image-crop\n* https://codesandbox.io/s/lmr9m677m\n*/\nexport default class ImageCropper extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      src: URL.createObjectURL(this.props.uploadedImage),\n      crop: {\n        aspect: 1,\n        width: 120,\n        height: 120,\n        x: 0,\n        y: 0\n      },\n      croppedImage: null\n    };\n  }\n\n  onSave = () => {\n    let { croppedImage } = this.state;\n    this.props.setUploadedImage(croppedImage);\n  }\n\n  closeModal = () => {\n    this.props.closeModal();\n  }\n\n  onImageLoaded = (image, pixelCrop) => {\n    this.imageRef = image;\n    // Make the library regenerate aspect crops if loading new images.\n    const { crop } = this.state;\n\n    if (crop.aspect && crop.height && crop.width) {\n      this.setState({\n        crop: { ...crop, height: null }\n      });\n    } else {\n      this.makeClientCrop(crop, pixelCrop);\n    }\n  };\n\n  onCropComplete = (crop, pixelCrop) => {\n    this.makeClientCrop(crop, pixelCrop);\n  };\n\n  onCropChange = crop => {\n    this.setState({ crop });\n  };\n\n  async makeClientCrop(crop, pixelCrop) {\n    if (this.imageRef && crop.width && crop.height) {\n      const croppedImage = await this.getCroppedImg(\n        this.imageRef,\n        pixelCrop,\n        \"newFile.jpeg\"\n      );\n      this.setState({ croppedImage });\n    }\n  }\n\n  getCroppedImg(image, pixelCrop, fileName) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = pixelCrop.width;\n    canvas.height = pixelCrop.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.drawImage(\n      image,\n      pixelCrop.x,\n      pixelCrop.y,\n      pixelCrop.width,\n      pixelCrop.height,\n      0,\n      0,\n      pixelCrop.width,\n      pixelCrop.height\n    );\n\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(blob => {\n        blob.name = fileName;\n        resolve(blob);\n      }, \"image/jpeg\");\n    });\n  }\n\n  render(){\n    const { crop, src } = this.state;\n\n    return (\n      <Modal closeModal={this.closeModal} modalOverlayColor=\"rgba(0,0,0,0.5)\" modalBackgroundColor=\"rgb(232, 243, 236)\" displayCloseBtn={false}>\n        <p>Create Profile Picture</p><br/>\n        {src && (\n          <ReactCrop\n            src={src}\n            crop={crop}\n            onImageLoaded={this.onImageLoaded}\n            onComplete={this.onCropComplete}\n            onChange={this.onCropChange}\n            keepSelection={true}\n          />\n        )}\n        <br/><br/>\n        <button className=\"mjl-btn btn--dark\" onClick={this.onSave}>Looks Good !</button> &nbsp;&nbsp;\n        <button className=\"mjl-btn btn--d-hollow\" onClick={this.closeModal}>Nevermind</button>\n\n      </Modal>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport { fetchBlogger, updateBlogger } from 'actions/blogger';\nimport { connect } from 'react-redux';\n\nimport ProfileEditForm from './ProfileEditForm';\nimport ImageCropper from 'components/site/utils/ImageCropper';\nimport requireAuth from 'components/requireAuth';\n\nimport config from 'config';\n\n\nclass ProfileEdit extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      error:false, loading: true, uploadedImage: null, triggerCropModal:false,userImageSrc: null,\n      inputErr: {\n        status: false,\n        message: ''\n      },\n      formSubmitting: false\n    };\n  }\n\n  componentDidMount () {\n    this.token = localStorage.getItem('token');\n    this.props.fetchBlogger(this.props.authUsername, (error)=>{\n      if(error){\n        this.setState({error:true});\n      }\n      this.setState({loading: false});\n    });\n  }\n\n\n  handleImageChange = (e) => {\n    if(e.target.files[0]){\n      let mimeType=e.target.files[0]['type'];\n      if(mimeType.split('/')[0] === 'image' && mimeType.split('/')[1] !== 'svg+xml'){\n        this.setState({uploadedImage: e.target.files[0]}, () => {\n          this.setState({triggerCropModal:true});\n        });\n      }else{\n        /*\n          Show Errror message\n        */\n        this.setState({inputErr: {message:'Please use image as your avatar.', status: true}}, () => {\n          setTimeout(()=>{\n            this.setState({inputErr: {status: false, message:'Please use image as your avatar.'}});\n          }, 3000);\n        });\n      }\n    }\n    document.getElementById('updateUserImg').value = '';\n  }\n\n  renderCropModal(){\n    if(this.state.triggerCropModal){\n      return <ImageCropper closeModal={this.closeModal} uploadedImage={this.state.uploadedImage} setUploadedImage={this.setUploadedImage}/>\n    }\n  }\n\n  setUploadedImage = image => {\n    this.setState({uploadedImage:image, userImageSrc: URL.createObjectURL(image), triggerCropModal:false});\n  }\n\n  closeModal = () => {\n    document.getElementById('updateUserImg').value = '';\n    this.setState({userImageSrc: null, uploadedImage: null}, () => {\n      this.setState({triggerCropModal:false});\n    });\n  }\n\n  onSubmit = formProps => {\n    console.log(formProps);\n    this.setState({formSubmitting: true});\n\n    let formData = new FormData();\n    Object.keys( formProps ).forEach( key => {\n      //if(formProps[key]) // Don't send properties whose value is null\n        formData.append(key, formProps[key]);\n    });\n\n    if (formData.get('fullname') === '') {\n      this.setState({inputErr: {message:'Please enter your name.', status: true}}, () => {\n        setTimeout(()=>{\n          this.setState({inputErr: {status: false, message:'Please enter your name.'}});\n        }, 3000);\n      });\n      return false;\n    }\n    formData.append(\"uploaded_image\", this.state.uploadedImage);\n\n    return this.props.updateBlogger(this.token, formData, () => {\n      const redirectTo = config.BASE_URL+'/@'+formProps.username;\n      window.location.href = redirectTo;\n    });\n  }\n\n  render(){\n    if(this.state.loading){\n      return <h1>Loading...</h1>;\n    }else{\n      if(this.state.error){\n        return <h1>Page not found :(</h1>\n      }else{\n        const errorAlertClass = this.state.inputErr.status ? 'bg--danger fixed--alert fixed--alert-active':'bg--danger fixed--alert';\n        return (\n          <div>\n            <section className=\"container--sm\">\n              <p className={errorAlertClass}>{this.state.inputErr.message}</p>\n              <ProfileEditForm\n                onSubmit={this.onSubmit}\n                initialValues={this.props.initialValues}\n                handleChange={this.handleImageChange}\n                userImageSrc={this.state.userImageSrc}\n                formSubmitting={this.state.formSubmitting}/>\n              {this.renderCropModal()}\n            </section>\n          </div>\n        );\n      }\n    }\n  }\n}\n\nfunction mapStateToProps(state){\n  if(state.auth.authenticated){\n    return { initialValues: state.blogger.info, authUsername: state.auth.authenticated.user.username}\n  }else{\n    return { initialValues: state.blogger.info, authUsername: null}\n  }\n}\n\nexport default connect(mapStateToProps, {fetchBlogger, updateBlogger})( requireAuth(ProfileEdit));\n","import { GET_BLOGGER } from './types';\nimport config from 'config';\nimport axios from 'axios';\n\nexport const fetchBlogger = (username, callback) => async dispatch => {\n  try{\n    const response = await axios.get(`${config.SERVER_URL}api/user/get-user/${username}`);\n    if(response.data.error)\n      throw new Error('User Not Found');\n    dispatch({type: GET_BLOGGER, payload: response.data});\n    callback(false);\n  }catch(e){\n    dispatch({type: GET_BLOGGER, payload: null});\n    callback(true);\n  }\n}\n\nexport const updateBlogger = (token, formProps, callback) => async dispatch => {\n  const headers = {'authorization': token};\n  await axios.put(config.SERVER_URL+'auth/api/user/edit', formProps,  { headers });\n  dispatch({type: 'UPDATE', payload: null});\n  callback();\n};\n","import React from 'react';\nimport 'font-awesome/css/font-awesome.min.css';\nimport './Editor.css';\n/*\n* Shifted to bitbucket\n*/\nexport default class EditorActionBox extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      showLinkInput: false,\n      link:'',\n      currentSelection: null\n    }\n  }\n\n  handleLinkChange = (e) => {\n    this.setState({link: e.target.value});\n  }\n\n  onLinkSubmit = (e) => {\n    e.preventDefault();\n    let prefix = ['http://', 'https://'];\n    let link = this.state.link;\n    if (link.substr(0, prefix[0].length) === prefix[0] || link.substr(0, prefix[1].length) === prefix[1]){\n    }else{\n      link = prefix[0] + link;\n    }\n\n    // Restoring user selection which gets lost when user click on input to write url\n    this.restoreSelection(this.state.currentSelection);\n    var sText = document.getSelection();\n    document.execCommand('insertHTML', false, '<a href=\"' + link + '\" rel=\"noopener noreferrer\" target=\"_blank\">' + sText + '</a>');\n\n    this.props.hideEditorBox();\n  }\n\n  /*\n  * https://stackoverflow.com/questions/3315824/preserve-text-selection-in-contenteditable-while-interacting-with-jquery-ui-dial\n  */\n  saveSelection() {\n    if (window.getSelection) {\n          let sel = window.getSelection();\n          if (sel.getRangeAt && sel.rangeCount) {\n              return sel.getRangeAt(0);\n          }\n      } else if (document.selection && document.selection.createRange) {\n          return document.selection.createRange();\n      }\n      return null;\n  }\n\n  restoreSelection(range) {\n      if (range) {\n          if (window.getSelection) {\n              let sel = window.getSelection();\n              sel.removeAllRanges();\n              sel.addRange(range);\n          } else if (document.selection && range.select) {\n              range.select();\n          }\n      }\n  }\n\n  renderHyperLinkButton(){\n    /*\n    * Get wwhat user has currently selected\n    * Checks if user has selected a text or at empty space\n    *   If user has selected an empty space then link buttons will not be rendered\n    * Checks if user has selected a hyperlink or normal text\n    */\n    const selectionNode = document.getSelection().anchorNode;\n    if(selectionNode.nodeValue){\n      if(selectionNode.parentNode.localName === 'a'){\n        return (\n          <EditButton\n            cmd=\"unlink\"\n            name=\"unlink\"\n          />\n        )\n      }else{\n        return (\n          <button onClick={()=>{\n            // Storing current selection\n            const currentSelection  = this.saveSelection();\n            this.setState({showLinkInput: true, currentSelection});\n          }} className=\"btn-chromeless\"><i className=\"fa fa-link\"></i></button>\n        );\n      }\n    }\n\n  }\n\n  render(){\n    return (\n      <div id=\"editorBox\" style={{transform: `translate(${this.props.clientX}px, ${this.props.clientY}px)`}}>\n        {this.state.showLinkInput ?\n          (\n            <form onSubmit={this.onLinkSubmit} className=\"input-e-l d--flex\">\n              <input type=\"text\" onChange={this.handleLinkChange} placeholder=\"Type or paste your link\"/>\n              <button type=\"button\" onClick={()=>{ this.setState({showLinkInput:false, link:''}) }} className=\"btn-chromeless\">x</button>\n            </form>\n          )\n          :\n          (\n            <div className=\"action-btns\">\n              <EditButton cmd=\"bold\" name=\"bold\" />\n              <EditButton cmd=\"italic\" name=\"italic\"/>\n              <EditButton cmd=\"formatBlock\" arg=\"<h1>\" name=\"text\" />\n              <EditButton btnClass=\"font-sm\" cmd=\"fontSize\" arg=\"2\" name=\"text\" />\n              <EditButton cmd=\"formatBlock\" arg=\"<blockquote>\" name='quote' />\n\n              <EditButton cmd=\"insertHTML\" arg=\"&zwnj;<pre><div>&zwnj;\" name=\"code\" />\n              <EditButton cmd=\"insertUnorderedList\" name=\"list\" />\n              <EditButton\n                cmd=\"backColor\"\n                arg=\"#FFF176\"\n                name=\"highlight\"\n              />\n              {this.renderHyperLinkButton()}\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nfunction EditButton(props) {\n  const btnClass = !props.btnClass ? 'btn-chromeless' : `btn-chromeless ${props.btnClass}`;\n  return (\n    <button\n      type=\"button\"\n      key={props.cmd}\n      className={btnClass}\n      onMouseDown={evt => {\n        evt.preventDefault(); // Avoids loosing focus from the editable area\n        document.execCommand(props.cmd, false, props.arg); // Send the command to the browser\n      }}\n    >\n      <RenderEditorBtntext name={props.name}/>\n    </button>\n  );\n}\n\nfunction RenderEditorBtntext(props){\n  switch (props.name) {\n    case 'quote':\n      return <i className=\"fa fa-quote-left\"></i>\n    case 'code':\n      return <i className=\"fa fa-code\"></i>\n    case 'text':\n      return <i className=\"fa fa-font\"></i>\n    case 'bold':\n      return <i className=\"fa fa-bold\"></i>\n    case 'italic':\n      return <i className=\"fa fa-italic\"></i>\n    case 'highlight':\n      return <i className=\"fa fa-i-cursor\"></i>\n    case 'unlink':\n      return <i className=\"fa fa-unlink\"></i>\n    case 'list':\n      return <i className=\"fa fa-list-ul\"></i>\n    default:\n      return props.name;\n  }\n}\n","export const validateImage = (image) => {\n  if(image){\n    let mimeType=image['type'];\n    if(mimeType.split('/')[0] === 'image'){\n      return true;\n    }\n  }\n  return false;\n}\n","import React, { Component } from 'react';\nimport { uploadStoryImage } from 'services/blogImageService';\nimport { validateImage } from 'components/site/utils/validateImage';\n\nexport default class FloatingBar extends Component{\n  constructor(){\n    super();\n    this.state = {\n      error: {\n        status: false,\n        message: ''\n      }\n    }\n  }\n\n  componentDidMount(){\n    this.userToken = localStorage.getItem('token');\n  }\n\n  /*\n  * https://stackoverflow.com/questions/3315824/preserve-text-selection-in-contenteditable-while-interacting-with-jquery-ui-dial\n  */\n  saveSelection() {\n    if (window.getSelection) {\n      let sel = window.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        return sel.getRangeAt(0);\n      }\n    } else if (document.selection && document.selection.createRange) {\n      return document.selection.createRange();\n    }\n    return null;\n  }\n\n  restoreSelection(range) {\n    if (range) {\n      if (window.getSelection) {\n          let sel = window.getSelection();\n          sel.removeAllRanges();\n          sel.addRange(range);\n      } else if (document.selection && range.select) {\n        range.select();\n      }\n    }\n  }\n\n  handleFile = (e) => {\n    const image = e.target.files[0];\n    if(image){\n      if(validateImage(image)){\n        if(image.size < 1000000){\n          let formData = new FormData();\n          formData.append(\"storyImage\", image);\n          this.props.imageIsUploading();\n          uploadStoryImage(formData, this.userToken, this.props.blogId).then(res=>{\n            const src = res.data.story_image;\n            this.restoreSelection(this.currentSelection);\n            document.execCommand('insertHTML', false, '<img src=\"' + src + '\" class=\"img-responsive\"/>');\n            this.props.imageUploadCompleted();\n          });\n        }else{\n          this.setState({error: {status: true, message: 'Please use image less than 1 MB'}}, ()=>{\n            setTimeout(()=>{\n              this.setState({error: {status: false, message:'Please use image less than 1 MB'}});\n            }, 3000);\n          });\n        }\n      }else{\n\n        this.setState({error: {status: true, message: 'Please upload image only'}}, ()=>{\n          setTimeout(()=>{\n            this.setState({error: {status: false, message:'Please upload image only'}});\n          }, 3000);\n        });\n\n      }\n    }\n  }\n\n  handleInputBtnClick = () => {\n    this.currentSelection = this.saveSelection();\n    document.getElementById('editorImgInput').click();\n  }\n\n\n  __render(){\n    const editor = document.getElementById('storyBox');\n    const documentWidth = document.body.clientWidth;\n    const editorWidth = editor.clientWidth;\n    const offset = (documentWidth-editorWidth)/2; // Divide by 2 so that we can get offset from left\n    const floatX = offset+editorWidth;\n\n    if(this.props.imageUploadStatus){\n      return <div id=\"floatSpinner\" className=\"mjl-lds-circle\" style={{transform: `translate(${floatX}px, ${0})`}}><div></div></div>\n    }else{\n      return (\n        <div id=\"editorFloatBar\" style={{transform: `translate(${floatX}px, ${0})`}}>\n          <button id=\"floatImgInputBtn\" onClick={this.handleInputBtnClick} className=\"edit-float-btn btn-chromeless\">\n\n              <svg className=\"svgIcon-use\" width=\"25\" height=\"25\">\n                <g fillRule=\"evenodd\">\n                  <path d=\"M4.042 17.05V8.857c0-1.088.842-1.85 1.935-1.85H8.43C8.867 6.262 9.243 5 9.6 5.01L15.405 5c.303 0 .755 1.322 1.177 2 0 .077 2.493 0 2.493 0 1.094 0 1.967.763 1.967 1.85v8.194c-.002 1.09-.873 1.943-1.967 1.943H5.977c-1.093.007-1.935-.85-1.935-1.937zm2.173-9.046c-.626 0-1.173.547-1.173 1.173v7.686c0 .625.547 1.146 1.173 1.146h12.683c.625 0 1.144-.53 1.144-1.15V9.173c0-.626-.52-1.173-1.144-1.173h-3.025c-.24-.63-.73-1.92-.873-2 0 0-5.052.006-5 0-.212.106-.87 2-.87 2l-2.915.003z\">\n                  </path>\n                  <path d=\"M12.484 15.977a3.474 3.474 0 0 1-3.488-3.49A3.473 3.473 0 0 1 12.484 9a3.474 3.474 0 0 1 3.488 3.488c0 1.94-1.55 3.49-3.488 3.49zm0-6.08c-1.407 0-2.59 1.183-2.59 2.59 0 1.408 1.183 2.593 2.59 2.593 1.407 0 2.59-1.185 2.59-2.592 0-1.406-1.183-2.592-2.59-2.592z\">\n                  </path>\n                </g>\n              </svg>\n            <input id=\"editorImgInput\" style={{display: 'none'}} type=\"file\" onChange={this.handleFile} accept=\"image/png,image/jpeg\"/>\n\n          </button>\n        </div>\n      );\n    }\n  }\n\n  render(){\n    const errorAlertClass = this.state.error.status ? 'bg--danger fixed--alert fixed--alert-active':'bg--danger fixed--alert';\n\n    return (\n      <div>\n        <p className={errorAlertClass}>{this.state.error.message}</p>\n        {this.__render()}\n      </div>\n    );\n  }\n}\n","import axios from 'axios';\nimport config from 'config.js';\n\nexport function uploadStoryImage(formData, token, blogId){\n  const headers = {'authorization': token};\n  return axios.post(config.SERVER_URL+'auth/blog/action/upload-image/'+blogId, formData, { headers });\n}\n","import React from 'react';\nimport ContentEditable from 'react-contenteditable'; //https://github.com/lovasoa/react-contenteditable\nimport EditorActionBox from './editorBox/EditorActionBox';\nimport FloatingButton from './editorBox/FloatingButton';\n\nexport default class StoryForm extends React.Component{\n  constructor() {\n    super();\n    this.state = {\n      showEditorBox: null,\n      showFloatingButton: false,\n      imageIsUploading: false\n    }\n  };\n\n  componentDidMount(){\n    document.addEventListener('click', this.handleFloatingBar, true);\n  }\n\n  componentWillUnmount(){\n    document.removeEventListener('click', this.handleFloatingBar, true);\n    document.removeEventListener('click', this.hideEditorBox, true);\n  }\n\n  renderPostPlaceHolder(){\n    if(this.props.blog.draft === '')\n      return <span style={{position:'absolute',top:-5+'px',left:0,fontSize: 22+'px',zIndex: -1}} className=\"text--muted\">Tell us your story...</span>\n  }\n\n  hideEditorBox = (e) => {\n    const node = document.getElementById('editorBox');\n    // If user clicks outside editorBox\n    if(node && !node.contains(e.srcElement)){\n      setTimeout(()=>{\n        this.setState({showEditorBox:null}, ()=>{\n          document.removeEventListener('click', this.hideEditorBox, true);\n        });\n      }, 100);\n    }\n  }\n\n  instantHideEditBox = () => {\n    this.setState({showEditorBox:null});\n  }\n\n  onTextSelection = (e) => {\n    const selectedText = window.getSelection();\n    if(selectedText && selectedText.toString() !== ''){\n      this.setState({\n        showEditorBox: {\n          clientX: e.pageX,\n          clientY: e.pageY\n        }\n      }, () => {\n        /*\n        * Adding timeout of 100 so that the event listner\n        * Gets added after we trigger the text selection\n        */\n        setTimeout(()=>{\n          document.addEventListener('click', this.hideEditorBox, true);\n        }, 100);\n      })\n    }\n  }\n\n  handleFloatingBar = e => {\n    const editor = document.getElementById('storyBox');\n    const floatingBar = document.getElementById('editorFloatBar');\n    if(editor && editor.contains(e.target)){\n      this.setState({showFloatingButton:true});\n    }else{\n      if(floatingBar && floatingBar.contains(e.target)){\n        // Do nothing\n      }else{\n        this.setState({showFloatingButton:false});\n      }\n    }\n  }\n\n  imageIsUploading = () => {\n    this.setState({imageIsUploading: true})\n  }\n\n  imageUploadCompleted = () => {\n    this.setState({imageIsUploading: false})\n  }\n\n  render(){\n    return (\n      <div>\n        <input className=\"input-story-t\" type=\"text\" placeholder=\"Title\" value={this.props.blog.title_draft} onChange={this.props.handleTitleChange}/>\n        <div style={{position:'relative'}}>\n          {this.renderPostPlaceHolder()}\n          <ContentEditable\n            id=\"storyBox\"\n            className=\"input-story-p\"\n            innerRef={this.contentEditable}\n            html={this.props.blog.draft}\n            disabled={false}\n            onMouseUp = {this.onTextSelection}\n            onChange={this.props.handlePostChange}\n            />\n            {this.props.blog.id && this.state.showFloatingButton && <FloatingButton\n                                                blogId={this.props.blog.id}\n                                                imageUploadStatus={this.state.imageIsUploading}\n                                                imageIsUploading={this.imageIsUploading}\n                                                imageUploadCompleted={this.imageUploadCompleted}/>}\n        </div>\n        { this.state.showEditorBox && <EditorActionBox\n                                        hideEditorBox = {this.instantHideEditBox}\n                                        clientX={this.state.showEditorBox.clientX}\n                                        clientY={this.state.showEditorBox.clientY}/>}\n      </div>\n    );\n  }\n}\n","import axios from 'axios';\nimport config from 'config.js';\n\nexport function writePost(formData, token){\n  const headers = {'authorization': token};\n  return axios.post(config.SERVER_URL+'auth/blog/create-blog',formData, { headers });\n}\n\nexport function publishPost(token, blogId){\n  const headers = {'authorization': token};\n  return axios.post(config.SERVER_URL+'auth/blog/action/publish/'+blogId, null, { headers });\n}\n\nexport function fetchPost(id, token){\n  const headers = {'authorization': token};\n  return axios.get(config.SERVER_URL+'auth/blog/action/get/'+id, { headers });\n}\n\nexport function getUserStoriesCount(token){\n  const headers = {'authorization': token};\n  return axios.get(config.SERVER_URL+'auth/blog/get/blog-count/', { headers });\n}\n\nexport function getUserPost(token, status){\n  const headers = {'authorization': token};\n  return axios.get(config.SERVER_URL+'auth/api/user/blogs/'+status, { headers });\n}\n\nexport function uploadStoryImage(formData, token, blogId){\n  const headers = {'authorization': token};\n  return axios.post(config.SERVER_URL+'auth/blog/action/upload-thumbnail/'+blogId, formData, { headers });\n}\n\nexport function removeStoryImage(token, blogId){\n  const headers = {'authorization': token};\n  return axios.delete(config.SERVER_URL+'auth/blog/action/remove-thumbnail/'+blogId, { headers });\n}\n\nexport function deleteStory(token, blogId){\n  const headers = {'authorization': token};\n  return axios.delete(config.SERVER_URL+'auth/blog/action/delete/'+blogId, { headers });\n}\n","import React from 'react';\nimport Dropzone from 'react-dropzone';\nimport PropTypes from 'prop-types';\nimport { fetchPost, uploadStoryImage, removeStoryImage } from 'services/blogService';\n\nclass HandleThumbnail extends React.Component{\n\n  constructor(){\n    super();\n    this.state = {\n      image: null,\n      dropHovered: false,\n      imageFilePreview: null,\n      disableDropzone: false,\n      error: {\n        show: false,\n        message: ''\n      },\n      showImageUploading: false\n    }\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  componentDidMount(){\n    this.token = localStorage.getItem('token');\n    fetchPost(this.props.blogId, this.token).then(res => {\n      const {blogThumbnails} = res.data.blog;\n      if(blogThumbnails.length>0){\n        const {story_thumb} = blogThumbnails[0];\n        this.setState({imageFilePreview: story_thumb+'?'+Date.now(), disableDropzone: true});\n      }\n    });\n  }\n\n  onDrop(acceptedFile, rejectedFile) {\n    this.setState({dropHovered: false});\n    /*\n    * If none file were rejected\n    * All files will be rejected if multiple files were dropped\n    */\n    if(rejectedFile.length > 0){\n      this.setState({error: {show: true, message:'Please upload a single image file.'} }, () => {\n        setTimeout(()=>{\n          this.setState({error: {...this.state.error, show:false}});\n        }, 3000)\n      });\n    }else{\n      if(acceptedFile[0].size < 1000000){\n        this.handleImageUpload(acceptedFile[0]);\n\n      }else{\n        this.setState({error: {show: true, message:'Please use image less than 1 MB'} }, () => {\n          setTimeout(()=>{\n            this.setState({error: {...this.state.error, show:false}});\n          }, 3000)\n        });\n      }\n    }\n  }\n\n  onCancel = () => {\n    this.handleImageDelete();\n  }\n\n  handleImageUpload(image){\n    let formData = new FormData();\n    formData.append(\"storyImage\", image);\n    this.setState({showImageUploading: true});\n    uploadStoryImage(formData, this.token, this.props.blogId).then(res=>{\n      this.setState({\n        imageFilePreview: res.data[0].story_thumb,\n        disableDropzone: true,\n        showImageUploading: false\n      });\n    });\n  }\n\n  handleImageDelete(){\n    removeStoryImage(this.token, this.props.blogId);\n    this.setState({\n      imageFilePreview: null,\n      disableDropzone: false,\n    });\n  }\n\n  render(){\n    const dropZoneClass = this.state.dropHovered ? 'border-p-color p-modal-image-drop' : 'p-modal-image-drop';\n    const errorAlertClass = this.state.error.show ? 'bg--danger fixed--alert fixed--alert-active':'bg--danger fixed--alert';\n    return (\n      <div>\n        <p className={errorAlertClass}>{this.state.error.message}</p>\n\n        <h2>Story Thumbnail</h2>\n        <p>Setup a thumbnail picture that goes well with your story.</p>\n\n        <Dropzone\n          accept=\"image/png,image/jpeg\"\n          onDrop={this.onDrop}\n          multiple={false}\n          disabled={this.state.disableDropzone}\n          onDragEnter={()=>{\n            this.setState({dropHovered: true});\n          }}\n          onDragLeave={()=>{\n            this.setState({dropHovered: false});\n          }}\n        >\n          {({getRootProps, getInputProps}) => (\n            <div {...getRootProps()} className={dropZoneClass}>\n              <input {...getInputProps()} />\n              {\n                this.state.imageFilePreview ?\n                (\n                  <div className=\"thumb-wrapper\">\n                    <button className=\"thumb-del-btn btn-chromeless\" onClick={this.onCancel}><span>x</span></button>\n                    <img src={this.state.imageFilePreview} className=\"thumbnail-img\" alt=\"story-thumbnail\"/>\n                  </div>\n                )\n                :\n                this.state.showImageUploading ? (<span className=\"drop-caption\">Image uploading Please wait...</span>)\n                :\n                (<span className=\"drop-caption\">{this.state.dropHovered ? 'Drop your thumbnail.' : 'Include a high-quality image in your story to make it more inviting to readers.'}</span>)\n              }\n            </div>\n          )}\n        </Dropzone>\n      </div>\n    );\n  }\n}\n\nHandleThumbnail.propTypes = {\n  blogId: PropTypes.number.isRequired\n}\n\nexport default HandleThumbnail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { addBlogTag, removeBlogTag, getBlogTag } from 'services/blogTagService';\n\nclass HandleTags extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      tags: [],\n      inputText: ''\n    }\n  }\n  componentDidMount(){\n    this.blogId = this.props.blogId;\n    this.token = localStorage.getItem('token');\n\n    getBlogTag(this.token, this.blogId).then(res => {\n      this.setState({tags: res.data});\n    });\n  }\n\n  handleTagAdd = (tag) => {\n    let formData = new FormData();\n    formData.append('tag', tag);\n    addBlogTag(formData, this.token, this.blogId).then(res => {\n      this.setState({\n        tags: res.data\n      });\n    });\n  }\n\n  handleTagRemove = (tagId) => {\n    removeBlogTag(tagId, this.token, this.blogId).then(res => {\n      this.setState({\n        tags: res.data\n      });\n    });\n  }\n\n  handleChange = (e) => {\n    this.setState({inputText: e.target.value}, ()=>{\n      const val = this.state.inputText;\n      // Checking for comma\n      if (val.indexOf(',') !== -1) {\n        const tag = val.split(',')[0];\n        if(tag !== \"\"){ // If not empty\n          this.handleTagAdd(tag);\n          this.setState({inputText: ''});\n        }\n      }\n    });\n  }\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    if (this.state.inputText !== \"\") { // If not empty\n      this.handleTagAdd(this.state.inputText);\n      this.setState({inputText: ''});\n    }\n  }\n\n  renderTags(){\n    return this.state.tags.map((tagObj, index) =>\n      <div className=\"tag-elem\" key={index}>{tagObj.tag}\n        <button className=\"btn-chromeless\"\n          onClick={()=>{\n            this.handleTagRemove(tagObj.id);\n          }}>x</button>\n      </div>\n    )\n  }\n\n  render(){\n    return (\n      <div className=\"handleTags\">\n        <h2>Prepare your story for readers</h2>\n        <p>Add or change tags (up to 5) so readers know what your story is about</p>\n        <p>Review Threadly’s <a target=\"_blank\" href=\"/threadly/policy\" style={{textDecoration:'underline'}}>rules</a> to ensure that your story meets our community standards.</p>\n        <br/>\n          <div className=\"p-add-tags\">\n            <div className=\"tags-wrapper\" style={{display: 'inline-block'}}>\n              {this.renderTags()}\n            </div>\n            <div className=\"c-input-wrap\">\n              {this.state.tags.length < 5 && (\n                <form onSubmit={this.onSubmit}>\n                  <input value={this.state.inputText} onChange={this.handleChange} placeholder=\"Add a tag...\" id=\"tagEditor\" autoComplete=\"off\"/>\n                </form>\n              )}\n            </div>\n          </div>\n      </div>\n    );\n  }\n}\n\nHandleTags.propTypes = {\n  blogId: PropTypes.number.isRequired\n}\n\nexport default HandleTags;\n","import axios from 'axios';\nimport config from 'config.js';\n\nexport function addBlogTag(formData, token, blogId){\n  const headers = {'authorization': token};\n  return axios.post(config.SERVER_URL+'auth/blog/action/publish/add-tag/'+blogId, formData, { headers });\n}\n\nexport function removeBlogTag(tagId, token, blogId){\n  const headers = {'authorization': token};\n  return axios.delete(config.SERVER_URL+`auth/blog/action/publish/remove-tag/${blogId}/${tagId}`, { headers });\n}\n\nexport function getBlogTag(token, blogId){\n  const headers = {'authorization': token};\n  return axios.get(config.SERVER_URL+'auth/blog/action/publish/get-tag/'+blogId, { headers });\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { store } from 'index';\nimport { Router } from 'react-router-dom';\nimport { history } from 'index';\nimport Modal from 'components/modals/Modal';\nimport './StoryPublish.css';\nimport HandleThumbnail from './HandleThumbnail';\nimport HandleTags from './HandleTags';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport config from 'config';\nimport { publishPost } from 'services/blogService';\n\nclass PublishModal extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      formSubmitted: false\n    }\n  }\n\n  componentDidMount(){\n    this.modalTarget = document.createElement('div');\n    document.body.appendChild(this.modalTarget);\n    this._render();\n  }\n\n  componentWillUnmount(){\n    ReactDOM.unmountComponentAtNode(this.modalTarget);\n    document.body.removeChild(this.modalTarget);\n  }\n\n  handleSubmit = () => {\n    if(!this.state.formSubmitted){\n      const {blogId}  = this.props;\n\n      this.setState({formSubmitted: true}, ()=>{\n        this._render();\n      });\n\n      const token = localStorage.getItem('token');\n      publishPost(token, blogId).then((res)=>{\n        const redirectTo = config.BASE_URL+'/@'+this.props.username+'/'+blogId;\n        window.location.href = redirectTo;\n      });\n    }\n  }\n\n  handleImageChange = (image) => {\n    this.setState({image}, ()=>{\n      this._render();\n    });\n  }\n\n  createModal(){\n    return (\n      <Modal\n      modalBackgroundColor='#fff'\n      modalOverlayColor='#fff'\n      modalMaxWidth='1040px'\n      modalHeight='100%'\n      modalWidth='100%'\n      modalNoShadow={true}\n      displayCloseBtn={true}\n      closeModal={this.props.closeModal}\n      >\n        <section className=\"publish-modal-s\">\n          <div className=\"d--flex d--flex-row-md flex-sb p--row\" style={{marginTop: 35+'px'}}>\n\n            <div className=\"text--left\">\n              <HandleThumbnail blogId={this.props.blogId}/>\n            </div>\n\n            <div className=\"text--left\">\n              <HandleTags blogId={this.props.blogId}/>\n              <br/>\n\n              {\n                this.state.formSubmitted ?\n                (<div className=\"lds-ellipsis\" style={{marginTop: -25+'px', marginLeft: -6+'px'}}><div></div><div></div><div></div><div></div></div>)\n                :\n                (<button onClick={this.handleSubmit} className=\"mjl-btn btn--primary\">Publish Now</button>)\n              }\n            </div>\n          </div>\n        </section>\n      </Modal>\n    );\n  }\n\n  _render(){\n    ReactDOM.render(\n      <Provider store={store}>\n        <Router history={history}>\n          {this.createModal()}\n        </Router>\n      </Provider>,\n      this.modalTarget,\n    );\n  }\n  render(){\n    return <noscript/>\n  }\n}\n\nPublishModal.propTypes = {\n  blogId: PropTypes.number.isRequired,\n  closeModal: PropTypes.func.isRequired,\n}\n\nfunction mapStateToProps(state){\n  return {username: state.auth.authenticated.user.username};\n}\n\nexport default connect(mapStateToProps, null)(PublishModal);\n","import React from 'react';\nimport './StoryPublish.css';\nimport PublishModal from './PublishModal';\n\nexport default class StoryPublish extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      noStoryError: false,\n      displayModal: false\n    }\n  }\n  handlePublishClick = () => {\n    if(this.props.blog.title === '' || this.props.blog.draft === ''){\n      this.setState({noStoryError: true}, () => {\n        setTimeout(() => {\n          this.setState({noStoryError: false});\n        }, 3000);\n      });\n    }else{\n      this.setState({displayModal: true})\n    }\n  }\n  renderSavingState(){\n    if(this.props.savingState === 'saving'){\n      return <span>Saving</span>;\n    }else if(this.props.savingState === 'saved'){\n      return <span>Saved</span>\n    }\n  }\n\n  closeModal = () => {\n    this.setState({displayModal:false});\n  }\n\n  renderNoStoryError(){\n    if(this.state.noStoryError){\n      return (\n        <div id=\"noStoryError\">\n          <p>Publishing will become available once you add title and story.</p>\n        </div>\n      );\n    }\n  }\n\n  renderModal(){\n    if(this.state.displayModal){\n      return (\n        <PublishModal blogId={this.props.blog.id} closeModal={this.closeModal}/>\n      )\n    }\n  }\n\n  render(){\n    return (\n      <div className=\"d--flex flex-sb\" style={{alignItems: 'flex-end'}}>\n        <div className=\"text--muted\">\n          {this.renderSavingState()}\n        </div>\n        <div style={{position: 'relative'}}>\n          <button onClick={this.handlePublishClick} className=\"mjl-btn-sm mjl-btn btn--p-hollow\">Ready To Publish?</button>\n          {this.renderNoStoryError()}\n        </div>\n        {this.state.displayModal && this.renderModal()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './WriteStory.css';\nimport StoryForm from './StoryForm';\nimport StoryPublish from './publishStory/StoryPublish';\nimport { writePost, fetchPost } from 'services/blogService';\nimport requireAuth from 'components/requireAuth';\n\nclass WriteStory extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      blog: {\n        id: null,\n        title_draft: '',\n        draft:''\n      },\n      savingState: 'onhold',\n      renderError: false,\n      loading: true\n    }\n  }\n\n  componentDidMount(){\n    // To delay blog data send\n    this.timeout =  0;\n    this.userToken = localStorage.getItem('token');\n\n    // If component is mounted through edit section\n    const postId = this.props.match.params.postId;\n    // If component is rendered through editing page\n    if(postId){\n      this.getPost(postId);\n    }else{\n      this.setState({loading:false})\n    }\n  }\n\n  /*\n  * componentWillReceiveProps works well in this case as it receives a new props from history api\n  * Whenever the url changes\n  * Triggering another props receving action from here will create an infinite loop\n  */\n  componentWillReceiveProps(nextProps){\n    this.setState({renderError: false, loading:true}, () => {\n      let { path } = nextProps.match;\n      if(path === '/new-story'){\n        // User navigated to new story Page\n        this.setState({\n          blog: { id: null, title_draft: '', draft:''},\n          loading: false\n        });\n      }else{\n        // User navigated to Edit Page\n        const postId = this.props.match.params.postId;\n        if(postId)\n          this.getPost(postId);\n      }\n    });\n  }\n\n  getPost(id){\n    fetchPost(id, this.userToken)\n      .then(res => {\n        let post = res.data.blog; // returns null if post doesn't exist or belongs to another user\n        if(post){\n          this.setState({\n            blog: post,\n            loading: false\n          });\n        }else{\n          this.setState({renderError: true});\n        }\n      });\n  }\n\n\n  handleTitleChange = (e) => {\n    this.setState({\n      blog: {...this.state.blog, title_draft: e.target.value}\n    }, this.saveBlog());\n  }\n\n  handlePostChange = (e) => {\n    this.setState({\n      blog: {...this.state.blog, draft: e.target.value}\n    }, this.saveBlog());\n  }\n\n  saveBlog = () => {\n    if(this.timeout) clearTimeout(this.timeout);\n    this.timeout = setTimeout(() => {\n\n      let formData = new FormData();\n      formData.append(\"title\", this.state.blog.title_draft);\n      formData.append(\"post\", this.state.blog.draft);\n      formData.append(\"postId\", this.state.blog.id);\n      this.setState({savingState: 'saving'});\n      // If postId is null a new post is created else blog will get updated\n      writePost(formData, this.userToken)\n        .then((response) => {\n          this.setState({savingState: 'saved'}, () => {\n            // If post is newly created, id is returned\n            let id = response.data.postId;\n            if(id){\n              this.setState({ blog: {...this.state.blog, id} }, ()=>{\n                this.props.history.push(`/p/${id}/edit`);\n              });\n            }\n          });\n\n        });\n    }, 800);\n  }\n\n\n\n  render(){\n    if(this.state.renderError){\n      return (\n        <h1>Page not found :(</h1>\n      );\n    }else{\n      if(this.state.loading){\n        return <h3>Loading...</h3>;\n      }else{\n        return (\n          <section className=\"container--sm\">\n            <StoryPublish savingState={this.state.savingState} blog={this.state.blog}/>\n\n            <StoryForm\n              handlePostChange={this.handlePostChange}\n              handleTitleChange={this.handleTitleChange}\n              blog={this.state.blog}/>\n\n          </section>\n        );\n      }\n    }\n  }\n}\n\nexport default requireAuth(WriteStory);\n","import React from 'react';\nimport { getUserPost, deleteStory } from 'services/blogService';\nimport { utcToLocal } from 'services/utils';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport ConfirmBox from 'components/site/utils/ConfirmBox';\n\nclass UserStories extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      blogs: null,\n      showStories: null,\n      tooltip: null,\n    }\n  }\n\n  componentDidMount(){\n    this.setState({showStories: this.props.showStories}, ()=>{\n      this.fetchPosts();\n    })\n  }\n\n  componentWillReceiveProps(nextProps){\n    this.setState({showStories: nextProps.showStories, blogs: null}, ()=>{\n      this.fetchPosts();\n    })\n  }\n\n  async fetchPosts(){\n    this.userToken = localStorage.getItem('token');\n    let blogs = [];\n    let status;\n    if(this.state.showStories === 'drafts'){\n      status = false;\n    }else{\n      status = true;\n    }\n    await getUserPost(this.userToken, status)\n      .then(res => {\n        res.data.forEach(blog => {\n          blogs.push(blog);\n        });\n      });\n    this.setState({blogs});\n  }\n\n  createToolTipProps = (e) => {\n    let postId = e.currentTarget.getAttribute('data-attr-id');\n    const id = e.currentTarget.id;\n    if(id){\n      // tooltip logic\n      const btn = document.getElementById(id);\n      const offsetLeft = btn.offsetLeft;\n      const offsetTop = btn.offsetTop;\n      this.setState({\n        tooltip: {\n          id: postId,\n          offsetLeft,\n          offsetTop\n        }\n      });\n    }\n  }\n\n  hideTooltip = () => {\n    this.setState({tooltip: null});\n  }\n\n  renderTooltip(){\n    const styles = {\n      transform: `translate(${this.state.tooltip.offsetLeft}px, ${this.state.tooltip.offsetTop}px)`\n    };\n    return (\n      <div>\n        <div id=\"s-tooltipOverlay\" onClick={this.hideTooltip}></div>\n        <ul className=\"s-l-tooltip list-n-block\" style={styles}>\n          <li><Link to={`/p/${this.state.tooltip.id}/edit`}>Edit Story</Link></li>\n          <ConfirmBox\n            className=\"Helo\"\n            onMount={this.hideTooltip}\n            actionId={this.state.tooltip.id}\n            handleConfirm={this.handleStoryDelete}\n            text=\"Delete Story\"\n            msg=\"Deleted stories are gone forever. Are you sure?\"/>\n        </ul>\n      </div>\n    );\n  }\n\n  handleStoryDelete = (blogId) => {\n    deleteStory(this.userToken, blogId).then(()=>{\n      this.fetchPosts();\n    });\n  }\n\n  _renderBlogTitle(blog){\n    if(this.state.showStories === 'drafts'){\n      return (\n        <Link to={`/p/${blog.id}/edit`}>\n          <h3>{blog.title_draft.length > 0 ? blog.title_draft : 'Untitled Story'}</h3>\n        </Link>\n      );\n    }else{\n      return (\n        <Link to={`/@${this.props.username}/${blog.id}`}>\n          <h3>{blog.title_draft}</h3>\n        </Link>\n      );\n    }\n  }\n\n  renderPosts(){\n    const { blogs } = this.state;\n    if(blogs){\n      if(blogs.length > 0){\n        const listItems = blogs.map((blog) =>{\n          const timeStamp = utcToLocal(blog.modified_at);\n          return (\n            <li className=\"s-l-item\" key={blog.id}>\n              {this._renderBlogTitle(blog)}\n              <div className=\"d--flex\">\n                <p className=\"s-l-taction\">Last edited {timeStamp}</p>\n                <button className=\"btn-chromeless\" onClick={this.createToolTipProps} id={`sItemId${blog.id}`} data-attr-id={blog.id} style={{position: 'relative'}}>\n                  <svg width=\"21\" height=\"21\" viewBox=\"0 0 21 21\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M4 7.33L10.03 14l.5.55.5-.55 5.96-6.6-.98-.9-5.98 6.6h1L4.98 6.45z\" fillRule=\"evenodd\"></path>\n                  </svg>\n                </button>\n              </div>\n            </li>\n          );\n        });\n        return (\n          <ul className=\"list-n-block\">{listItems}</ul>\n        );\n      }else {\n        return (\n          <h3 className=\"user--msg\">{this.state.showStories === 'drafts' ? 'You haven\\'t wrote any stories yet.': 'You haven\\'t published any public stories yet.'}</h3>\n        );\n      }\n\n    }else{\n      return <h3 className=\"user--msg\">Loading...</h3>;\n    }\n  }\n  render(){\n    return (\n      <div>\n        {this.renderPosts()}\n        {this.state.tooltip && this.renderTooltip()}\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state){\n  return {username: state.auth.authenticated.user.username};\n}\nexport default connect(mapStateToProps, null)(UserStories);\n","import React from 'react';\nimport './Stories.css';\nimport { Link } from 'react-router-dom';\nimport UserStories from './UserStories';\nimport { getUserStoriesCount } from 'services/blogService';\nimport requireAuth from 'components/requireAuth';\n\nclass Stories extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      showStories:null,\n      storyCount: {\n        published: '',\n        drafts: ''\n      }\n    };\n  }\n  componentDidMount(){\n    this.token = localStorage.getItem('token');\n    getUserStoriesCount(this.token).then(res => {\n      this.setState({storyCount: res.data});\n    });\n    this.setState({showStories:this.props.match.params.id});\n  }\n  renderNav(){\n    if(this.state.showStories === 'drafts'){\n      return (\n        <ul className=\"list-inline\">\n          <li className=\"active\"><Link to=\"/me/stories/drafts\">Drafts {this.state.storyCount.drafts}</Link></li>\n          <li><Link to=\"/me/stories/published\">Published {this.state.storyCount.published}</Link></li>\n        </ul>\n      )\n    }else{\n      return (\n        <ul className=\"list-inline\">\n          <li><Link to=\"/me/stories/drafts\">Drafts {this.state.storyCount.drafts}</Link></li>\n          <li className=\"active\"><Link to=\"/me/stories/published\">Published {this.state.storyCount.published}</Link></li>\n        </ul>\n      )\n    }\n  }\n\n  componentWillReceiveProps(nextProps){\n    this.setState({showStories:nextProps.match.params.id});\n  }\n\n  render(){\n    if(this.state.showStories){\n      return (\n        <section>\n          <div className=\"d--flex flex-sb flex-ai-cn flex-fw\" style={{marginBottom:30+'px'}}>\n            <h1 className=\"title--lg\">Your Stories</h1>\n            <Link to=\"/new-story\" className=\"mjl-btn btn--p-hollow\">Write Story</Link>\n          </div>\n          <nav className=\"s-nav\">\n            {this.renderNav()}\n          </nav>\n          <div>\n            <UserStories showStories={this.state.showStories}/>\n          </div>\n        </section>\n      );\n    }else{\n      return <h3>Loading...</h3>\n    }\n  }\n}\n\nexport default requireAuth(Stories);\n","import React from 'react';\nimport { fetchStory } from 'services/storyService';\nimport './ReadStory.css';\nimport { utcToLocalMin } from 'services/utils';\nimport { Link } from 'react-router-dom';\n\nexport default class ReadStory extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      story: null,\n      loading: true\n    }\n  }\n\n  componentDidMount(){\n    const {storyId} = this.props.match.params;\n    fetchStory(storyId).then(res => {\n      const story = res.data.blog;\n      this.setState({story, loading: false}, this.renderStory)\n    });\n  }\n\n  renderProfileImage(){\n    if(this.state.story.blogger.profile_image){\n      return (\n        <Link to={`/@${this.state.story.blogger.username}`}>\n          <img src={this.state.story.blogger.profile_image} alt={this.state.story.blogger.fullname}/>\n        </Link>\n      );\n    }else{\n      const initial = this.state.story.blogger.fullname.charAt(0);\n      return (\n        <Link to={`/@${this.state.story.blogger.username}`}>\n          <div className=\"usr-p-image\"><span>{initial}</span></div>\n        </Link>\n      );\n    }\n  }\n\n  renderHeaderImage(){\n    const storyImages = this.state.story.blogThumbnails;\n\n    if(storyImages.length > 0){\n      const headerImage = storyImages[0].story_thumb;\n      return (\n        <div className=\"r-h-img\" style={{background: `url(${headerImage})`}}>\n        </div>\n      );\n    }\n  }\n\n  renderStory = () => {\n    /*\n    * To display data as html instead of plain text\n    */\n    const article = document.getElementById('storyBox');\n    if(article)\n      article.innerHTML = this.state.story.story;\n  }\n\n  render(){\n    if(this.state.loading){\n      return <h3>Loading...</h3>;\n    }else{\n      if(this.state.story){\n        const storyCreationDate = utcToLocalMin(this.state.story.created_at);\n        return (\n          <section id=\"readStory\" className=\"container--sm\">\n            <h1>{this.state.story.title}</h1>\n            <div className=\"d--flex usr-content\">\n              <div className=\"profile-img-wrap\">\n                {this.renderProfileImage()}\n              </div>\n              <div className=\"usr-w\">\n                <Link to={`/@${this.state.story.blogger.username}`}>{this.state.story.blogger.fullname}</Link>\n                <span>{storyCreationDate}</span>\n              </div>\n            </div>\n            {this.renderHeaderImage()}\n            <article id=\"storyBox\">\n            </article>\n            <footer>\n              <div className=\"d--flex\">\n                <div className=\"f-profile-img\">\n                  {this.renderProfileImage()}\n                </div>\n                <div className=\"f-usr-content\">\n                  <h3>\n                    <Link to={`/@${this.state.story.blogger.username}`}>{this.state.story.blogger.fullname}</Link>\n                  </h3>\n                  <p>{this.state.story.blogger.bio}</p>\n                </div>\n              </div>\n            </footer>\n          </section>\n        );\n      }else{\n        return <h3>Page not found :(</h3>\n      }\n    }\n  }\n}\n","import { AUTH_USER, AUTH_ERROR } from '../actions/types';\n/*\n* state structure\n{\n  authenticated: {\n    token: '',\n    username: ''\n  }\n}\n*/\nconst INITIAL_STATE = {\n  authenticated: null\n}\nexport default function(state = INITIAL_STATE, action){\n  switch (action.type) {\n    case AUTH_USER:\n      return {...state, authenticated: action.payload};\n    case AUTH_ERROR:\n      return {...state, authenticated: action.payload};\n    default:\n      return state;\n  }\n}\n","import { GET_BLOGGER } from '../actions/types';\n\nconst INITIAL_STATE = {\n  info: null\n}\n\nexport default function(state = INITIAL_STATE, action){\n  switch (action.type) {\n    case GET_BLOGGER:\n      return {...state, info: action.payload};\n    default:\n      return state;\n  }\n}\n","import { OPEN_L_MODAL, CLOSE_L_MODAL } from 'actions/types';\n\nconst INITIAL_STATE = {\n  openModal: false\n}\nexport default function(state = INITIAL_STATE, action){\n  switch (action.type) {\n    case OPEN_L_MODAL:\n      return {...state, openModal: true};\n    case CLOSE_L_MODAL:\n      return {...state, openModal: false};\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form';\nimport auth from './auth';\nimport blogger from './blogger';\nimport loginModal from './loginModal';\n\nexport default combineReducers({\n  auth,\n  form: formReducer,\n  blogger,\n  loginModal\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n/*\n* Switch\n  - https://stackoverflow.com/questions/32128978/react-router-no-not-found-route\n* Router\n  - https://stackoverflow.com/questions/42223794/multiple-reactdom-render-calls-with-shared-router-context\n*/\nimport { Router, Route , Switch} from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport reduxThunk from 'redux-thunk';\nimport App from './components/App';\nimport Home from './components/site/Home';\nimport Topic from './components/site/topic/Topic';\nimport AllTopics from './components/site/topic/AllTopics';\nimport Search from './components/site/search/Search';\n\nimport About from './components/site/about/About';\nimport Settings from './components/site/users/settings/Settings';\nimport Profile from './components/site/users/profile/Profile';\nimport ProfileEdit from './components/site/users/profile/ProfileEdit';\nimport WriteStory from './components/site/users/story/writeStory/WriteStory';\nimport Stories from './components/site/users/story/Stories';\nimport ReadStory from './components/site/ReadStory';\n\nimport reducers from './reducers';\n\nimport createBrowserHistory from \"history/createBrowserHistory\";\n// Pass this as a Router props to share browser history among all ReactDOM.render()\nexport const history = createBrowserHistory();\n\nexport const store = createStore(\n  reducers,\n  {},\n  applyMiddleware(reduxThunk)\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router history={history}>\n      <App>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/about\" component={About} />\n          <Route exact path=\"/topics\" component={AllTopics} />\n          <Route exact path=\"/topic/:topic\" component={Topic} />\n          <Route exact path=\"/search\" component={Search} />\n          <Route exact path=\"/search/users\" component={Search} />\n\n\n          <Route exact path=\"/@:username/:storyId\" component={ReadStory} />\n\n          <Route exact path=\"/new-story\" component={WriteStory} />\n          <Route exact path=\"/p/:postId/edit\" component={WriteStory} />\n          <Route exact path=\"/me/stories/:id\" component={Stories} />\n\n          <Route exact path=\"/me/settings\" component={Settings} />\n          <Route exact path=\"/@:username\" component={Profile} />\n          <Route exact path=\"/profile/edit\" component={ProfileEdit} />\n          <Route render={()=> <h1>Page Not Found :(</h1>}/>\n        </Switch>\n      </App>\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n","import React from 'react';\n\nexport default () => {\n  return (\n    <section>\n      <h3>All Topics in progress...</h3>\n    </section>\n  );\n}\n"],"sourceRoot":""}